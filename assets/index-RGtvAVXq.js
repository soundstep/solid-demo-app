const __vite__fileDeps=["assets/Grid-B-0pkRyz.js","assets/CoreExtension-DwNM7x2o.js","assets/Portal-DpG-4L6s.js","assets/Text-DIHR_K5w.js","assets/Create-CYW12dLz.js","assets/Viewport-CHOT06ak.js","assets/Buttons-CyDLRxnD.js","assets/Flex-ByrbJAqP.js","assets/FlexSize-DS4oagJk.js","assets/FlexColumnSize-y5-aYERq.js","assets/FlexColumn-D7NrfqJ3.js","assets/ButtonsMaterial-Cicfh8Y2.js","assets/SuperFlex-B3Og-6Qy.js","assets/Entity-BTQ-e4Rl.js","assets/People-6UqSXpsu.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var gi=Object.defineProperty;var mi=(n,r,e)=>r in n?gi(n,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[r]=e;var u=(n,r,e)=>(mi(n,typeof r!="symbol"?r+"":r,e),e);import{a as L,i as mo,T as xi,g as Cr,c as ht,E as et,b as Ee,d as yi,e as tn,f as vi,m as St,W as pt,C as wi,h as xo,j as bi,k as Tr,S as Cn,l as yo,B as Si,n as Ai,o as vo,p as Ci,q as Ti,r as _i,s as Ri,t as Tn,u as _n,v as Ii,w as wo,R as ki,x as Bi,y as Ei,z as Ni,A as Li}from"./CoreExtension-DwNM7x2o.js";function _d(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}})();const Fi="modulepreload",Mi=function(n){return"/solid-demo-app/"+n},Rn={},he=function(r,e,t){let o=Promise.resolve();if(e&&e.length>0){const i=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=Promise.all(e.map(l=>{if(l=Mi(l),l in Rn)return;Rn[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(!!t)for(let w=i.length-1;w>=0;w--){const x=i[w];if(x.href===l&&(!c||x.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(l,'"]').concat(d)))return;const g=document.createElement("link");if(g.rel=c?"stylesheet":Fi,c||(g.as="script",g.crossOrigin=""),g.href=l,a&&g.setAttribute("nonce",a),document.head.appendChild(g),c)return new Promise((w,x)=>{g.addEventListener("load",w),g.addEventListener("error",()=>x(new Error("Unable to preload CSS for ".concat(l))))})}))}return o.then(()=>r()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})},H={context:void 0,registry:void 0};function At(n){H.context=n}const bo=(n,r)=>n===r,nr=Symbol("solid-proxy"),So=Symbol("solid-track"),or={equals:bo};let Ao=Eo;const Ae=1,ir=2,Co={owned:null,cleanups:null,context:null,owner:null},_r={};var O=null;let Rr=null,zi=null,U=null,ae=null,Ie=null,yr=0;function He(n,r){const e=U,t=O,o=n.length===0,i=r===void 0?t:r,s=o?Co:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=o?n:()=>n(()=>te(()=>vr(s)));O=s,U=null;try{return Be(a,!0)}finally{U=e,O=t}}function Y(n,r){r=r?Object.assign({},or,r):or;const e={value:n,observers:null,observerSlots:null,comparator:r.equals||void 0},t=o=>(typeof o=="function"&&(o=o(e.value)),Bo(e,o));return[ko.bind(e),t]}function Pr(n,r,e){const t=Nt(n,r,!0,Ae);tt(t)}function Re(n,r,e){const t=Nt(n,r,!1,Ae);tt(t)}function Je(n,r,e){Ao=Hi;const t=Nt(n,r,!1,Ae);(!e||!e.render)&&(t.user=!0),Ie?Ie.push(t):tt(t)}function X(n,r,e){e=e?Object.assign({},or,e):or;const t=Nt(n,r,!0,0);return t.observers=null,t.observerSlots=null,t.comparator=e.equals||void 0,tt(t),ko.bind(t)}function Pi(n){return n&&typeof n=="object"&&"then"in n}function To(n,r,e){let t,o,i;arguments.length===2&&typeof r=="object"||arguments.length===1?(t=!0,o=n,i=r||{}):(t=n,o=r,i=e||{});let s=null,a=_r,l=null,c=!1,d="initialValue"in i,f=typeof t=="function"&&X(t);const g=new Set,[w,x]=(i.storage||Y)(i.initialValue),[y,b]=Y(void 0),[C,v]=Y(void 0,{equals:!1}),[m,p]=Y(d?"ready":"unresolved");if(H.context){l="".concat(H.context.id).concat(H.context.count++);let A;i.ssrLoadFrom==="initial"?a=i.initialValue:H.load&&(A=H.load(l))&&(a=A)}function S(A,E,N,B){return s===A&&(s=null,B!==void 0&&(d=!0),(A===a||E===a)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(B,{value:E})),a=_r,I(E,N)),E}function I(A,E){Be(()=>{E===void 0&&x(()=>A),p(E!==void 0?"errored":d?"ready":"unresolved"),b(E);for(const N of g.keys())N.decrement();g.clear()},!1)}function T(){const A=Ui,E=w(),N=y();if(N!==void 0&&!s)throw N;return U&&!U.user&&A&&Pr(()=>{C(),s&&(A.resolved||g.has(A)||(A.increment(),g.add(A)))}),E}function _(A=!0){if(A!==!1&&c)return;c=!1;const E=f?f():t;if(E==null||E===!1){S(s,te(w));return}const N=a!==_r?a:te(()=>o(E,{value:w(),refetching:A}));return Pi(N)?(s=N,"value"in N?(N.status==="success"?S(s,N.value,void 0,E):S(s,void 0,void 0,E),N):(c=!0,queueMicrotask(()=>c=!1),Be(()=>{p(d?"refreshing":"pending"),v()},!1),N.then(B=>S(N,B,void 0,E),B=>S(N,void 0,Lo(B),E)))):(S(s,N,void 0,E),N)}return Object.defineProperties(T,{state:{get:()=>m()},error:{get:()=>y()},loading:{get(){const A=m();return A==="pending"||A==="refreshing"}},latest:{get(){if(!d)return T();const A=y();if(A&&!s)throw A;return w()}}}),f?Pr(()=>_(!1)):_(!1),[T,{refetch:_,mutate:x}]}function Di(n,r=bo,e){const t=new Map,o=Nt(i=>{const s=n();for(const[a,l]of t.entries())if(r(a,s)!==r(a,i))for(const c of l.values())c.state=Ae,c.pure?ae.push(c):Ie.push(c);return s},void 0,!0,Ae);return tt(o),i=>{const s=U;if(s){let a;(a=t.get(i))?a.add(s):t.set(i,a=new Set([s])),ke(()=>{a.delete(s),!a.size&&t.delete(i)})}return r(i,o.value)}}function Oi(n){return Be(n,!1)}function te(n){if(U===null)return n();const r=U;U=null;try{return n()}finally{U=r}}function gt(n,r,e){const t=Array.isArray(n);let o,i=e&&e.defer;return s=>{let a;if(t){a=Array(n.length);for(let c=0;c<n.length;c++)a[c]=n[c]()}else a=n();if(i)return i=!1,s;const l=te(()=>r(a,o,s));return o=a,l}}function Id(n){Je(()=>te(n))}function ke(n){return O===null||(O.cleanups===null?O.cleanups=[n]:O.cleanups.push(n)),n}function mt(){return O}function _o(n,r){const e=O,t=U;O=n,U=null;try{return Be(r,!0)}catch(o){nn(o)}finally{O=e,U=t}}function Wi(n){const r=U,e=O;return Promise.resolve().then(()=>{U=r,O=e;let t;return Be(n,!1),U=O=null,t?t.done:void 0})}function Ro(n,r){const e=Symbol("context");return{id:e,Provider:Qi(e),defaultValue:n}}function Io(n){return O&&O.context&&O.context[n.id]!==void 0?O.context[n.id]:n.defaultValue}function rn(n){const r=X(n),e=X(()=>Dr(r()));return e.toArray=()=>{const t=e();return Array.isArray(t)?t:t!=null?[t]:[]},e}let Ui;function ko(){if(this.sources&&this.state)if(this.state===Ae)tt(this);else{const n=ae;ae=null,Be(()=>ar(this),!1),ae=n}if(U){const n=this.observers?this.observers.length:0;U.sources?(U.sources.push(this),U.sourceSlots.push(n)):(U.sources=[this],U.sourceSlots=[n]),this.observers?(this.observers.push(U),this.observerSlots.push(U.sources.length-1)):(this.observers=[U],this.observerSlots=[U.sources.length-1])}return this.value}function Bo(n,r,e){let t=n.value;return(!n.comparator||!n.comparator(t,r))&&(n.value=r,n.observers&&n.observers.length&&Be(()=>{for(let o=0;o<n.observers.length;o+=1){const i=n.observers[o],s=Rr&&Rr.running;s&&Rr.disposed.has(i),(s?!i.tState:!i.state)&&(i.pure?ae.push(i):Ie.push(i),i.observers&&No(i)),s||(i.state=Ae)}if(ae.length>1e6)throw ae=[],new Error},!1)),r}function tt(n){if(!n.fn)return;vr(n);const r=yr;Yi(n,n.value,r)}function Yi(n,r,e){let t;const o=O,i=U;U=O=n;try{t=n.fn(r)}catch(s){return n.pure&&(n.state=Ae,n.owned&&n.owned.forEach(vr),n.owned=null),n.updatedAt=e+1,nn(s)}finally{U=i,O=o}(!n.updatedAt||n.updatedAt<=e)&&(n.updatedAt!=null&&"observers"in n?Bo(n,t):n.value=t,n.updatedAt=e)}function Nt(n,r,e,t=Ae,o){const i={fn:n,state:t,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:r,owner:O,context:O?O.context:null,pure:e};return O===null||O!==Co&&(O.owned?O.owned.push(i):O.owned=[i]),i}function sr(n){if(n.state===0)return;if(n.state===ir)return ar(n);if(n.suspense&&te(n.suspense.inFallback))return n.suspense.effects.push(n);const r=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<yr);)n.state&&r.push(n);for(let e=r.length-1;e>=0;e--)if(n=r[e],n.state===Ae)tt(n);else if(n.state===ir){const t=ae;ae=null,Be(()=>ar(n,r[0]),!1),ae=t}}function Be(n,r){if(ae)return n();let e=!1;r||(ae=[]),Ie?e=!0:Ie=[],yr++;try{const t=n();return $i(e),t}catch(t){e||(Ie=null),ae=null,nn(t)}}function $i(n){if(ae&&(Eo(ae),ae=null),n)return;const r=Ie;Ie=null,r.length&&Be(()=>Ao(r),!1)}function Eo(n){for(let r=0;r<n.length;r++)sr(n[r])}function Hi(n){let r,e=0;for(r=0;r<n.length;r++){const t=n[r];t.user?n[e++]=t:sr(t)}if(H.context){if(H.count){H.effects||(H.effects=[]),H.effects.push(...n.slice(0,e));return}else H.effects&&(n=[...H.effects,...n],e+=H.effects.length,delete H.effects);At()}for(r=0;r<e;r++)sr(n[r])}function ar(n,r){n.state=0;for(let e=0;e<n.sources.length;e+=1){const t=n.sources[e];if(t.sources){const o=t.state;o===Ae?t!==r&&(!t.updatedAt||t.updatedAt<yr)&&sr(t):o===ir&&ar(t,r)}}}function No(n){for(let r=0;r<n.observers.length;r+=1){const e=n.observers[r];e.state||(e.state=ir,e.pure?ae.push(e):Ie.push(e),e.observers&&No(e))}}function vr(n){let r;if(n.sources)for(;n.sources.length;){const e=n.sources.pop(),t=n.sourceSlots.pop(),o=e.observers;if(o&&o.length){const i=o.pop(),s=e.observerSlots.pop();t<o.length&&(i.sourceSlots[s]=t,o[t]=i,e.observerSlots[t]=s)}}if(n.owned){for(r=n.owned.length-1;r>=0;r--)vr(n.owned[r]);n.owned=null}if(n.cleanups){for(r=n.cleanups.length-1;r>=0;r--)n.cleanups[r]();n.cleanups=null}n.state=0}function Lo(n){return n instanceof Error?n:new Error(typeof n=="string"?n:"Unknown error",{cause:n})}function nn(n,r=O){throw Lo(n)}function Dr(n){if(typeof n=="function"&&!n.length)return Dr(n());if(Array.isArray(n)){const r=[];for(let e=0;e<n.length;e++){const t=Dr(n[e]);Array.isArray(t)?r.push.apply(r,t):r.push(t)}return r}return n}function Qi(n,r){return function(t){let o;return Re(()=>o=te(()=>(O.context={...O.context,[n]:t.value},rn(()=>t.children))),void 0),o}}const Or=Symbol("fallback");function lr(n){for(let r=0;r<n.length;r++)n[r]()}function Xi(n,r,e={}){let t=[],o=[],i=[],s=0,a=r.length>1?[]:null;return ke(()=>lr(i)),()=>{let l=n()||[],c,d;return l[So],te(()=>{let g=l.length,w,x,y,b,C,v,m,p,S;if(g===0)s!==0&&(lr(i),i=[],t=[],o=[],s=0,a&&(a=[])),e.fallback&&(t=[Or],o[0]=He(I=>(i[0]=I,e.fallback())),s=1);else if(s===0){for(o=new Array(g),d=0;d<g;d++)t[d]=l[d],o[d]=He(f);s=g}else{for(y=new Array(g),b=new Array(g),a&&(C=new Array(g)),v=0,m=Math.min(s,g);v<m&&t[v]===l[v];v++);for(m=s-1,p=g-1;m>=v&&p>=v&&t[m]===l[p];m--,p--)y[p]=o[m],b[p]=i[m],a&&(C[p]=a[m]);for(w=new Map,x=new Array(p+1),d=p;d>=v;d--)S=l[d],c=w.get(S),x[d]=c===void 0?-1:c,w.set(S,d);for(c=v;c<=m;c++)S=t[c],d=w.get(S),d!==void 0&&d!==-1?(y[d]=o[c],b[d]=i[c],a&&(C[d]=a[c]),d=x[d],w.set(S,d)):i[c]();for(d=v;d<g;d++)d in y?(o[d]=y[d],i[d]=b[d],a&&(a[d]=C[d],a[d](d))):o[d]=He(f);o=o.slice(0,s=g),t=l.slice(0)}return o});function f(g){if(i[d]=g,a){const[w,x]=Y(d);return a[d]=x,r(l[d],w)}return r(l[d])}}}function Ki(n,r,e={}){let t=[],o=[],i=[],s=[],a=0,l;return ke(()=>lr(i)),()=>{const c=n()||[];return c[So],te(()=>{if(c.length===0)return a!==0&&(lr(i),i=[],t=[],o=[],a=0,s=[]),e.fallback&&(t=[Or],o[0]=He(f=>(i[0]=f,e.fallback())),a=1),o;for(t[0]===Or&&(i[0](),i=[],t=[],o=[],a=0),l=0;l<c.length;l++)l<t.length&&t[l]!==c[l]?s[l](()=>c[l]):l>=t.length&&(o[l]=He(d));for(;l<t.length;l++)i[l]();return a=s.length=i.length=c.length,t=c.slice(0),o=o.slice(0,a)});function d(f){i[l]=f;const[g,w]=Y(c[l]);return s[l]=w,r(g,l)}}}function Fo(n,r){return te(()=>n(r||{}))}function zt(){return!0}const Wr={get(n,r,e){return r===nr?e:n.get(r)},has(n,r){return r===nr?!0:n.has(r)},set:zt,deleteProperty:zt,getOwnPropertyDescriptor(n,r){return{configurable:!0,enumerable:!0,get(){return n.get(r)},set:zt,deleteProperty:zt}},ownKeys(n){return n.keys()}};function Ir(n){return(n=typeof n=="function"?n():n)?n:{}}function ji(){for(let n=0,r=this.length;n<r;++n){const e=this[n]();if(e!==void 0)return e}}function on(...n){let r=!1;for(let s=0;s<n.length;s++){const a=n[s];r=r||!!a&&nr in a,n[s]=typeof a=="function"?(r=!0,X(a)):a}if(r)return new Proxy({get(s){for(let a=n.length-1;a>=0;a--){const l=Ir(n[a])[s];if(l!==void 0)return l}},has(s){for(let a=n.length-1;a>=0;a--)if(s in Ir(n[a]))return!0;return!1},keys(){const s=[];for(let a=0;a<n.length;a++)s.push(...Object.keys(Ir(n[a])));return[...new Set(s)]}},Wr);const e={},t=Object.create(null);for(let s=n.length-1;s>=0;s--){const a=n[s];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let c=l.length-1;c>=0;c--){const d=l[c];if(d==="__proto__"||d==="constructor")continue;const f=Object.getOwnPropertyDescriptor(a,d);if(!t[d])t[d]=f.get?{enumerable:!0,configurable:!0,get:ji.bind(e[d]=[f.get.bind(a)])}:f.value!==void 0?f:void 0;else{const g=e[d];g&&(f.get?g.push(f.get.bind(a)):f.value!==void 0&&g.push(()=>f.value))}}}const o={},i=Object.keys(t);for(let s=i.length-1;s>=0;s--){const a=i[s],l=t[a];l&&l.get?Object.defineProperty(o,a,l):o[a]=l?l.value:void 0}return o}function Vi(n,...r){if(nr in n){const o=new Set(r.length>1?r.flat():r[0]),i=r.map(s=>new Proxy({get(a){return s.includes(a)?n[a]:void 0},has(a){return s.includes(a)&&a in n},keys(){return s.filter(a=>a in n)}},Wr));return i.push(new Proxy({get(s){return o.has(s)?void 0:n[s]},has(s){return o.has(s)?!1:s in n},keys(){return Object.keys(n).filter(s=>!o.has(s))}},Wr)),i}const e={},t=r.map(()=>({}));for(const o of Object.getOwnPropertyNames(n)){const i=Object.getOwnPropertyDescriptor(n,o),s=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let a=!1,l=0;for(const c of r)c.includes(o)&&(a=!0,s?t[l][o]=i.value:Object.defineProperty(t[l],o,i)),++l;a||(s?e[o]=i.value:Object.defineProperty(e,o,i))}return[...t,e]}function fe(n){let r,e;const t=o=>{const i=H.context;if(i){const[a,l]=Y();H.count||(H.count=0),H.count++,(e||(e=n())).then(c=>{At(i),H.count--,l(()=>c.default),At()}),r=a}else if(!r){const[a]=To(()=>(e||(e=n())).then(l=>l.default));r=a}let s;return X(()=>(s=r())&&te(()=>{if(!i)return s(o);const a=H.context;At(i);const l=s(o);return At(a),l}))};return t.preload=()=>e||((e=n()).then(o=>r=()=>o.default),e),t}const Gi=n=>"Stale read from <".concat(n,">.");function sn(n){const r="fallback"in n&&{fallback:()=>n.fallback};return X(Xi(()=>n.each,n.children,r||void 0))}function kd(n){const r="fallback"in n&&{fallback:()=>n.fallback};return X(Ki(()=>n.each,n.children,r||void 0))}function wr(n){const r=n.keyed,e=X(()=>n.when,void 0,{equals:(t,o)=>r?t===o:!t==!o});return X(()=>{const t=e();if(t){const o=n.children;return typeof o=="function"&&o.length>0?te(()=>o(r?t:()=>{if(!te(e))throw Gi("Show");return n.when})):o}return n.fallback},void 0,void 0)}const qi=void 0,[an,Zi]=Y(void 0);class Mo{constructor(r){u(this,"releaseCallback");this.releaseCallback=r}}class Ji extends Mo{constructor(e,t){var o,i;super(e);u(this,"textureMap",new Map);u(this,"zeroReferenceTextureSet",new Set);u(this,"options");this.options={textureCleanupIntervalMs:(o=t.textureCleanupIntervalMs)!=null?o:1e4,textureCleanupAgeThreadholdMs:(i=t.textureCleanupAgeThreadholdMs)!=null?i:6e4},setInterval(()=>{const s=Date.now(),a=this.options.textureCleanupAgeThreadholdMs;for(const l of this.zeroReferenceTextureSet)s-l.lastUpdate>a&&(this.releaseCallback(l.id),this.textureMap.delete(l.id),this.zeroReferenceTextureSet.delete(l))},this.options.textureCleanupIntervalMs)}registerTexture(e){var o;const t=(o=e.options)==null?void 0:o.id;if(L(t,"Texture must have an id to be registered"),!this.textureMap.has(t)){const i={id:t,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(t,i),this.zeroReferenceTextureSet.add(i)}}incrementTextureRefCount(e){var i;const t=(i=e.options)==null?void 0:i.id;L(t,"Texture must have an id to be registered");let o=this.textureMap.get(t);o||(this.registerTexture(e),o=this.textureMap.get(t)),L(o,"Texture must have been registered"),e.txType==="SubTexture"&&this.incrementTextureRefCount(e.props.texture),o.nodeRefCount++,o.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(o)&&this.zeroReferenceTextureSet.delete(o)}decrementTextureRefCount(e){var i;const t=(i=e.options)==null?void 0:i.id;L(t,"Texture must have an id to be registered");const o=this.textureMap.get(t);L(o,"Texture must have been registered"),o.nodeRefCount--,o.lastUpdate=Date.now(),o.nodeRefCount===0&&this.zeroReferenceTextureSet.add(o),e.txType==="SubTexture"&&this.decrementTextureRefCount(e.props.texture)}}class es extends Mo{constructor(e){super(e);u(this,"registry");this.registry=new FinalizationRegistry(e)}registerTexture(e){var t,o;L((t=e.options)==null?void 0:t.id,"Texture must have an ID to be registered"),this.registry.register(e,(o=e.options)==null?void 0:o.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}const vt={alpha:n=>n===1?null:{prop:"opacity",value:"".concat(n)},x:n=>({prop:"left",value:"".concat(n,"px")}),y:n=>({prop:"top",value:"".concat(n,"px")}),width:n=>n===0?null:{prop:"width",value:"".concat(n,"px")},height:n=>n===0?null:{prop:"height",value:"".concat(n,"px")},zIndex:()=>"zIndex",fontFamily:()=>"font-family",fontSize:()=>"font-size",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",lineHeight:()=>"line-height",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:n=>n===!1?null:{prop:"overflow",value:n?"hidden":"visible"},rotation:n=>n===0?null:{prop:"transform",value:"rotate(".concat(n,"rad)")},scale:n=>n===1?null:{prop:"transform",value:"scale(".concat(n,")")},scaleX:n=>n===1?null:{prop:"transform",value:"scaleX(".concat(n,")")},scaleY:n=>n===1?null:{prop:"transform",value:"scaleY(".concat(n,")")},color:n=>n===0?null:{prop:"color",value:zo(n)}},zo=n=>{const r=(n&255)/255,e=n>>8&255,t=n>>16&255,o=n>>24&255;return"rgba(".concat(o,",").concat(t,",").concat(e,",").concat(r,")")},ts={id:"id"};class rs{constructor(r,e){u(this,"root",null);u(this,"canvas",null);u(this,"height",1080);u(this,"width",1920);u(this,"scaleX",1);u(this,"scaleY",1);var i,s,a,l,c,d;if(mo())return;if(!e)throw new Error("settings is required");this.height=Math.ceil((s=e.appHeight)!=null?s:1080/((i=e.deviceLogicalPixelRatio)!=null?i:1)),this.width=Math.ceil((l=e.appWidth)!=null?l:1900/((a=e.deviceLogicalPixelRatio)!=null?a:1)),this.scaleX=(c=e.deviceLogicalPixelRatio)!=null?c:1,this.scaleY=(d=e.deviceLogicalPixelRatio)!=null?d:1,this.canvas=r,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(r,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(r),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const r=this.canvas.getBoundingClientRect(),e=document.documentElement.scrollTop+r.top,t=document.documentElement.scrollLeft+r.left;this.root.id="root",this.root.style.left="".concat(t,"px"),this.root.style.top="".concat(e,"px"),this.root.style.width="".concat(this.width,"px"),this.root.style.height="".concat(this.height,"px"),this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform="scale(".concat(this.scaleX,", ").concat(this.scaleY,")"),this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(r,e){const t=document.createElement("div");t.style.position="absolute",t.id=r.id.toString();for(const o in e)this.updateNodeProperty(t,o,e[o]);return t}createNode(r,e){const t=r.createNode(e),o=this.createDiv(t,e);return o.node=t,t.div=o,this.createProxy(t,o)}createTextNode(r,e){const t=r.createTextNode(e),o=this.createDiv(t,e);return o.node=t,t.div=o,this.createProxy(t,o)}createProxy(r,e){return new Proxy(r,{set:(t,o,i)=>(this.updateNodeProperty(e,o,i),Reflect.set(t,o,i)),get:(t,o,i)=>(o==="destroy"&&this.destroyNode(t),o==="animate"?(s,a)=>{const l=t.animate(s,a);return new Proxy(l,{get:(c,d,f)=>(d==="start"&&this.animateNode(e,r,s,a),Reflect.get(c,d,f))})}:Reflect.get(t,o,i))})}destroyNode(r){const e=document.getElementById(r.id.toString());e==null||e.remove()}updateNodeProperty(r,e,t){var o;if(!(this.root===null||t===void 0||t===null)){if(e==="parent"){const i=t.id;if(i===1){this.root.appendChild(r);return}const s=document.getElementById(i.toString());s==null||s.appendChild(r);return}if(e==="text"){r.innerHTML=String(t),r.style.visibility="hidden";return}if(e==="src"&&t){r.setAttribute("data-src",String(t));return}if(vt[e]){const i=(o=vt[e])==null?void 0:o.call(vt,t);if(i===null)return;if(typeof i=="string"){r.style.setProperty(i,String(t));return}typeof i=="object"&&r.style.setProperty(i.prop,i.value);return}if(ts[e]){r.setAttribute(String(vt[e]),String(t));return}if(e==="data"){for(const i in t){const s=t[i];s===void 0?r.removeAttribute("data-".concat(i)):r.setAttribute("data-".concat(i),String(s))}return}}}animateNode(r,e,t,o){const{duration:i=1e3,delay:s=0}=o,{x:a,y:l,width:c,height:d,alpha:f=1,rotation:g=0,scale:w=1,color:x}=t;function y(){setTimeout(()=>{r.style.top="".concat(l,"px"),r.style.left="".concat(a,"px"),r.style.width="".concat(c,"px"),r.style.height="".concat(d,"px"),r.style.opacity="".concat(f),r.style.rotate="".concat(g,"rad"),r.style.scale="".concat(w),r.style.color=zo(x)},i)}setTimeout(y,s)}}class oe{constructor(r){u(this,"priority",1);u(this,"name","");u(this,"ref");u(this,"target");u(this,"passParameters","");u(this,"declaredUniforms","");u(this,"uniformInfo",{});const{ref:e,target:t,props:o={}}=r;this.ref=e,this.target=t;const i={},s=[];let a="";const l=this.constructor.uniforms||{};for(const c in l){const d=l[c],f=d.type,g="".concat(e,"_").concat(c);let w="";d.size&&(w="[".concat(d.size(o),"]")),s.push(g),a+="uniform ".concat(f," ").concat(g).concat(w,";"),i[c]={name:g,uniform:l[c].method}}this.passParameters=s.join(","),this.declaredUniforms=a,this.uniformInfo=i}static getEffectKey(r){return""}static getMethodParameters(r,e){const t=[];for(const o in r){const i=r[o];let s="";i.size&&(s="[".concat(i.size(e),"]")),t.push("".concat(i.type," ").concat(o).concat(s))}return t.join(",")}static resolveDefaults(r){return{}}static makeEffectKey(r){return!1}}u(oe,"uniforms",{}),u(oe,"methods"),u(oe,"onShaderMask"),u(oe,"onColorize"),u(oe,"onEffectMask");const ns={x:(n,r)=>{n.props.x=r},y:(n,r)=>{n.props.y=r},width:(n,r)=>{n.props.width=r},height:(n,r)=>{n.props.height=r},color:(n,r)=>{n.props.color=r},zIndex:(n,r)=>{n.props.zIndex=r},fontFamily:(n,r)=>{n.props.fontFamily=r},fontWeight:(n,r)=>{n.props.fontWeight=r},fontStyle:(n,r)=>{n.props.fontStyle=r},fontStretch:(n,r)=>{n.props.fontStretch=r},fontSize:(n,r)=>{n.props.fontSize=r},text:(n,r)=>{n.props.text=r},textAlign:(n,r)=>{n.props.textAlign=r},contain:(n,r)=>{n.props.contain=r},offsetY:(n,r)=>{n.props.offsetY=r},scrollable:(n,r)=>{n.props.scrollable=r},scrollY:(n,r)=>{n.props.scrollY=r},letterSpacing:(n,r)=>{n.props.letterSpacing=r},lineHeight:(n,r)=>{n.props.lineHeight=r},maxLines:(n,r)=>{n.props.maxLines=r},textBaseline:(n,r)=>{n.props.textBaseline=r},verticalAlign:(n,r)=>{n.props.verticalAlign=r},overflowSuffix:(n,r)=>{n.props.overflowSuffix=r},debug:(n,r)=>{n.props.debug=r}};class Po{constructor(r){u(this,"stage");u(this,"set");this.stage=r;const e={...ns,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(e).map(([t,o])=>[t,(i,s)=>{i.props[t]!==s&&(o(i,s),this.stage.requestRender())}])))}setStatus(r,e,t){r.status!==e&&(r.status=e,r.emitter.emit(e,t))}setIsRenderable(r,e){r.isRenderable=e}destroyState(r){["loading","loaded","failed"].forEach(t=>{r.emitter.off(t)})}scheduleUpdateState(r){r.updateScheduled||(r.updateScheduled=!0,queueMicrotask(()=>{r.updateScheduled=!1,this.updateState(r)}))}}class In extends xi{constructor(e,t,o){super(e,t);u(this,"fontFace");u(this,"fontUrl");const i=o.replace(/\(|\)/g,""),s=this.descriptors,a={style:s.style,weight:typeof s.weight=="number"?"".concat(s.weight):s.weight,stretch:s.stretch,unicodeRange:s.unicodeRange,variant:s.variant,featureSettings:s.featureSettings,display:s.display},l=new FontFace(e,"url(".concat(i,")"),a);l.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error),this.fontFace=l,this.fontUrl=o}}const kn=2048;function Bn(n,r,e,t,o){const i=n!=="bottom"?.5*r:0;return e*(t-1)+i+Math.max(e,r)+(o||0)}class os{constructor(r,e){u(this,"_canvas");u(this,"_context");u(this,"_settings");u(this,"renderInfo");this._canvas=r,this._context=e,this._settings=this.mergeDefaults({})}set settings(r){this._settings=this.mergeDefaults(r)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const r=[this._settings.fontFace],e=[];for(let t=0,o=r.length;t<o;t++)r[t]==="serif"||r[t]==="sans-serif"?e.push(r[t]):e.push('"'.concat(r[t],'"'));return"".concat(this._settings.fontStyle," ").concat(this._settings.fontSize*this.getPrecision(),"px ").concat(e.join(","))}_load(){if(document.fonts){const r=this._getFontSetting();try{if(!document.fonts.check(r,this._settings.text))return document.fonts.load(r,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,r)}).then(()=>{document.fonts.check(r,this._settings.text)||console.warn("[Lightning] Font not found",r)})}catch(e){console.warn("[Lightning] Can't check font loading for "+r)}}}calculateRenderInfo(){const r={},e=this.getPrecision(),t=this._settings.paddingLeft*e,o=this._settings.paddingRight*e,i=this._settings.fontSize*e;let s=this._settings.offsetY===null?null:this._settings.offsetY*e,a=(this._settings.lineHeight||i)*e;const l=this._settings.w*e,c=this._settings.h*e;let d=this._settings.wordWrapWidth*e;const f=this._settings.cutSx*e,g=this._settings.cutEx*e,w=this._settings.cutSy*e,x=this._settings.cutEy*e,y=(this._settings.letterSpacing||0)*e,b=this._settings.textIndent*e;this.setFontProperties();let C=l||2048/this.getPrecision(),v=C-t;if(v<10&&(C+=10-v,v=10),d||(d=v),this._settings.textOverflow&&!this._settings.wordWrap){let _;switch(this._settings.textOverflow){case"clip":_="";break;case"ellipsis":_=this._settings.overflowSuffix;break;default:_=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,d-b,_)}let m;if(this._settings.wordWrap)m=this.wrapText(this._settings.text,d,y,b);else{m={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const _=m.l.length;for(let A=0;A<_-1;A++)m.n.push(A)}let p=m.l;if(this._settings.maxLines&&p.length>this._settings.maxLines){const _=p.slice(0,this._settings.maxLines);let A=null;if(this._settings.overflowSuffix){const z=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,M=this.wrapText(_[_.length-1],d-z,y,b);_[_.length-1]="".concat(M.l[0]).concat(this._settings.overflowSuffix),A=[M.l.length>1?M.l[1]:""]}else A=[""];let E;const N=p.length;let B=0;const F=m.n.length;for(E=this._settings.maxLines;E<N;E++)A[B]+="".concat(A[B]?" ":"").concat(p[E]),E+1<F&&m.n[E+1]&&B++;r.remainingText=A.join("\n"),r.moreTextLines=!0,p=_}else r.moreTextLines=!1,r.remainingText="";let S=0;const I=[];for(let _=0;_<p.length;_++){const A=this.measureText(p[_],y)+(_===0?b:0);I.push(A),S=Math.max(S,A)}r.lineWidths=I,l||(C=S+t+o,v=S),a=a||i;let T;return c?T=c:T=Bn(this._settings.textBaseline,i,a,p.length,s),s===null&&(s=i),r.w=C,r.h=T,r.lines=p,r.precision=e,C||(C=1),T||(T=1),(f||g)&&(C=Math.min(C,g-f)),(w||x)&&(T=Math.min(T,x-w)),r.width=C,r.innerWidth=v,r.height=T,r.fontSize=i,r.cutSx=f,r.cutSy=w,r.cutEx=g,r.cutEy=x,r.lineHeight=a,r.lineWidths=I,r.offsetY=s,r.paddingLeft=t,r.paddingRight=o,r.letterSpacing=y,r.textIndent=b,r}draw(r,e){const t=this.getPrecision(),o=(e==null?void 0:e.lines)||r.lines,i=(e==null?void 0:e.lineWidths)||r.lineWidths,s=e?Bn(this._settings.textBaseline,r.fontSize,r.lineHeight,e.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*t):r.height;this._canvas.width=Math.min(Math.ceil(r.width+this._settings.textRenderIssueMargin),kn),this._canvas.height=Math.min(Math.ceil(s),kn),this.setFontProperties(),r.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(r.cutSx||r.cutSy)&&this._context.translate(-r.cutSx,-r.cutSy);let a,l;const c=[];for(let f=0,g=o.length;f<g;f++)a=f===0?r.textIndent:0,l=f*r.lineHeight+r.offsetY,this._settings.verticalAlign=="middle"?l+=(r.lineHeight-r.fontSize)/2:this._settings.verticalAlign=="bottom"&&(l+=r.lineHeight-r.fontSize),this._settings.textAlign==="right"?a+=r.innerWidth-i[f]:this._settings.textAlign==="center"&&(a+=(r.innerWidth-i[f])/2),a+=r.paddingLeft,c.push({text:o[f],x:a,y:l,w:i[f]});if(this._settings.highlight){const f=this._settings.highlightColor,g=this._settings.highlightHeight*t||r.fontSize*1.5,w=this._settings.highlightOffset*t,x=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*t:r.paddingLeft,y=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*t:r.paddingRight;this._context.fillStyle=Cr(f);for(let b=0;b<c.length;b++){const C=c[b];this._context.fillRect(C.x-x,C.y-r.offsetY+w,C.w+y+x,g)}}let d=null;this._settings.shadow&&(d=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=Cr(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*t,this._context.shadowOffsetY=this._settings.shadowOffsetY*t,this._context.shadowBlur=this._settings.shadowBlur*t),this._context.fillStyle=Cr(this._settings.textColor);for(let f=0,g=c.length;f<g;f++){const w=c[f];if(r.letterSpacing===0)this._context.fillText(w.text,w.x,w.y);else{const x=w.text.split("");let y=w.x;for(let b=0,C=x.length;b<C;b++)this._context.fillText(x[b],y,w.y),y+=this.measureText(x[b],r.letterSpacing)}}d&&(this._context.shadowColor=d[0],this._context.shadowOffsetX=d[1],this._context.shadowOffsetY=d[2],this._context.shadowBlur=d[3]),(r.cutSx||r.cutSy)&&this._context.translate(r.cutSx,r.cutSy),this.renderInfo=r}wrapWord(r,e,t){const o=this._context.measureText(t).width,i=r.length,s=this._context.measureText(r).width;if(s<=e)return r;let a=Math.floor(e*i/s),l=this._context.measureText(r.substring(0,a)).width+o;if(l>e)for(;a>0&&(l=this._context.measureText(r.substring(0,a)).width+o,l>e);)a-=1;else for(;a<i;)if(l=this._context.measureText(r.substring(0,a)).width+o,l<e)a+=1;else{a-=1;break}return r.substring(0,a)+(e>=o?t:"")}wrapText(r,e,t,o=0){const i=r.split(/\r?\n/g);let s=[];const a=[];for(let l=0;l<i.length;l++){const c=[];let d="",f=e-o;const g=i[l].split(" ");for(let w=0;w<g.length;w++){const x=this.measureText(g[w],t),y=x+this.measureText(" ",t);w===0||y>f?(w>0&&(c.push(d),d=""),d+=g[w],f=e-x-(w===0?o:0)):(f-=y,d+=" ".concat(g[w]))}c.push(d),d="",s=s.concat(c),l<i.length-1&&a.push(s.length)}return{l:s,n:a}}measureText(r,e=0){return e?r.split("").reduce((t,o)=>t+this._context.measureText(o).width+e,0):this._context.measureText(r).width}mergeDefaults(r){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...r}}}const En=typeof self>"u"?globalThis:self;var go;const Nn=((go=En.document)==null?void 0:go.fonts)||En.fonts;function is(n){const{fontFamily:r,fontStyle:e,fontWeight:t,fontStretch:o,fontSize:i}=n;return[e,t,o,"".concat(i,"px"),r].join(" ")}const ss=ht(0,0,0,0);class Ln extends Po{constructor(e){super(e);u(this,"canvas");u(this,"context");u(this,"rendererBounds");typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let t=this.canvas.getContext("2d");t||(this.canvas=document.createElement("canvas"),t=this.canvas.getContext("2d")),L(t),this.context=t,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t,this.invalidateLayoutCache(e)},x:(e,t)=>{e.props.x=t,this.invalidateVisibleWindowCache(e)},y:(e,t)=>{e.props.y=t,this.invalidateVisibleWindowCache(e)},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)},lineHeight:(e,t)=>{e.props.lineHeight=t,this.invalidateLayoutCache(e)},maxLines:(e,t)=>{e.props.maxLines=t,this.invalidateLayoutCache(e)},textBaseline:(e,t)=>{e.props.textBaseline=t,this.invalidateLayoutCache(e)},verticalAlign:(e,t)=>{e.props.verticalAlign=t,this.invalidateLayoutCache(e)},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof In}addFontFace(e){L(e instanceof In),Nn.add(e.fontFace)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new et,canvasPages:void 0,lightning2TextRenderer:new os(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){var x,y;if(e.status==="initialState"&&this.setStatus(e,"loading"),!e.fontInfo){const b=is(e.props);if(e.fontInfo={cssString:b,loaded:!1},!e.fontInfo.loaded){Nn.load(b).then(this.onFontLoaded.bind(this,e,b)).catch(this.onFontLoadError.bind(this,e,b));return}}if(!e.fontInfo.loaded)return;if(!e.renderInfo){const b=e.props.maxLines,C=e.props.contain==="both"?Math.floor((e.props.height-e.props.offsetY)/e.props.lineHeight):0,v=C>0&&b>0?Math.min(C,b):Math.max(C,b);e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFace:e.props.fontFamily,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:Ee(e.props.color),offsetY:e.props.fontSize+e.props.offsetY,wordWrap:e.props.contain!=="none",wordWrapWidth:e.props.contain==="none"?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:e.props.lineHeight,maxLines:v,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0}const{x:t,y:o,width:i,height:s,scrollY:a,contain:l}=e.props,{visibleWindow:c}=e;let{renderWindow:d,canvasPages:f}=e;if(!c.valid){const b=ht(t,o,l!=="none"?t+i:1/0,l==="both"?o+s:1/0,ss);yi(this.rendererBounds,b,c),c.valid=!0}const g=c.y2-c.y1,w=Math.ceil(g/e.renderInfo.lineHeight);if(g===0){f=void 0,d=void 0,this.setStatus(e,"loaded");return}else if(d&&f){const b=t+d.x1,C=o-a+d.y1,v=t+d.x2,m=o-a+d.y2;if(b<=c.x1&&v>=c.x2&&C<=c.y1&&m>=c.y2){this.setStatus(e,"loaded");return}m<c.y2?(d.y1+=w*e.renderInfo.lineHeight,d.y2+=w*e.renderInfo.lineHeight,f.push(f.shift()),f[2].lineNumStart=f[1].lineNumStart+w,f[2].lineNumEnd=f[2].lineNumStart+w,f[2].valid=!1):C>c.y1&&(d.y1-=w*e.renderInfo.lineHeight,d.y2-=w*e.renderInfo.lineHeight,f.unshift(f.pop()),f[0].lineNumStart=f[1].lineNumStart-w,f[0].lineNumEnd=f[0].lineNumStart+w,f[0].valid=!1)}else{const b=e.renderInfo.lineHeight*w,C=Math.ceil(a/b),v=C*w,m=v-w,p=v+w;f=[{texture:f==null?void 0:f[0].texture,lineNumStart:m,lineNumEnd:m+w,valid:!1},{texture:f==null?void 0:f[1].texture,lineNumStart:v,lineNumEnd:v+w,valid:!1},{texture:f==null?void 0:f[2].texture,lineNumStart:p,lineNumEnd:p+w,valid:!1}],e.canvasPages=f;const S=C*b;d={x1:0,y1:S-b,x2:i,y2:S+b*2}}e.renderWindow=d,performance.now();for(const b of f)if(!b.valid){if(b.lineNumStart<0){(x=b.texture)==null||x.setRenderableOwner(e,!1),b.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),b.texture.setRenderableOwner(e,e.isRenderable),b.valid=!0;continue}e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(b.lineNumStart,b.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(b.lineNumStart,b.lineNumEnd)}),this.canvas.width===0||this.canvas.height===0||((y=b.texture)==null||y.setRenderableOwner(e,!1),b.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0}),b.texture.setRenderableOwner(e,e.isRenderable)),b.valid=!0}this.setStatus(e,"loaded")}renderQuads(e,t,o,i){var _,A,E,N,B,F,z,M,D,$,ie,J;const{stage:s}=this,{canvasPages:a,textW:l=0,textH:c=0,renderWindow:d}=e;if(!a||!d)return;const{x:f,y:g,scrollY:w,contain:x,width:y,height:b}=e.props,C={x:f,y:g,width:x!=="none"?y:l,height:x==="both"?b:c};tn({x:0,y:0,width:s.options.appWidth,height:s.options.appHeight},C),L(a,"canvasPages is not defined"),L(d,"renderWindow is not defined");const m=(d.y2-d.y1)/3,{zIndex:p,color:S}=e.props,I=i*vi(S),T=St(4294967295,I);a[0].valid&&this.stage.renderer.addQuad({alpha:I,clippingRect:o,colorBl:T,colorBr:T,colorTl:T,colorTr:T,width:((A=(_=a[0].texture)==null?void 0:_.dimensions)==null?void 0:A.width)||0,height:((N=(E=a[0].texture)==null?void 0:E.dimensions)==null?void 0:N.height)||0,texture:a[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:p,tx:t.tx,ty:t.ty-w+d.y1,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td}),a[1].valid&&this.stage.renderer.addQuad({alpha:I,clippingRect:o,colorBl:T,colorBr:T,colorTl:T,colorTr:T,width:((F=(B=a[1].texture)==null?void 0:B.dimensions)==null?void 0:F.width)||0,height:((M=(z=a[1].texture)==null?void 0:z.dimensions)==null?void 0:M.height)||0,texture:a[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:p,tx:t.tx,ty:t.ty-w+d.y1+m,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td}),a[2].valid&&this.stage.renderer.addQuad({alpha:I,clippingRect:o,colorBl:T,colorBr:T,colorTl:T,colorTr:T,width:(($=(D=a[2].texture)==null?void 0:D.dimensions)==null?void 0:$.width)||0,height:((J=(ie=a[2].texture)==null?void 0:ie.dimensions)==null?void 0:J.height)||0,texture:a[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:p,tx:t.tx,ty:t.ty-w+d.y1+m+m,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td})}setIsRenderable(e,t){var o;super.setIsRenderable(e,t),(o=e.canvasPages)==null||o.forEach(i=>{var s;(s=i.texture)==null||s.setRenderableOwner(e,t)})}destroyState(e){var t;(t=e.canvasPages)==null||t.forEach(o=>{var i;(i=o.texture)==null||i.setRenderableOwner(e,!1)})}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.renderInfo=void 0,e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,t){var o;t!==((o=e.fontInfo)==null?void 0:o.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,t,o){var i;t!==((i=e.fontInfo)==null?void 0:i.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,console.error("CanvasTextRenderer: Error loading font '".concat(e.fontInfo.cssString,"'"),o),this.scheduleUpdateState(e))}}class Do extends pt{constructor(r){super({renderer:r,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(r){const{glw:e}=this;e.activeTexture(0),e.bindTexture(r[0].ctxTexture)}}u(Do,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio;\n        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);\n\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);\n        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});class Oo extends pt{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});u(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:t,glw:o}=this;if(e.length>t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error("DefaultShaderBatched: Cannot bind more than ".concat(t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS," textures"));e.forEach((s,a)=>{o.activeTexture(a),o.bindTexture(s.ctxTexture)});const i=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",i)}}u(Oo,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:e=>"\n      #define txUnits ".concat(e,"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[").concat(e,"], int idx, vec2 uv) {\n        ").concat(Array.from(Array(e).keys()).map(t=>"\n          ".concat(t!==0?"else ":"","if (idx == ").concat(t,") {\n            return texture2D(textures[").concat(t,"], uv);\n          }\n        ")).join(""),"\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ")});function Wo(n,r){var e=0,t,o;r=r||{};function i(){var s=t,a=arguments.length,l,c;e:for(;s;){if(s.args.length!==arguments.length){s=s.next;continue}for(c=0;c<a;c++)if(s.args[c]!==arguments[c]){s=s.next;continue e}return s!==t&&(s===o&&(o=s.prev),s.prev.next=s.next,s.next&&(s.next.prev=s.prev),s.next=t,s.prev=null,t.prev=s,t=s),s.val}for(l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return s={args:l,val:n.apply(null,l)},t?(t.prev=s,s.next=t):o=s,e===r.maxSize?(o=o.prev,o.next=null):e++,t=s,s.val}return i.clear=function(){t=null,o=null,e=0},i}const kr=new Map,as=(n,r)=>{const e=JSON.stringify(n);if(kr.has(e))return kr.get(e);const t=(n!=null?n:[]).map(o=>({type:o.type,props:r[o.type].resolveDefaults(o.props||{})}));return kr.set(e,t),t},Le=class Le extends pt{constructor(e,t,o){const i=Le.createShader(t,o);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...i.uniforms],shaderSources:{vertex:i.vertex,fragment:i.fragment}});u(this,"effects",[]);this.effects=i.effects,this.calculateProps=Wo(this.calculateProps.bind(this))}bindTextures(e){const{glw:t}=this;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}calculateProps(e){const t=this.renderer.shManager.getRegisteredEffects(),o=[];return e==null||e.forEach((i,s)=>{var f;const a=this.effects[s],l=t[a.name],c=(f=i.props)!=null?f:{},d=a.uniformInfo;Object.keys(c).forEach(g=>{const w=l.uniforms[g],x=d[g];let y=w.validator?w.validator(c[g],c):c[g];Array.isArray(y)&&(y=new Float32Array(y)),o.push({name:x.name,value:y})})}),o}bindProps(e){this.calculateProps(e.effects).forEach(o=>{this.setUniform(o.name,o.value)})}canBatchShaderProps(e,t){if(e.$dimensions.width!==t.$dimensions.width||e.$dimensions.height!==t.$dimensions.height||e.effects.length!==t.effects.length)return!1;const o=e.effects.length;let i=0;for(;i<o;i++){const s=e.effects[i],a=t.effects[i];if(s.type!==a.type)return!1;for(const l in s.props)if(a.props&&!a.props[l]||s.props[l]!==a.props[l])return!1}return!0}static createShader(e,t){const o={},i={};let s="";const a=[],l=[],c=e.effects.map(x=>{const y=t[x.type],b=y.getEffectKey(x.props||{});o[b]=o[b]?++o[b]:1;const C=o[b];C===1&&l.push({key:b,type:x.type,props:x.props});const v=new y({ref:"".concat(b).concat(C===1?"":C),target:b,props:x.props});return s+=v.declaredUniforms,a.push(...Object.values(v.uniformInfo)),v});let d="";l==null||l.forEach(x=>{var T;const y=t[x.type],b=y.resolveDefaults((T=x.props)!=null?T:{}),C=[];for(const _ in y.methods){let A=_;const E=y.methods[_];i[_]&&i[_]!==E&&(A=Le.resolveMethodDuplicate(_,E,i)),i[A]=E.replace("function",A),C.push({m:_,cm:A})}let v=y.onShaderMask instanceof Function?y.onShaderMask(b):y.onShaderMask,m=y.onColorize instanceof Function?y.onColorize(b):y.onColorize,p=y.onEffectMask instanceof Function?y.onEffectMask(b):y.onEffectMask;C.forEach(_=>{const{m:A,cm:E}=_,N=new RegExp("\\$".concat(A),"g");v&&(v=v.replace(N,E)),m&&(m=m.replace(N,E)),p&&(p=p.replace(N,E))});const S=y.getMethodParameters(y.uniforms,b),I=S.length>0?", ".concat(S):"";v&&(d+="\n        float fx_".concat(x.key,"_onShaderMask(float shaderMask ").concat(I,") {\n          ").concat(v,"\n        }\n        ")),m&&(d+="\n          vec4 fx_".concat(x.key,"_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(I,") {\n            ").concat(m,"\n          }\n        ")),p&&(d+="\n          vec4 fx_".concat(x.key,"_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(I,") {\n            ").concat(p,"\n          }\n        "))});let f="";for(const x in i)f+=i[x];let g="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",w="\n\n    ";for(let x=0;x<c.length;x++){const y=c[x],b=y.passParameters.length>0?", ".concat(y.passParameters):"",C=t[y.name];C.onShaderMask&&(w+="\n        shaderMask = fx_".concat(y.target,"_onShaderMask(shaderMask ").concat(b,");\n        ")),C.onColorize&&(w+="\n        maskColor = fx_".concat(y.target,"_onColorize(shaderMask, maskColor, shaderColor").concat(b,");\n        ")),C.onEffectMask&&(g="fx_".concat(y.target,"_onEffectMask(shaderMask, maskColor, shaderColor").concat(b,")"));const v=c[x+1];(v===void 0||t[v.name].onEffectMask)&&(w+="\n          shaderColor = ".concat(g,";\n        "))}return{effects:c,uniforms:a,fragment:Le.fragment(s,f,d,w),vertex:Le.vertex()}}static resolveMethodDuplicate(e,t,o,i=0){const s=e+(i>0?i:"");return o[s]&&o[s]!==t?this.resolveMethodDuplicate(e,t,o,++i):s}static resolveDefaults(e,t){return{effects:as(e.effects,t),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,t){var i;let o="";return(i=e.effects)==null||i.forEach(s=>{const l=t[s.type].getEffectKey(s.props||{});o+=",".concat(l)}),"DynamicShader".concat(o)}};u(Le,"z$__type__Props"),u(Le,"vertex",()=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "),u(Le,"fragment",(e,t,o,i)=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ".concat(e,"\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ").concat(t,"\n\n    ").concat(o,"\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ").concat(i,"\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  "));let ut=Le;class Ur extends pt{constructor(r){super({renderer:r,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(r){return{radius:r.radius||10,$dimensions:{width:0,height:0}}}bindTextures(r){const{glw:e}=this;e.activeTexture(0),e.bindTexture(r[0].ctxTexture)}bindProps(r){this.setUniform("u_radius",r.radius)}canBatchShaderProps(r,e){return r.radius===e.radius&&r.$dimensions.width===e.$dimensions.width&&r.$dimensions.height===e.$dimensions.height}}u(Ur,"z$__type__Props"),u(Ur,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});const ls=new Float32Array([1,0,0,0,1,0,0,0,1]),xr=class xr extends pt{constructor(r){super({renderer:r,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(r){const{glw:e}=this;e.activeTexture(0),e.bindTexture(r[0].ctxTexture)}bindProps(r){const e=xr.resolveDefaults(r);for(const t in e)if(t==="transform")this.setUniform("u_transform",!1,e[t]);else if(t==="scrollY")this.setUniform("u_scrollY",e[t]);else if(t==="color"){const o=Ee(e.color);this.setUniform("u_color",o)}else t==="size"?this.setUniform("u_size",e[t]):t==="distanceRange"?this.setUniform("u_distanceRange",e[t]):t==="debug"&&this.setUniform("u_debug",e[t]?1:0)}static resolveDefaults(r={}){var e,t,o,i,s,a;return{transform:(e=r.transform)!=null?e:ls,scrollY:(t=r.scrollY)!=null?t:0,color:(o=r.color)!=null?o:4294967295,size:(i=r.size)!=null?i:16,distanceRange:(s=r.distanceRange)!=null?s:1,debug:(a=r.debug)!=null?a:!1}}};u(xr,"shaderSources",{vertex:"\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n\n        // Calculate screen space with pixel ratio\n        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n        gl_Position = vec4(screenSpace, 0.0, 1.0);\n        v_texcoord = a_textureCoordinate;\n\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});let Yr=xr;class ot extends oe{constructor(){super(...arguments);u(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){var t;return{radius:(t=e.radius)!=null?t:10}}}u(ot,"z$__type__Props"),u(ot,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let t=e;return Array.isArray(t)?t.length===2?t=[t[0],t[1],t[0],t[1]]:t.length===3?t=[t[0],t[1],t[2],t[0]]:t.length!==4&&(t=[t[0],t[0],t[0],t[0]]):typeof t=="number"&&(t=[t,t,t,t]),t}}}),u(ot,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),u(ot,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),u(ot,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");class Ct extends oe{constructor(){super(...arguments);u(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){var t,o;return{width:(t=e.width)!=null?t:10,color:(o=e.color)!=null?o:4294967295}}}u(Ct,"z$__type__Props"),u(Ct,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ee(e),method:"uniform4fv",type:"vec4"}}),u(Ct,"onEffectMask","\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  "),u(Ct,"onColorize","\n    return color;\n  ");const Ue=class Ue extends oe{constructor(){super(...arguments);u(this,"name","linearGradient")}static getEffectKey(e){return"linearGradient".concat(e.colors.length)}static resolveDefaults(e){var i,s;const t=(i=e.colors)!=null?i:[4278190080,4294967295];let o=e.stops||[];if(o.length===0||o.length!==t.length){const a=t.length;let l=0;const c=o;for(;l<a;l++)o[l]?(c[l]=o[l],o[l-1]===void 0&&c[l-2]!==void 0&&(c[l-1]=c[l-2]+(o[l]-c[l-2])/2)):c[l]=l*(1/(t.length-1));o=c}return{colors:t,stops:o,angle:(s=e.angle)!=null?s:0}}};u(Ue,"z$__type__Props"),u(Ue,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.map(o=>Ee(o)).reduce((o,i)=>o.concat(i),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),u(Ue,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),u(Ue,"ColorLoop",e=>{let t="";for(let o=2;o<e;o++)t+="colorOut = mix(colorOut, colors[".concat(o,"], clamp((dist - stops[").concat(o-1,"]) / (stops[").concat(o,"] - stops[").concat(o-1,"]), 0.0, 1.0));");return t}),u(Ue,"onColorize",e=>{const t=e.colors.length||1;return"\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      ".concat(Ue.ColorLoop(t),"\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});let $r=Ue;class Hr extends oe{constructor(){super(...arguments);u(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){var t;return{amount:(t=e.amount)!=null?t:1}}}u(Hr,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),u(Hr,"onColorize","\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ");class it extends oe{constructor(){super(...arguments);u(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){var t,o;return{width:(t=e.width)!=null?t:10,color:(o=e.color)!=null?o:4294967295}}}u(it,"z$__type__Props"),u(it,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ee(e),method:"uniform4fv",type:"vec4"}}),u(it,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),u(it,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),u(it,"onColorize","\n    return color;\n  ");class st extends oe{constructor(){super(...arguments);u(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){var t,o;return{width:(t=e.width)!=null?t:10,color:(o=e.color)!=null?o:4294967295}}}u(st,"z$__type__Props"),u(st,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ee(e),method:"uniform4fv",type:"vec4"}}),u(st,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),u(st,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),u(st,"onColorize","\n    return color;\n  ");class at extends oe{constructor(){super(...arguments);u(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){var t,o;return{width:(t=e.width)!=null?t:10,color:(o=e.color)!=null?o:4294967295}}}u(at,"z$__type__Props"),u(at,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ee(e),method:"uniform4fv",type:"vec4"}}),u(at,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),u(at,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),u(at,"onColorize","\n    return color;\n  ");class lt extends oe{constructor(){super(...arguments);u(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){var t,o;return{width:(t=e.width)!=null?t:10,color:(o=e.color)!=null?o:4294967295}}}u(lt,"z$__type__Props"),u(lt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ee(e),method:"uniform4fv",type:"vec4"}}),u(lt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),u(lt,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),u(lt,"onColorize","\n    return color;\n  ");class Tt extends oe{constructor(){super(...arguments);u(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){var t,o,i,s,a;return{amplitude:(t=e.amplitude)!=null?t:.2,narrowness:(o=e.narrowness)!=null?o:4,blockiness:(i=e.blockiness)!=null?i:2,minimizer:(s=e.minimizer)!=null?s:8,time:(a=e.time)!=null?a:Date.now()}}}u(Tt,"z$__type__Props"),u(Tt,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:e=>(Date.now()-e)%1e3,type:"float"}}),u(Tt,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),u(Tt,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");class er extends oe{constructor(){super(...arguments);u(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){var t;return{fade:(t=e.fade)!=null?t:10}}}u(er,"z$__type__Props"),u(er,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let t=e;return Array.isArray(t)?t.length===2?t=[t[0],t[1],t[0],t[1]]:t.length===3?t=[t[0],t[1],t[2],t[0]]:t.length!==4&&(t=[t[0],t[0],t[0],t[0]]):typeof t=="number"&&(t=[t,t,t,t]),t}}}),u(er,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");const Ge=class Ge extends oe{constructor(){super(...arguments);u(this,"name","radialGradient")}static getEffectKey(e){return"radialGradient".concat(e.colors.length)}static resolveDefaults(e){var i,s,a,l,c;const t=(i=e.colors)!=null?i:[4278190080,4294967295];let o=e.stops||[];if(o.length===0||o.length!==t.length){const d=t.length;let f=0;const g=o;for(;f<d;f++)o[f]?(g[f]=o[f],o[f-1]===void 0&&g[f-2]!==void 0&&(g[f-1]=g[f-2]+(o[f]-g[f-2])/2)):g[f]=f*(1/(t.length-1));o=g}return{colors:t,stops:o,width:(s=e.width)!=null?s:0,height:(l=(a=e.height)!=null?a:e.width)!=null?l:0,pivot:(c=e.pivot)!=null?c:[.5,.5]}}};u(Ge,"z$__type__Props"),u(Ge,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.map(o=>Ee(o)).reduce((o,i)=>o.concat(i),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),u(Ge,"ColorLoop",e=>{let t="";for(let o=2;o<e;o++)t+="colorOut = mix(colorOut, colors[".concat(o,"], clamp((dist - stops[").concat(o-1,"]) / (stops[").concat(o,"] - stops[").concat(o-1,"]), 0.0, 1.0));");return t}),u(Ge,"onColorize",e=>{const t=e.colors.length||1;return"\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      ".concat(Ge.ColorLoop(t),"\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});let Qr=Ge;class ct extends oe{constructor(){super(...arguments);u(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){var t,o,i,s,a,l,c;return{width:(t=e.width)!=null?t:10,progress:(o=e.progress)!=null?o:.5,offset:(i=e.offset)!=null?i:0,range:(s=e.range)!=null?s:Math.PI*2,rounded:(a=e.rounded)!=null?a:!1,radius:(l=e.radius)!=null?l:1,color:(c=e.color)!=null?c:4294967295}}}u(ct,"z$__type__Props"),u(ct,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ee(e),method:"uniform4fv",type:"vec4"}}),u(ct,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),u(ct,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),u(ct,"onColorize","\n    return color;\n  ");class dt extends oe{constructor(){super(...arguments);u(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(e){var t;return{x:e.x||0,y:e.y||0,width:e.width||50,height:e.height||50,radius:(t=e.radius)!=null?t:0}}}u(dt,"z$__type__Props"),u(dt,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let t=e;return Array.isArray(t)?t.length===2?t=[t[0],t[1],t[0],t[1]]:t.length===3?t=[t[0],t[1],t[2],t[0]]:t.length!==4&&(t=[t[0],t[0],t[0],t[0]]):typeof t=="number"&&(t=[t,t,t,t]),t}}}),u(dt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),u(dt,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  "),u(dt,"onEffectMask","\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  ");const Uo="RoundedRectangle";class Yo extends wi{constructor(e){super();u(this,"shType");this.shType=e,e!==Uo&&console.warn("Unsupported shader:",e)}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class cs{constructor(){u(this,"shCache",new Map);u(this,"shConstructors",{});u(this,"attachedShader",null);u(this,"effectConstructors",{});u(this,"renderer");this.registerShaderType("DefaultShader",Do),this.registerShaderType("DefaultShaderBatched",Oo),this.registerShaderType("RoundedRectangle",Ur),this.registerShaderType("DynamicShader",ut),this.registerShaderType("SdfShader",Yr),this.registerEffectType("border",Ct),this.registerEffectType("borderBottom",at),this.registerEffectType("borderLeft",lt),this.registerEffectType("borderRight",it),this.registerEffectType("borderTop",st),this.registerEffectType("fadeOut",er),this.registerEffectType("linearGradient",$r),this.registerEffectType("radialGradient",Qr),this.registerEffectType("grayscale",Hr),this.registerEffectType("glitch",Tt),this.registerEffectType("radius",ot),this.registerEffectType("radialProgress",ct),this.registerEffectType("holePunch",dt)}registerShaderType(r,e){this.shConstructors[r]=e}registerEffectType(r,e){this.effectConstructors[r]=e}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(r,e){if(!this.renderer)throw new Error("Renderer is not been defined");const t=this.shConstructors[r];if(!t)throw new Error('Shader type "'.concat(r,'" is not registered'));if(this.renderer.mode==="canvas"&&t.prototype instanceof pt)return{shader:new Yo(r),props:e};if(r==="DynamicShader")return this.loadDynamicShader(e);const o=t.resolveDefaults(e),i=t.makeCacheKey(o)||t.name;if(i&&this.shCache.has(i))return{shader:this.shCache.get(i),props:o};const s=new t(this.renderer,e);return i&&this.shCache.set(i,s),{shader:s,props:o}}loadDynamicShader(r){if(!this.renderer)throw new Error("Renderer is not been defined");const e=ut.resolveDefaults(r,this.effectConstructors),t=ut.makeCacheKey(e,this.effectConstructors);if(t&&this.shCache.has(t))return{shader:this.shCache.get(t),props:e};const o=new ut(this.renderer,r,this.effectConstructors);return t&&this.shCache.set(t,o),{shader:o,props:e}}useShader(r){this.attachedShader!==r&&(this.attachedShader&&this.attachedShader.detach(),r.attach(),this.attachedShader=r)}}function ds(n){return/\.(ktx|pvr)$/.test(n)}const hs=async n=>{const e=await(await fetch(n)).arrayBuffer();return n.indexOf(".ktx")!==-1?us(e):fs(e)},us=async n=>{const r=new DataView(n),e=r.getUint32(12)===16909060,t=[],o={glInternalFormat:r.getUint32(28,e),pixelWidth:r.getUint32(36,e),pixelHeight:r.getUint32(40,e),numberOfMipmapLevels:r.getUint32(56,e),bytesOfKeyValueData:r.getUint32(60,e)};let i=64;i+=o.bytesOfKeyValueData;for(let s=0;s<o.numberOfMipmapLevels;s++){const a=r.getUint32(i);i+=4,t.push(r.buffer.slice(i,a)),i+=a}return{data:{glInternalFormat:o.glInternalFormat,mipmaps:t,width:o.pixelWidth||0,height:o.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},fs=async n=>{const a=n,l=new Int32Array(a,0,13),c=l[12]+52,d=new Uint8Array(a,c),f=[],g={pixelWidth:l[7],pixelHeight:l[6],numberOfMipmapLevels:l[11]||0};let w=0,x=g.pixelWidth||0,y=g.pixelHeight||0;for(let b=0;b<g.numberOfMipmapLevels;b++){const C=(x+3>>2)*(y+3>>2)*8,v=new Uint8Array(a,d.byteOffset+w,C);f.push(v),w+=C,x=x>>1,y=y>>1}return{data:{glInternalFormat:36196,mipmaps:f,width:g.pixelWidth||0,height:g.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}},Bt=class Bt extends xo{constructor(e,t){super(e);u(this,"props");this.props=Bt.resolveDefaults(t)}hasAlphaChannel(e){return e.indexOf("image/png")!==-1}async getTextureData(){const{src:e,premultiplyAlpha:t}=this.props;if(!e)return{data:null};if(e instanceof ImageData)return{data:e,premultiplyAlpha:t};if(ds(e))return hs(e);if(this.txManager.imageWorkerManager)return await this.txManager.imageWorkerManager.getImage(e,t);if(this.txManager.hasCreateImageBitmap){const i=await(await fetch(e)).blob(),s=t!=null?t:this.hasAlphaChannel(i.type);return{data:await createImageBitmap(i,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:s}}else{const o=new Image;return e.substr(0,5)!=="data:"&&(o.crossOrigin="Anonymous"),o.src=e,await new Promise((i,s)=>{o.onload=()=>i(),o.onerror=()=>s(new Error("Failed to load image"))}).catch(i=>{console.error(i)}),{data:o,premultiplyAlpha:t!=null?t:!0}}}static makeCacheKey(e){const t=Bt.resolveDefaults(e);return t.src instanceof ImageData?!1:"ImageTexture,".concat(t.src,",").concat(t.premultiplyAlpha)}static resolveDefaults(e){var t,o;return{src:(t=e.src)!=null?t:"",premultiplyAlpha:(o=e.premultiplyAlpha)!=null?o:!0}}};u(Bt,"z$__type__Props");let Xr=Bt;const ps=24;function gs(n,r,e,t,o,i,s,a,l){const c=Math.min(Math.max(s.firstLineIdx,0),a.length),d=0;let f=0;t==="middle"?f=(r-n)/2:t==="bottom"&&(f=r-n);const w=o/i+c*r+f;if(!(l&&w>=l/i))return{sdfX:d,sdfY:w,lineIndex:c}}class _t{constructor(r,e=0){u(this,"iterator");u(this,"peekBuffer",[]);u(this,"_lastIndex");this.iterator=r,this.iterator=r,this._lastIndex=e-1,this.peekBuffer=[]}next(){const r=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return r.done?this._lastIndex=-1:this._lastIndex++,r}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const r=this.iterator.next();return this.peekBuffer.push(r),r}get lastIndex(){return this._lastIndex}}function*Rt(n,r=0){let e=r;for(;e<n.length;){const t=n.codePointAt(e);if(t===void 0)throw new Error("Invalid Unicode code point");yield t,e+=t<=65535?1:2}}function ms(n,r,e){const t=e.shapeText(r,new _t(Rt(n,0),0));let o=0;for(const i of t)i.mapped&&(o+=i.xAdvance);return o}function xs(n,r,e,t,o,i,s,a,l,c,d,f,g,w,x,y,b,C,v){L(x,"Font face must be loaded"),L(x.loaded,"Font face must be loaded"),L(x.data,"Font face must be loaded"),L(x.shaper,"Font face must be loaded");const m=a/x.data.info.size,p=l/m,S=i/m,I=c/m,T=g[n],_=(T==null?void 0:T.codepointIndex)||0,A=(T==null?void 0:T.maxX)||0,E=(T==null?void 0:T.maxY)||0;let N=A,B=E,F=r,z=e,M=0;const D={codepointIndex:-1,bufferOffset:-1,xStart:-1},$=x.shaper,ie={letterSpacing:I};let J=$.shapeText(ie,new _t(Rt(t,_),_)),ce,Ce=-1;const Me=[],Lt=s/m,Ft=ms(C,ie,$);let Qe=!0;for(;Qe;){const be=(v===0||n+1<v)&&(f!=="both"||b||z+p+x.maxCharHeight<=Lt),me=be?S:S-Ft;let re=0;const ze=z+p>=w.y1,Pe=z<=w.y2,xe=ze&&Pe;for(;(ce=J.next())&&!ce.done;){const K=ce.value;if(n===g.length)g.push({codepointIndex:K.cluster,maxY:B,maxX:N});else if(n>g.length)throw new Error("Unexpected lineCache length");if(K.codepoint===32||K.codepoint===10?D.codepointIndex!==-1&&(D.codepointIndex=-1,re=F):D.codepointIndex===-1&&(D.codepointIndex=K.cluster,D.bufferOffset=M,D.xStart=re),K.mapped){const Mt=F+K.xOffset+K.width;if(f!=="none"&&Mt>=me&&D.codepointIndex!==-1&&D.xStart>0)if(be){J=$.shapeText(ie,new _t(Rt(t,D.codepointIndex),D.codepointIndex)),M=D.bufferOffset;break}else J=$.shapeText(ie,new _t(Rt(C,0),0)),F=D.xStart,M=D.bufferOffset,f="none";else{const De=F+K.xOffset,Oe=z+K.yOffset;if(xe){Ce===-1&&(Ce=M);const Xe=x.getAtlasEntry(K.glyphId),Ke=Xe.x/x.data.common.scaleW,je=Xe.y/x.data.common.scaleH,xt=Xe.width/x.data.common.scaleW,yt=Xe.height/x.data.common.scaleH;d[M++]=De,d[M++]=Oe,d[M++]=Ke,d[M++]=je,d[M++]=De+K.width,d[M++]=Oe,d[M++]=Ke+xt,d[M++]=je,d[M++]=De,d[M++]=Oe+K.height,d[M++]=Ke,d[M++]=je+yt,d[M++]=De+K.width,d[M++]=Oe+K.height,d[M++]=Ke+xt,d[M++]=je+yt}B=Math.max(B,Oe+K.height),N=Math.max(N,De+K.width),F+=K.xAdvance}}else if(K.codepoint===10){if(be)break;J=$.shapeText(ie,new _t(Rt(C,0),0)),f="none"}}Ce!==-1&&(Me.push({bufferStart:Ce,bufferEnd:M}),Ce=-1),F=0,z+=p,n++,D.codepointIndex=-1,re=0,!y&&f==="both"&&z>w.y2||ce&&ce.done?Qe=!1:be||(Qe=!1)}if(o==="center"){const be=f==="none"?N:S;for(let me=0;me<Me.length;me++){const re=Me[me],ze=d[re.bufferEnd-4]-d[re.bufferStart],Pe=(be-ze)/2;for(let xe=re.bufferStart;xe<re.bufferEnd;xe+=4)d[xe]+=Pe}}else if(o==="right"){const be=f==="none"?N:S;for(let me=0;me<Me.length;me++){const re=Me[me],ze=re.bufferEnd===re.bufferStart?0:d[re.bufferEnd-4]-d[re.bufferStart],Pe=be-ze;for(let xe=re.bufferStart;xe<re.bufferEnd;xe+=4)d[xe]+=Pe}}return L(ce),{bufferNumFloats:M,bufferNumQuads:M/16,layoutNumCharacters:ce.done?t.length-_:ce.value.cluster-_+1,fullyProcessed:!!ce.done,maxX:N,maxY:B}}function ys(n,r){return Math.ceil(n/r)*r}function vs(n,r){return Math.floor(n/r)*r}function ws(n,r,e,t,o,i,s,a){const{screen:l,sdf:c}=n;if(!bi(s))l.x1=0,l.y1=0,l.x2=0,l.y2=0,c.x1=0,c.y1=0,c.x2=0,c.y2=0,n.numLines=0,n.firstLineIdx=0;else{const d=s.x1-r,f=d+(s.x2-s.x1),g=s.y1-e+t,w=vs(g-i,o||1),x=ys(g+(s.y2-s.y1)+i,o||1);l.x1=d,l.y1=w,l.x2=f,l.y2=x,c.x1=d/a,c.y1=w/a,c.x2=f/a,c.y2=x/a,n.numLines=Math.ceil((x-w)/o),n.firstLineIdx=o?Math.floor(w/o):0}n.valid=!0}const bs={normal:400,bold:700,bolder:900,lighter:100},Fn=n=>typeof n=="number"?n:bs[n]||400;function Ss(n,r,e,t,o){let i=Fn(e);for(const s of n){const a=s[r];if(!a)continue;if(a.size===1)return console.warn("TrFontManager: Only one font face found for family: '".concat(r,"' - will be used for all weights and styles")),a.values().next().value;const l=new Map;for(const d of a){const f=Fn(d.descriptors.weight);if(f===i&&d.descriptors.style===t&&d.descriptors.stretch===o)return d;l.set(f,d)}const c="TrFontManager: No exact match: '".concat(r," Weight: ").concat(i," Style: ").concat(t," Stretch: ").concat(o,"'");if(console.error(c),i===400&&l.has(500))return l.get(500);if(i===500&&l.has(400))return l.get(400);if(i<400){for(;i>0;){if(l.has(i))return l.get(i);i-=100}i=600}for(;i<1e3;){if(l.has(i))return l.get(i);i+=100}for(i=500;i>0;){if(l.has(i))return l.get(i);i-=100}}}const As=Wo(Ss);class $o{constructor(r){u(this,"textRenderers");this.textRenderers=r}addFontFace(r){for(const e in this.textRenderers){const t=this.textRenderers[e];t&&t.isFontFaceSupported(r)&&t.addFontFace(r)}}static resolveFontFace(r,e){const{fontFamily:t,fontWeight:o,fontStyle:i,fontStretch:s}=e;return As(r,t,o,i,s)}}const Cs={x:0,y:0,width:0,height:0};class Ts extends Po{constructor(e){super(e);u(this,"ssdfFontFamilies",{});u(this,"msdfFontFamilies",{});u(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);u(this,"sdfShader");u(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t},x:(e,t)=>{e.props.x=t,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&Tr(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,t)=>{e.props.y=t,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&Tr(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollable:(e,t)=>{e.props.scrollable=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t,this.scheduleUpdateState(e)},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)},lineHeight:(e,t)=>{e.props.lineHeight=t,this.invalidateLayoutCache(e)},maxLines:(e,t)=>{e.props.maxLines=t,this.invalidateLayoutCache(e)},textBaseline:(e,t)=>{e.props.textBaseline=t,this.invalidateLayoutCache(e)},verticalAlign:(e,t)=>{e.props.verticalAlign=t,this.invalidateLayoutCache(e)},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t,this.invalidateLayoutCache(e)},debug:(e,t)=>{e.props.debug=t}}}canRenderFont(e){const{fontFamily:t}=e;return t in this.ssdfFontFamilies||t in this.msdfFontFamilies||t==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(e){return e instanceof Cn}addFontFace(e){L(e instanceof Cn);const t=e.fontFamily,o=e.type==="ssdf"?this.ssdfFontFamilies:e.type==="msdf"?this.msdfFontFamilies:void 0;if(!o){console.warn("Invalid font face type: ".concat(e.type));return}let i=o[t];i||(i=new Set,o[t]=i),i.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new et,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:t}=e;const{textH:o,lineCache:i,debugData:s,forceFullLayoutCalc:a}=e;if(s.updateCount++,e.status==="initialState"&&this.setStatus(e,"loading"),!t){if(t=this.resolveFontFace(e.props),e.trFontFace=t,!t){const $="SdfTextRenderer: Could not resolve font face for family: '".concat(e.props.fontFamily,"'");console.error($),this.setStatus(e,"failed",new Error($));return}t.texture.setRenderableOwner(e,e.isRenderable)}if(!t.loaded){t.once("loaded",()=>{this.scheduleUpdateState(e)});return}L(t.data,"Font face data should be loaded");const{text:l,fontSize:c,x:d,y:f,contain:g,width:w,height:x,lineHeight:y,verticalAlign:b,scrollable:C,overflowSuffix:v,maxLines:m}=e.props,p=g==="both"&&C?e.props.scrollY:0,{renderWindow:S}=e,I=t.data.info.size,T=c/I,_=y/T;e.distanceRange=T*t.data.distanceField.distanceRange;const A=l.length*ps;let E=e.vertexBuffer;(!E||E.length<A)&&(E=new Float32Array(A*2));const N=e.elementBounds;if(N.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),N.valid=!0),!a&&S.valid){const $=S.screen;if(d+$.x1<=N.x1&&d+$.x2>=N.x2&&f-p+$.y1<=N.y1&&f-p+$.y2>=N.y2){this.setStatus(e,"loaded");return}S.valid=!1,this.setStatus(e,"loading")}const{offsetY:B,textAlign:F}=e.props;if(!S.valid){if(!Tr(N,this.rendererBounds))return;ws(S,d,f,p,y,g==="both"?N.y2-N.y1:0,N,T)}const z=gs(I,_,y,b,B,T,S,i,o);if(!z){this.setStatus(e,"loaded");return}const{letterSpacing:M}=e.props,D=xs(z.lineIndex,z.sdfX,z.sdfY,l,F,w,x,c,y,M,E,g,i,S.sdf,t,a,C,v,m);e.bufferUploaded=!1,e.bufferNumFloats=D.bufferNumFloats,e.bufferNumQuads=D.bufferNumQuads,e.vertexBuffer=E,e.renderWindow=S,s.lastLayoutNumCharacters=D.layoutNumCharacters,s.bufferSize=E.byteLength,D.fullyProcessed&&(e.textW=D.maxX*T,e.textH=D.maxY*T),this.setStatus(e,"loaded")}renderQuads(e,t,o,i,s,a){var N,B,F;if(!e.vertexBuffer)return;const l=this.stage.renderer;L(l instanceof yo);const{fontSize:c,color:d,contain:f,scrollable:g,zIndex:w,debug:x}=e.props,y=f==="both"&&g?e.props.scrollY:0,{textW:b=0,textH:C=0,distanceRange:v,vertexBuffer:m,bufferUploaded:p,trFontFace:S,elementBounds:I}=e;let{webGlBuffers:T}=e;if(!T){const z=l.glw,M=4*Float32Array.BYTES_PER_ELEMENT,D=z.createBuffer();L(D),e.webGlBuffers=new Si([{buffer:D,attributes:{a_position:{name:"a_position",size:2,type:z.FLOAT,normalized:!1,stride:M,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:z.FLOAT,normalized:!1,stride:M,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,L(e.webGlBuffers),T=e.webGlBuffers}if(!p){const z=l.glw,M=(N=T==null?void 0:T.getBuffer("a_textureCoordinate"))!=null?N:null;z.arrayBufferData(M,m,z.STATIC_DRAW),e.bufferUploaded=!0}if(L(S),g&&f==="both"){L(I.valid);const z=Ai(I,Cs);o.valid?(e.clippingRect.valid=!0,o=tn(o,z,e.clippingRect)):(e.clippingRect.valid=!0,o=vo(z,e.clippingRect))}const _=new Ci(l.glw,l.options,T,this.sdfShader,{transform:t.data,color:Ti(d,i),size:c/(((B=S.data)==null?void 0:B.info.size)||0),scrollY:y,distanceRange:v,debug:x.sdfShaderDebug},i,o,{height:C,width:b},0,w,!1,s,a),A=(F=e.trFontFace)==null?void 0:F.texture;L(A);const E=this.stage.txManager.getCtxTexture(A);_.addTexture(E),_.length=e.bufferNumFloats,_.numQuads=e.bufferNumQuads,l.addRenderOp(_)}setIsRenderable(e,t){var o;super.setIsRenderable(e,t),(o=e.trFontFace)==null||o.texture.setRenderableOwner(e,t)}destroyState(e){var t;super.destroyState(e),(t=e.trFontFace)==null||t.texture.setRenderableOwner(e,!1)}resolveFontFace(e){return $o.resolveFontFace(this.fontFamilyArray,e)}releaseFontFace(e){e.trFontFace&&(e.trFontFace.texture.setRenderableOwner(e,!1),e.trFontFace=void 0)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){const{x:t,contain:o,width:i}=e.props,{elementBounds:s}=e;s.x1=t,s.x2=o!=="none"?t+i:1/0}setElementBoundsY(e){const{y:t,contain:o,height:i}=e.props,{elementBounds:s}=e;s.y1=t,s.y2=o==="both"?t+i:1/0}}function _s(n){return n.prototype instanceof _i}async function Rs(n,r){let e;try{console.log("Loading core extension",n),e=await he(()=>import(n),[])}catch(o){console.error("The core extension module at '".concat(n,"' could not be loaded.")),console.error(o);return}if(!e.default){console.error("The core extension module at '".concat(n,"' does not have a default export."));return}const t=e.default;if(_s(t)){const o=new t;try{await o.run(r)}catch(i){console.error("The core extension at '".concat(n,"' threw an error.")),console.error(i)}}else console.error("The core extension at '".concat(n,"' does not extend CoreExtension."))}function Ho(n){const r={boolean:!0,string:!0,number:!0,undefined:!0},e=Object.keys(n);for(let t=0;t<e.length;t++){const o=e[t];if(!o)continue;const i=n[o],s=typeof i;s==="string"&&i.length>2048&&(console.warn("Custom Data value for ".concat(o," is too long, it will be truncated to 2048 characters")),n[o]=i.substring(0,2048)),r[s]||(console.warn("Custom Data value for ".concat(o," is not a boolean, string, or number, it will be ignored")),delete n[o])}return n}class Is extends et{constructor(e,t,o){var C,v,m,p,S;super();u(this,"root",null);u(this,"driver");u(this,"canvas");u(this,"settings");u(this,"inspector",null);u(this,"nodes",new Map);u(this,"nextTextureId",1);u(this,"textureTracker");const i={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,txMemByteThreshold:e.txMemByteThreshold||124e6,boundsMargin:e.boundsMargin||0,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:(C=e.clearColor)!=null?C:0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:(v=e.experimental_FinalizationRegistryTextureUsageTracker)!=null?v:!1,textureCleanupOptions:e.textureCleanupOptions||{},fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:e.numImageWorkers!==void 0?e.numImageWorkers:2,enableContextSpy:(m=e.enableContextSpy)!=null?m:!1,enableInspector:(p=e.enableInspector)!=null?p:!1,renderMode:(S=e.renderMode)!=null?S:"webgl"};this.settings=i;const{appWidth:s,appHeight:a,deviceLogicalPixelRatio:l,devicePhysicalPixelRatio:c,enableInspector:d}=i,f=I=>{this.driver.releaseTexture(I)},g=i.experimental_FinalizationRegistryTextureUsageTracker&&typeof FinalizationRegistry=="function";this.textureTracker=g?new es(f):new Ji(f,this.settings.textureCleanupOptions);const w=s*l,x=a*l;this.driver=o;const y=document.createElement("canvas");this.canvas=y,y.width=w*c,y.height=x*c,y.style.width="".concat(w,"px"),y.style.height="".concat(x,"px");let b;if(typeof t=="string"?b=document.getElementById(t):b=t,!b)throw new Error("Could not find target element");o.onCreateNode=I=>{this.nodes.set(I.id,I)},o.onBeforeDestroyNode=I=>{this.nodes.delete(I.id)},o.onFpsUpdate=I=>{this.emit("fpsUpdate",I)},o.onFrameTick=I=>{this.emit("frameTick",I)},o.onIdle=()=>{this.emit("idle")},b.appendChild(y),d&&!mo()&&(this.inspector=new rs(y,i))}async init(){await this.driver.init(this,this.settings,this.canvas),this.root=this.driver.getRootNode()}createNode(e){return this.inspector?this.inspector.createNode(this.driver,this.resolveNodeDefaults(e)):this.driver.createNode(this.resolveNodeDefaults(e))}createTextNode(e){var i,s,a,l,c,d,f,g,w,x,y,b,C,v,m,p,S,I,T;const t=(i=e.fontSize)!=null?i:16,o={...this.resolveNodeDefaults(e),text:(s=e.text)!=null?s:"",textRendererOverride:(a=e.textRendererOverride)!=null?a:null,fontSize:t,fontFamily:(l=e.fontFamily)!=null?l:"sans-serif",fontStyle:(c=e.fontStyle)!=null?c:"normal",fontWeight:(d=e.fontWeight)!=null?d:"normal",fontStretch:(f=e.fontStretch)!=null?f:"normal",textAlign:(g=e.textAlign)!=null?g:"left",contain:(w=e.contain)!=null?w:"none",scrollable:(x=e.scrollable)!=null?x:!1,scrollY:(y=e.scrollY)!=null?y:0,offsetY:(b=e.offsetY)!=null?b:0,letterSpacing:(C=e.letterSpacing)!=null?C:0,lineHeight:(v=e.lineHeight)!=null?v:t,maxLines:(m=e.maxLines)!=null?m:0,textBaseline:(p=e.textBaseline)!=null?p:"alphabetic",verticalAlign:(S=e.verticalAlign)!=null?S:"top",overflowSuffix:(I=e.overflowSuffix)!=null?I:"...",debug:(T=e.debug)!=null?T:{}};return this.inspector?this.inspector.createTextNode(this.driver,o):this.driver.createTextNode(o)}resolveNodeDefaults(e){var c,d,f,g,w,x,y,b,C,v,m,p,S,I,T,_,A,E,N,B,F,z,M,D,$,ie,J,ce,Ce,Me,Lt,Ft,Qe,be,me,re,ze,Pe,xe,K,Mt,De,Oe,Xe,Ke,je,xt,yt;const t=(c=e.color)!=null?c:4294967295,o=(g=(f=(d=e.colorTl)!=null?d:e.colorTop)!=null?f:e.colorLeft)!=null?g:t,i=(y=(x=(w=e.colorTr)!=null?w:e.colorTop)!=null?x:e.colorRight)!=null?y:t,s=(v=(C=(b=e.colorBl)!=null?b:e.colorBottom)!=null?C:e.colorLeft)!=null?v:t,a=(S=(p=(m=e.colorBr)!=null?m:e.colorBottom)!=null?p:e.colorRight)!=null?S:t,l=Ho((I=e.data)!=null?I:{});return{x:(T=e.x)!=null?T:0,y:(_=e.y)!=null?_:0,width:(A=e.width)!=null?A:0,height:(E=e.height)!=null?E:0,alpha:(N=e.alpha)!=null?N:1,autosize:(B=e.autosize)!=null?B:!1,clipping:(F=e.clipping)!=null?F:!1,color:t,colorTop:(z=e.colorTop)!=null?z:t,colorBottom:(M=e.colorBottom)!=null?M:t,colorLeft:(D=e.colorLeft)!=null?D:t,colorRight:($=e.colorRight)!=null?$:t,colorBl:s,colorBr:a,colorTl:o,colorTr:i,zIndex:(ie=e.zIndex)!=null?ie:0,zIndexLocked:(J=e.zIndexLocked)!=null?J:0,parent:(ce=e.parent)!=null?ce:null,texture:(Ce=e.texture)!=null?Ce:null,shader:(Me=e.shader)!=null?Me:null,src:(Lt=e.src)!=null?Lt:"",scale:(Ft=e.scale)!=null?Ft:null,scaleX:(be=(Qe=e.scaleX)!=null?Qe:e.scale)!=null?be:1,scaleY:(re=(me=e.scaleY)!=null?me:e.scale)!=null?re:1,mount:(ze=e.mount)!=null?ze:0,mountX:(xe=(Pe=e.mountX)!=null?Pe:e.mount)!=null?xe:0,mountY:(Mt=(K=e.mountY)!=null?K:e.mount)!=null?Mt:0,pivot:(De=e.pivot)!=null?De:.5,pivotX:(Xe=(Oe=e.pivotX)!=null?Oe:e.pivot)!=null?Xe:.5,pivotY:(je=(Ke=e.pivotY)!=null?Ke:e.pivot)!=null?je:.5,rotation:(xt=e.rotation)!=null?xt:0,rtt:(yt=e.rtt)!=null?yt:!1,data:l}}destroyNode(e){return this.inspector&&this.inspector.destroyNode(e),this.driver.destroyNode(e)}createTexture(e,t,o){const i=this.nextTextureId++,s={descType:"texture",txType:e,props:t,options:{...o,id:i}};return this.textureTracker.registerTexture(s),s}createShader(e,t){return{descType:"shader",shType:e,props:t}}getNodeById(e){return this.nodes.get(e)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}class ks extends et{constructor(e,t,o){super();u(this,"node");u(this,"props");u(this,"settings");u(this,"propStartValues",{});u(this,"restoreValues",{});u(this,"progress",0);u(this,"delayFor",0);u(this,"timingFunction");u(this,"propsList");this.node=e,this.props=t,this.settings=o,this.propStartValues={},this.propsList=Object.keys(t),this.propsList.forEach(i=>{this.propStartValues[i]=e[i]}),this.timingFunction=i=>i,o.easing&&typeof o.easing=="string"&&(this.timingFunction=Ri(o.easing)),this.delayFor=o.delay||0}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach(e=>{this.node[e]=this.propStartValues[e]})}reverse(){this.progress=0,Object.keys(this.props).forEach(e=>{const t=this.props[e],o=this.propStartValues[e];this.props[e]=o,this.propStartValues[e]=t}),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,t,o){return(this.timingFunction(e)||e)*(o-t)+t}update(e){const{duration:t,loop:o,easing:i,stopMethod:s}=this.settings;if(!t){this.emit("finished",{});return}if(this.delayFor>0){this.delayFor-=e;return}if(this.delayFor<=0&&this.progress===0&&this.emit("start",{}),this.progress+=e/t,this.progress>1&&(this.progress=o?0:1,s)){this.emit("finished",{});return}for(let a=0;a<this.propsList.length;a++){const l=this.propsList[a],c=this.props[l],d=this.propStartValues[l],f=c;if(l.indexOf("color")!==-1){if(d===f){this.node[l]=d;continue}if(i){const g=this.timingFunction(this.progress)||this.progress,w=Tn(d,f,g);this.node[l]=w;continue}this.node[l]=Tn(d,f,this.progress);continue}if(i){this.node[l]=this.applyEasing(this.progress,d,f);continue}this.node[l]=d+(f-d)*this.progress}this.progress===1&&this.emit("finished",{})}}class Bs{constructor(r,e){u(this,"manager");u(this,"animation");u(this,"startedPromise",null);u(this,"startedResolve",null);u(this,"stoppedPromise",null);u(this,"stoppedResolve",null);u(this,"state");this.manager=r,this.animation=e,this.state="stopped"}start(){return this.makeStartedPromise(),this.animation.once("start",this.started.bind(this)),this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}stop(){return this.manager.unregisterAnimation(this.animation),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}pause(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStarted(){this.makeStartedPromise();const r=this.startedPromise;return L(r),r}waitUntilStopped(){this.makeStoppedPromise();const r=this.stoppedPromise;return L(r),r}makeStartedPromise(){this.startedResolve===null&&(this.startedPromise=new Promise(r=>{this.startedResolve=r}))}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(r=>{this.stoppedResolve=r}))}started(){L(this.startedResolve),this.startedResolve(this),this.startedResolve=null}finished(){L(this.stoppedResolve);const{loop:r,stopMethod:e}=this.animation.settings;if(e==="reverse"){this.animation.reverse(),this.start();return}this.stoppedResolve(),this.stoppedResolve=null,!r&&this.manager.unregisterAnimation(this.animation)}}const G=0,q=3,le=6,j=1,Z=4,de=7,ye=2,ve=5,we=8;class ue{constructor(r){u(this,"data");r?(this.data=new Float32Array(9),this.data[G]=r[0],this.data[q]=r[3],this.data[le]=r[6],this.data[j]=r[1],this.data[Z]=r[4],this.data[de]=r[7],this.data[ye]=r[2],this.data[ve]=r[5],this.data[we]=r[8]):this.data=new Float32Array(9)}static get temp(){return Es}static multiply(r,e,t){const o=r.data[G]*e.data[G]+r.data[q]*e.data[j]+r.data[le]*e.data[ye],i=r.data[G]*e.data[q]+r.data[q]*e.data[Z]+r.data[le]*e.data[ve],s=r.data[G]*e.data[le]+r.data[q]*e.data[de]+r.data[le]*e.data[we],a=r.data[j]*e.data[G]+r.data[Z]*e.data[j]+r.data[de]*e.data[ye],l=r.data[j]*e.data[q]+r.data[Z]*e.data[Z]+r.data[de]*e.data[ve],c=r.data[j]*e.data[le]+r.data[Z]*e.data[de]+r.data[de]*e.data[we],d=r.data[ye]*e.data[G]+r.data[ve]*e.data[j]+r.data[we]*e.data[ye],f=r.data[ye]*e.data[q]+r.data[ve]*e.data[Z]+r.data[we]*e.data[ve],g=r.data[ye]*e.data[le]+r.data[ve]*e.data[de]+r.data[we]*e.data[we];return t||(t=new ue),t.data[G]=o,t.data[q]=i,t.data[le]=s,t.data[j]=a,t.data[Z]=l,t.data[de]=c,t.data[ye]=d,t.data[ve]=f,t.data[we]=g,t}static identity(r){return r||(r=new ue),r.data[G]=1,r.data[q]=0,r.data[le]=0,r.data[j]=0,r.data[Z]=1,r.data[de]=0,r.data[ye]=0,r.data[ve]=0,r.data[we]=1,r}static translate(r,e,t){return t||(t=new ue),t.data[G]=1,t.data[q]=0,t.data[le]=r,t.data[j]=0,t.data[Z]=1,t.data[de]=e,t.data[ye]=0,t.data[ve]=0,t.data[we]=1,t}static scale(r,e,t){return t||(t=new ue),t.data[G]=r,t.data[q]=0,t.data[le]=0,t.data[j]=0,t.data[Z]=e,t.data[de]=0,t.data[ye]=0,t.data[ve]=0,t.data[we]=1,t}static rotate(r,e){const t=Math.cos(r),o=Math.sin(r);return e||(e=new ue),e.data[G]=t,e.data[q]=-o,e.data[le]=0,e.data[j]=o,e.data[Z]=t,e.data[de]=0,e.data[ye]=0,e.data[ve]=0,e.data[we]=1,e}static copy(r,e,t){return e||(e=new ue),e.data[0]=r.data[0],e.data[1]=r.data[1],e.data[2]=r.data[2],e.data[3]=r.data[3],e.data[4]=r.data[4],e.data[5]=r.data[5],e.data[6]=r.data[6],e.data[7]=r.data[7],e.data[8]=r.data[8],e}translate(r,e){return this.data[le]=this.data[G]*r+this.data[q]*e+this.data[le],this.data[de]=this.data[j]*r+this.data[Z]*e+this.data[de],this}scale(r,e){return this.data[G]=this.data[G]*r,this.data[q]=this.data[q]*e,this.data[j]=this.data[j]*r,this.data[Z]=this.data[Z]*e,this}rotate(r){if(r===0||!(r%Math.PI*2))return this;const e=Math.cos(r),t=Math.sin(r),o=this.data[G]*e+this.data[q]*t,i=this.data[q]*e-this.data[G]*t,s=this.data[j]*e+this.data[Z]*t,a=this.data[Z]*e-this.data[j]*t;return this.data[G]=o,this.data[q]=i,this.data[j]=s,this.data[Z]=a,this}multiply(r){return ue.multiply(this,r,this)}get tx(){return this.data[le]}get ty(){return this.data[de]}get ta(){return this.data[G]}get tb(){return this.data[q]}get tc(){return this.data[j]}get td(){return this.data[Z]}transformPoint(r,e){return[this.data[G]*r+this.data[q]*e+this.data[le],this.data[j]*r+this.data[Z]*e+this.data[j]]}}const Es=new ue,Pt=0,Dt=2,Ot=4,Wt=6,Ut=1,Yt=3,$t=5,Ht=7;class cr{constructor(r){u(this,"data");this.data=new Float32Array(8),r&&(this.data[Pt]=r[Pt],this.data[Dt]=r[Dt],this.data[Ot]=r[Ot],this.data[Wt]=r[Wt],this.data[Ut]=r[Ut],this.data[Yt]=r[Yt],this.data[$t]=r[$t],this.data[Ht]=r[Ht])}static translate(r,e,t,o,i,s,a,l,c){return c||(c=new cr),c.data[Pt]=r,c.data[Dt]=t,c.data[Ot]=i,c.data[Wt]=a,c.data[Ut]=e,c.data[Yt]=o,c.data[$t]=s,c.data[Ht]=l,c}get x1(){return this.data[Pt]}get x2(){return this.data[Dt]}get x3(){return this.data[Ot]}get x4(){return this.data[Wt]}get y1(){return this.data[Ut]}get y2(){return this.data[Yt]}get y3(){return this.data[$t]}get y4(){return this.data[Ht]}}var V;(function(n){n[n.Init=0]="Init",n[n.OutOfBounds=2]="OutOfBounds",n[n.InBounds=4]="InBounds",n[n.InViewport=8]="InViewport"})(V||(V={}));const Ze=new Map;Ze.set(V.Init,"init");Ze.set(V.OutOfBounds,"outOfBounds");Ze.set(V.InBounds,"inBounds");Ze.set(V.InViewport,"inViewport");var k;(function(n){n[n.Children=1]="Children",n[n.ScaleRotate=2]="ScaleRotate",n[n.Local=4]="Local",n[n.Global=8]="Global",n[n.Clipping=16]="Clipping",n[n.CalculatedZIndex=32]="CalculatedZIndex",n[n.ZIndexSortedChildren=64]="ZIndexSortedChildren",n[n.PremultipliedColors=128]="PremultipliedColors",n[n.WorldAlpha=256]="WorldAlpha",n[n.RenderState=512]="RenderState",n[n.IsRenderable=1024]="IsRenderable",n[n.RenderTexture=2048]="RenderTexture",n[n.ParentRenderTexture=4096]="ParentRenderTexture",n[n.None=0]="None",n[n.All=8191]="All"})(k||(k={}));class ln extends et{constructor(e,t){super();u(this,"stage");u(this,"children",[]);u(this,"props");u(this,"updateType",k.All);u(this,"globalTransform");u(this,"scaleRotateTransform");u(this,"localTransform");u(this,"renderCoords");u(this,"renderBound");u(this,"strictBound");u(this,"preloadBound");u(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});u(this,"isRenderable",!1);u(this,"renderState",V.Init);u(this,"worldAlpha",1);u(this,"premultipliedColorTl",0);u(this,"premultipliedColorTr",0);u(this,"premultipliedColorBl",0);u(this,"premultipliedColorBr",0);u(this,"calcZIndex",0);u(this,"hasRTTupdates",!1);u(this,"parentHasRenderTexture",!1);u(this,"onTextureLoaded",(e,t)=>{this.autosizeNode(t),this.stage.requestRender(),this.parentHasRenderTexture&&this.setRTTUpdates(1),this.emit("loaded",{type:"texture",dimensions:t})});u(this,"onTextureFailed",(e,t)=>{this.emit("failed",{type:"texture",error:t})});u(this,"onTextureFreed",e=>{this.emit("freed",{type:"texture"})});this.stage=e,this.props={...t,parent:null},this.parent=t.parent,this.rtt=t.rtt,this.updateScaleRotateTransform()}loadTexture(e,t,o=null){this.props.texture&&this.unloadTexture();const{txManager:i}=this.stage,s=i.loadTexture(e,t,o);this.props.texture=s,this.props.textureOptions=o,this.setUpdateType(k.IsRenderable),queueMicrotask(()=>{s.state==="loaded"?this.onTextureLoaded(s,s.dimensions):s.state==="failed"?this.onTextureFailed(s,s.error):s.state==="freed"&&this.onTextureFreed(s),s.on("loaded",this.onTextureLoaded),s.on("failed",this.onTextureFailed),s.on("freed",this.onTextureFreed)})}unloadTexture(){if(this.props.texture){const{texture:e}=this.props;e.off("loaded",this.onTextureLoaded),e.off("failed",this.onTextureFailed),e.off("freed",this.onTextureFreed),e.setRenderableOwner(this,!1)}this.props.texture=null,this.props.textureOptions=null,this.setUpdateType(k.IsRenderable)}autosizeNode(e){this.autosize&&(this.width=e.width,this.height=e.height)}loadShader(e,t){const o=this.stage.renderer.getShaderManager();L(o);const{shader:i,props:s}=o.loadShader(e,t);this.props.shader=i,this.props.shaderProps=s,this.setUpdateType(k.IsRenderable)}setUpdateType(e){this.updateType|=e;const t=this.props.parent;t&&!(t.updateType&k.Children)&&t.setUpdateType(k.Children),this.parentHasRenderTexture&&this.setRTTUpdates(e)}sortChildren(){this.children.sort((e,t)=>e.calcZIndex-t.calcZIndex)}updateScaleRotateTransform(){this.scaleRotateTransform=ue.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}updateLocalTransform(){L(this.scaleRotateTransform);const e=this.props.pivotX*this.props.width,t=this.props.pivotY*this.props.height,o=this.props.mountX*this.props.width,i=this.props.mountY*this.props.height;this.localTransform=ue.translate(e-o+this.props.x,t-i+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-t),this.setUpdateType(k.Global)}update(e,t){var s;this.updateType&k.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(k.Local)),this.updateType&k.Local&&(this.updateLocalTransform(),this.setUpdateType(k.Global));const o=this.props.parent;let i=k.None;if(this.updateType&k.ParentRenderTexture){let a=this.parent;for(;a;)a.rtt&&(this.parentHasRenderTexture=!0),a=a.parent}this.updateType^k.All&&this.updateType&k.RenderTexture&&this.children.forEach(a=>{a.setUpdateType(k.All)}),this.updateType&k.Global&&(L(this.localTransform),this.globalTransform=ue.copy((o==null?void 0:o.globalTransform)||this.localTransform,this.globalTransform),this.parentHasRenderTexture&&((s=this.props.parent)!=null&&s.rtt)&&(this.globalTransform=ue.identity()),o&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(k.Clipping|k.RenderState|k.Children),i|=k.Global),this.updateType&k.Clipping&&(this.calculateClippingRect(t),this.setUpdateType(k.Children),i|=k.Clipping),this.updateType&k.WorldAlpha&&(o?this.worldAlpha=o.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(k.Children|k.PremultipliedColors|k.IsRenderable),i|=k.WorldAlpha),this.updateType&k.PremultipliedColors&&(this.premultipliedColorTl=St(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=St(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=St(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=St(this.props.colorBr,this.worldAlpha,!0))),this.updateType&k.RenderState&&(this.updateRenderState(t),this.setUpdateType(k.IsRenderable)),this.updateType&k.IsRenderable&&this.updateIsRenderable(),o&&this.updateType&k.CalculatedZIndex&&(this.calculateZIndex(),o.setUpdateType(k.ZIndexSortedChildren)),this.updateType&k.Children&&this.children.length&&!this.rtt&&this.children.forEach(a=>{a.setUpdateType(i),a.updateType!==0&&a.update(e,this.clippingRect)}),this.updateType&k.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkRenderProps(){return this.props.texture?!0:!this.props.width||!this.props.height?!1:!!(this.props.shader||this.props.clipping||this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0)}checkRenderBounds(e){L(this.renderBound);const t=e.width||this.stage.root.width,o=e.height||this.stage.root.height;this.strictBound=ht(e.x,e.y,e.x+t,e.y+o,this.strictBound);const i=this.stage.boundsMargin;return this.preloadBound=ht(e.x-i[3],e.y-i[0],e.x+t+i[1],e.y+o+i[2],this.preloadBound),_n(this.renderBound,this.strictBound)?V.InViewport:_n(this.renderBound,this.preloadBound)?V.InBounds:V.OutOfBounds}updateRenderState(e){const t=this.checkRenderBounds(e);if(t!==this.renderState){let o=this.renderState;this.renderState=t,o===V.InViewport&&this.emit("outOfViewport",{previous:o,current:t}),o<V.InBounds&&t===V.InViewport?(this.emit(Ze.get(V.InBounds),{previous:o,current:t}),o=V.InBounds):o>V.InBounds&&t===V.OutOfBounds&&(this.emit(Ze.get(V.InBounds),{previous:o,current:t}),o=V.InBounds);const i=Ze.get(t);L(i),this.emit(i,{previous:o,current:t})}}setRenderState(e){e!==this.renderState&&(this.renderState=e,this.emit(V[e]))}updateIsRenderable(){let e;this.worldAlpha===0||!this.checkRenderProps()?e=!1:e=this.renderState>V.OutOfBounds,this.isRenderable!==e&&(this.isRenderable=e,this.onChangeIsRenderable(e))}onChangeIsRenderable(e){var t;(t=this.props.texture)==null||t.setRenderableOwner(this,e)}calculateRenderCoords(){const{width:e,height:t,globalTransform:o}=this;L(o);const{tx:i,ty:s,ta:a,tb:l,tc:c,td:d}=o;if(l===0&&c===0){const f=i,g=i+e*a,w=s,x=s+t*d;this.renderCoords=cr.translate(f,w,g,w,g,x,f,x,this.renderCoords)}else this.renderCoords=cr.translate(i,s,i+e*a,s+e*c,i+e*a+t*l,s+e*c+t*d,i+t*l,s+t*d,this.renderCoords)}updateBoundingRect(){const{renderCoords:e,globalTransform:t}=this;L(t),L(e);const{tb:o,tc:i}=t,{x1:s,y1:a,x3:l,y3:c}=e;if(o===0||i===0)this.renderBound=ht(s,a,l,c,this.renderBound);else{const{x2:d,x4:f,y2:g,y4:w}=e;this.renderBound=ht(Math.min(s,d,l,f),Math.min(a,g,c,w),Math.max(s,d,l,f),Math.max(a,g,c,w),this.renderBound)}}calculateClippingRect(e){L(this.globalTransform);const{clippingRect:t,props:o,globalTransform:i}=this,{clipping:s}=o,a=i.tb!==0||i.tc!==0;s&&!a?(t.x=i.tx,t.y=i.ty,t.width=this.width*i.ta,t.height=this.height*i.td,t.valid=!0):t.valid=!1,e.valid&&t.valid?tn(e,t,t):e.valid&&(vo(e,t),t.valid=!0)}calculateZIndex(){var s,a;const e=this.props,t=e.zIndex||0,o=((s=e.parent)==null?void 0:s.zIndex)||0;let i=t;(a=e.parent)!=null&&a.zIndexLocked&&(i=t<o?t:o),this.calcZIndex=i}destroy(){this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,delete this.renderCoords,delete this.renderBound,delete this.strictBound,delete this.preloadBound,delete this.globalTransform,delete this.scaleRotateTransform,delete this.localTransform,this.props.texture=null,this.props.shader=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners(),this.parent=null}renderQuads(e){const{width:t,height:o,texture:i,textureOptions:s,shader:a,shaderProps:l,rtt:c}=this.props;if(this.parentHasRenderTexture&&(!e.renderToTextureActive||this.parentRenderTexture!==e.activeRttNode))return;const{premultipliedColorTl:d,premultipliedColorTr:f,premultipliedColorBl:g,premultipliedColorBr:w}=this,{zIndex:x,worldAlpha:y,globalTransform:b,clippingRect:C}=this;L(b),e.addQuad({width:t,height:o,colorTl:d,colorTr:f,colorBl:g,colorBr:w,texture:i,textureOptions:s,zIndex:x,shader:a,shaderProps:l,alpha:y,clippingRect:C,tx:b.tx,ty:b.ty,ta:b.ta,tb:b.tb,tc:b.tc,td:b.td,rtt:c,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions})}get id(){return this.props.id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(k.Local))}get absX(){var e,t,o;return this.props.x+(((e=this.props.parent)==null?void 0:e.absX)||((o=(t=this.props.parent)==null?void 0:t.globalTransform)==null?void 0:o.tx)||0)}get absY(){var e,t;return this.props.y+((t=(e=this.props.parent)==null?void 0:e.absY)!=null?t:0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(k.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(k.Local),this.props.rtt&&this.setUpdateType(k.RenderTexture))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(k.Local),this.props.rtt&&this.setUpdateType(k.RenderTexture))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(k.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(k.ScaleRotate))}get mount(){return this.props.mount}set mount(e){(this.props.mountX!==e||this.props.mountY!==e)&&(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(k.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(k.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(k.Local))}get pivot(){return this.props.pivot}set pivot(e){(this.props.pivotX!==e||this.props.pivotY!==e)&&(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(k.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(k.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(k.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(k.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(k.PremultipliedColors|k.WorldAlpha)}get autosize(){return this.props.autosize}set autosize(e){this.props.autosize=e}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(k.Clipping)}get color(){return this.props.color}set color(e){(this.props.colorTl!==e||this.props.colorTr!==e||this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e,this.setUpdateType(k.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){(this.props.colorTl!==e||this.props.colorTr!==e)&&(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(k.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){(this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(k.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){(this.props.colorTl!==e||this.props.colorBl!==e)&&(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(k.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){(this.props.colorTr!==e||this.props.colorBr!==e)&&(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(k.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(k.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(k.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(k.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(k.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(k.CalculatedZIndex|k.Children),this.children.forEach(t=>{t.setUpdateType(k.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(k.CalculatedZIndex|k.Children),this.children.forEach(t=>{t.setUpdateType(k.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(e){const t=this.props.parent;if(t!==e){if(this.props.parent=e,t){const o=t.children.indexOf(this);L(o!==-1,"CoreNode.parent: Node not found in old parent's children!"),t.children.splice(o,1),t.setUpdateType(k.Children|k.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(k.All),e.setUpdateType(k.Children|k.ZIndexSortedChildren),(e.rtt||e.parentHasRenderTexture)&&this.setRTTUpdates(k.All)),this.updateScaleRotateTransform()}}get rtt(){return this.props.rtt}set rtt(e){var t,o;if(!e){this.props.rtt&&(this.props.rtt=!1,this.unloadTexture(),this.setUpdateType(k.All),this.children.forEach(i=>{i.parentHasRenderTexture=!1}),(t=this.stage.renderer)==null||t.removeRTTNode(this));return}this.props.rtt=!0,this.hasRTTupdates=!0,this.setUpdateType(k.All),this.children.forEach(i=>{i.setUpdateType(k.All)}),(o=this.stage.renderer)==null||o.renderToTexture(this)}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let e=this.parent;for(;e;){if(e.rtt)return e;e=e.parent}return null}get texture(){return this.props.texture}setRTTUpdates(e){var t;this.hasRTTupdates=!0,(t=this.parent)==null||t.setRTTUpdates(e)}}let Ns=1;function cn(){return Ns++}class Kr extends et{constructor(e,t,o,i){var s;super();u(this,"rendererMain");u(this,"stage");u(this,"id");u(this,"coreNode");u(this,"_children",[]);u(this,"_src","");u(this,"_parent",null);u(this,"_texture",null);u(this,"_shader",null);u(this,"_data",{});u(this,"onTextureLoaded",(e,t)=>{this.emit("loaded",t)});u(this,"onTextureFailed",(e,t)=>{this.emit("failed",t)});u(this,"onTextureFreed",(e,t)=>{this.emit("freed",t)});u(this,"onOutOfBounds",(e,t)=>{this.emit("outOfBounds",t)});u(this,"onInBounds",(e,t)=>{this.emit("inBounds",t)});u(this,"onOutOfViewport",(e,t)=>{this.emit("outOfViewport",t)});u(this,"onInViewport",(e,t)=>{this.emit("inViewport",t)});this.rendererMain=t,this.stage=o,this.id=(s=i==null?void 0:i.id)!=null?s:cn(),this.coreNode=i||new ln(this.stage,{id:this.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,autosize:e.autosize,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null,rtt:e.rtt}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.coreNode.on("freed",this.onTextureFreed),this.coreNode.on("outOfBounds",this.onOutOfBounds),this.coreNode.on("inBounds",this.onInBounds),this.coreNode.on("outOfViewport",this.onOutOfViewport),this.coreNode.on("inViewport",this.onInViewport),this.parent=e.parent,this.shader=e.shader,this.texture=e.texture,this.src=e.src,this.rtt=e.rtt,this._data=e.data}get x(){return this.coreNode.x}set x(e){this.coreNode.x=e}get y(){return this.coreNode.y}set y(e){this.coreNode.y=e}get width(){return this.coreNode.width}set width(e){e!==this.coreNode.width&&this.coreNode.rtt&&(this.texture=this.rendererMain.createTexture("RenderTexture",{width:this.width,height:this.height},{preload:!0,flipY:!0})),this.coreNode.width=e}get height(){return this.coreNode.height}set height(e){e!==this.coreNode.height&&this.coreNode.rtt&&(this.texture=this.rendererMain.createTexture("RenderTexture",{width:this.width,height:this.height},{preload:!0,flipY:!0})),this.coreNode.height=e}get alpha(){return this.coreNode.alpha}set alpha(e){this.coreNode.alpha=e}get autosize(){return this.coreNode.autosize}set autosize(e){this.coreNode.autosize=e}get clipping(){return this.coreNode.clipping}set clipping(e){this.coreNode.clipping=e}get color(){return this.coreNode.color}set color(e){this.coreNode.color=e}get colorTop(){return this.coreNode.colorTop}set colorTop(e){this.coreNode.colorTop=e}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(e){this.coreNode.colorBottom=e}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(e){this.coreNode.colorLeft=e}get colorRight(){return this.coreNode.colorRight}set colorRight(e){this.coreNode.colorRight=e}get colorTl(){return this.coreNode.colorTl}set colorTl(e){this.coreNode.colorTl=e}get colorTr(){return this.coreNode.colorTr}set colorTr(e){this.coreNode.colorTr=e}get colorBl(){return this.coreNode.colorBl}set colorBl(e){this.coreNode.colorBl=e}get colorBr(){return this.coreNode.colorBr}set colorBr(e){this.coreNode.colorBr=e}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(e){e!==null&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}get scaleX(){return this.coreNode.scaleX}set scaleX(e){this.coreNode.scaleX=e}get scaleY(){return this.coreNode.scaleY}set scaleY(e){this.coreNode.scaleY=e}get mount(){return this.coreNode.mount}set mount(e){this.coreNode.mount=e}get mountX(){return this.coreNode.mountX}set mountX(e){this.coreNode.mountX=e}get mountY(){return this.coreNode.mountY}set mountY(e){this.coreNode.mountY=e}get pivot(){return this.coreNode.pivot}set pivot(e){this.coreNode.pivot=e}get pivotX(){return this.coreNode.pivotX}set pivotX(e){this.coreNode.pivotX=e}get pivotY(){return this.coreNode.pivotY}set pivotY(e){this.coreNode.pivotY=e}get rotation(){return this.coreNode.rotation}set rotation(e){this.coreNode.rotation=e}get parent(){return this._parent}set parent(e){var o;const t=this._parent;if(this._parent=e,this.coreNode.parent=(o=e==null?void 0:e.coreNode)!=null?o:null,t){const i=t.children.indexOf(this);L(i!==-1,"MainOnlyNode.parent: Node not found in old parent's children!"),t.children.splice(i,1)}e&&e.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(e){this.coreNode.zIndex=e}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(e){this.coreNode.zIndexLocked=e}get src(){return this._src}set src(e){if(this._src!==e){if(this._src=e,!e){this.texture=null;return}this.texture=this.rendererMain.createTexture("ImageTexture",{src:e})}}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}get rtt(){return this.coreNode.rtt}set rtt(e){e&&(this.texture=this.rendererMain.createTexture("RenderTexture",{width:this.width,height:this.height},{preload:!0,flipY:!0})),this.coreNode.rtt=e}get parentHasRenderTexture(){return this.coreNode.parentHasRenderTexture}get shader(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}get data(){return this._data}set data(e){this._data=Ho(e)}destroy(){this.emit("beforeDestroy",{});let e=this.children[0];for(;e;)e.destroy(),e=this.children[0];this.coreNode.destroy(),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(e,t){const o=new ks(this.coreNode,e,t);return new Bs(this.stage.animationManager,o)}}const Ls=n=>{let r=!1;const e=()=>{if(n.updateAnimations(),!n.hasSceneUpdates()){n.calculateFps(),setTimeout(e,16.666666666666668),r||(n.emit("idle"),r=!0);return}r=!1,n.drawFrame(),requestAnimationFrame(e)};requestAnimationFrame(e)},Fs=()=>performance?performance.now():Date.now();class Ms{constructor(){u(this,"activeAnimations",new Set)}registerAnimation(r){this.activeAnimations.add(r)}unregisterAnimation(r){this.activeAnimations.delete(r)}update(r){this.activeAnimations.forEach(e=>{e.update(r)})}}class zs{constructor(r){u(this,"imageWorkersEnabled",!0);u(this,"messageManager",{});u(this,"workers",[]);u(this,"workerIndex",0);u(this,"nextId",0);this.workers=this.createWorkers(r),this.workers.forEach(e=>{e.onmessage=this.handleMessage.bind(this)})}handleMessage(r){const{id:e,data:t,error:o}=r.data,i=this.messageManager[e];if(i){const[s,a]=i;delete this.messageManager[e],o?a(new Error(o)):s(t)}}createWorkers(r=1){const e="\n      function hasAlphaChannel(mimeType) {\n          return (mimeType.indexOf(\"image/png\") !== -1);\n      }\n\n      function getImage(src, premultiplyAlpha) {\n        return new Promise(function(resolve, reject) {\n          var xhr = new XMLHttpRequest();\n          xhr.open('GET', src, true);\n          xhr.responseType = 'blob';\n\n          xhr.onload = function() {\n            if (xhr.status === 200) {\n              var blob = xhr.response;\n              var hasAlphaChannel = premultiplyAlpha !== undefined ? premultiplyAlpha : hasAlphaChannel(blob.type);\n\n              createImageBitmap(blob, {\n                premultiplyAlpha: hasAlphaChannel ? 'premultiply' : 'none',\n                colorSpaceConversion: 'none',\n                imageOrientation: 'none'\n              }).then(function(data) {\n                resolve({ data: data, premultiplyAlpha: premultiplyAlpha });\n              }).catch(function(error) {\n                reject(error);\n              });\n            } else {\n              reject(new Error('Failed to load image: ' + xhr.statusText));\n            }\n          };\n\n          xhr.onerror = function() {\n            reject(new Error('Network error occurred while trying to fetch the image.'));\n          };\n\n          xhr.send();\n        });\n      }\n\n      self.onmessage = (event) => {\n        var id = event.data.id;\n        var src = event.data.src;\n        var premultiplyAlpha = event.data.premultiplyAlpha;\n\n        getImage(src, premultiplyAlpha)\n          .then(function(data) {\n              self.postMessage({ id: id, data: data }, [data.data]);\n          })\n          .catch(function(error) {\n              self.postMessage({ id: id, error: error.message });\n          });\n      };\n    ",t=new Blob([e.replace('"use strict";',"")],{type:"application/javascript"}),o=(self.URL?URL:webkitURL).createObjectURL(t),i=[];for(let s=0;s<r;s++)i.push(new Worker(o));return i}getNextWorker(){const r=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,r}convertUrlToAbsolute(r){return new URL(r,self.location.href).href}getImage(r,e){return new Promise((t,o)=>{try{if(this.workers){const i=this.convertUrlToAbsolute(r),s=this.nextId++;this.messageManager[s]=[t,o],this.getNextWorker().postMessage({id:s,src:i,premultiplyAlpha:e})}}catch(i){o(i)}})}}const Et=class Et extends xo{constructor(e,t){super(e);u(this,"props");this.props=Et.resolveDefaults(t)}async getTextureData(){const{width:e,height:t}=this.props,o=e*t*4,i=new Uint8ClampedArray(o);for(let s=0;s<o;s+=4){const a=Math.floor(Math.random()*256);i[s]=a,i[s+1]=a,i[s+2]=a,i[s+3]=255}return{data:new ImageData(i,e,t)}}static makeCacheKey(e){const t=Et.resolveDefaults(e);return"NoiseTexture,".concat(t.width,",").concat(t.height,",").concat(t.cacheId)}static resolveDefaults(e){var t,o,i;return{width:(t=e.width)!=null?t:128,height:(o=e.height)!=null?o:128,cacheId:(i=e.cacheId)!=null?i:0}}};u(Et,"z$__type__Props");let jr=Et;class Ps{constructor(r){u(this,"usedMemory",0);u(this,"txConstructors",{});u(this,"textureKeyCache",new Map);u(this,"textureIdCache",new Map);u(this,"ctxTextureCache",new WeakMap);u(this,"textureRefCountMap",new WeakMap);u(this,"imageWorkerManager",null);u(this,"hasCreateImageBitmap",!!self.createImageBitmap);u(this,"hasWorker",!!self.Worker);u(this,"renderer");this.hasCreateImageBitmap&&this.hasWorker&&(this.imageWorkerManager=new zs(r)),this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.registerTextureType("ImageTexture",Xr),this.registerTextureType("ColorTexture",Ii),this.registerTextureType("NoiseTexture",jr),this.registerTextureType("SubTexture",wo),this.registerTextureType("RenderTexture",ki)}registerTextureType(r,e){this.txConstructors[r]=e}loadTexture(r,e,t=null){var s;const o=this.txConstructors[r];if(!o)throw new Error('Texture type "'.concat(r,'" is not registered'));let i;if((t==null?void 0:t.id)!==void 0&&this.textureIdCache.has(t.id)&&(i=this.textureIdCache.get(t.id)),!i){const a=t==null?void 0:t.id,l=(s=t==null?void 0:t.cacheKey)!=null?s:o.makeCacheKey(e);l&&this.textureKeyCache.has(l)?i=this.textureKeyCache.get(l):i=new o(this,e),a&&this.addTextureIdToCache(a,l,i)}return t!=null&&t.preload&&this.getCtxTexture(i).load(),i}addTextureIdToCache(r,e,t){const{textureIdCache:o,textureRefCountMap:i}=this;o.set(r,t),i.has(t)?i.get(t).count++:(i.set(t,{cacheKey:e,count:1}),e&&this.textureKeyCache.set(e,t))}removeTextureIdFromCache(r){var i;const{textureIdCache:e,textureRefCountMap:t}=this,o=e.get(r);if(o){if(e.delete(r),t.has(o)){const s=t.get(o);L(s),s.count--,s.count===0&&(t.delete(o),s.cacheKey&&this.textureKeyCache.delete(s.cacheKey))}(i=this.ctxTextureCache.get(o))==null||i.free()}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(r){if(this.ctxTextureCache.has(r))return this.ctxTextureCache.get(r);const e=this.renderer.createCtxTexture(r);return this.ctxTextureCache.set(r,e),e}}class Ds{constructor(){u(this,"data",{})}reset(){this.data={}}increment(r){this.data[r]||(this.data[r]=0),this.data[r]++}getData(){return{...this.data}}}class Os{constructor(r){u(this,"memUsed",0);u(this,"textures",new Map);u(this,"threshold");u(this,"gcRequested",!1);this.threshold=r,r===0&&(this.setTextureMemUse=()=>{})}setTextureMemUse(r,e){if(this.textures.has(r)&&(this.memUsed-=this.textures.get(r)),e===0){this.textures.delete(r);return}else this.memUsed+=e,this.textures.set(r,e);this.memUsed>this.threshold&&(this.gcRequested=!0)}gc(){this.gcRequested=!1,this.textures.forEach((r,e)=>{e.renderable||e.free()})}}const Ws={isWhite:!0,a:1,r:255,g:255,b:255};function Br(n){if(n===4294967295)return Ws;const r=(n>>>24&255)/255,e=n>>>16&255&255,t=n>>>8&255&255,o=n&255&255;return{isWhite:!1,a:r,r:o,g:t,b:e}}function tr({a:n,r,g:e,b:t}){return"rgba(".concat(r,",").concat(e,",").concat(t,",").concat(n,")")}class Us extends Bi{constructor(){super(...arguments);u(this,"image");u(this,"tintCache")}load(){this.textureSource.state==="freed"&&(this.textureSource.setState("loading"),this.onLoadRequest().then(e=>{this.textureSource.setState("loaded",e),this.updateMemSize()}).catch(e=>{this.textureSource.setState("failed",e)}))}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.memManager.setTextureMemUse(this,0)}updateMemSize(){const e=this.tintCache?8:4;if(this.textureSource.dimensions){const{width:t,height:o}=this.textureSource.dimensions;this.memManager.setTextureMemUse(this,t*o*e)}}hasImage(){return this.image!==void 0}getImage(e){var s;const t=this.image;if(L(t,"Attempt to get unloaded image texture"),e.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),t;const o=tr(e);if(((s=this.tintCache)==null?void 0:s.key)===o)return this.tintCache.image;const i=this.tintTexture(t,o);return this.tintCache={key:o,image:i},this.updateMemSize(),i}tintTexture(e,t){const{width:o,height:i}=e,s=document.createElement("canvas");s.width=o,s.height=i;const a=s.getContext("2d");return a&&(a.fillStyle=t,a.globalCompositeOperation="copy",a.fillRect(0,0,o,i),a.globalCompositeOperation="multiply",a.drawImage(e,0,0,o,i,0,0,o,i),a.globalCompositeOperation="destination-in",a.drawImage(e,0,0,o,i,0,0,o,i)),s}get renderable(){return this.textureSource.renderable}async onLoadRequest(){const{data:e}=await this.textureSource.getTextureData();if(e instanceof ImageData){const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const o=t.getContext("2d");return o&&o.putImageData(e,0,0),this.image=t,{width:e.width,height:e.height}}else if(e instanceof ImageBitmap)return this.image=e,{width:e.width,height:e.height};return{width:0,height:0}}}function Ys(n){var r,e;return n.shader instanceof Yo&&n.shader.shType===Uo&&(e=(r=n.shaderProps)==null?void 0:r.radius)!=null?e:0}class $s extends Ei{constructor(e){super(e);u(this,"context");u(this,"canvas");u(this,"pixelRatio");u(this,"clearColor");u(this,"renderToTextureActive",!1);u(this,"activeRttNode",null);this.mode="canvas",this.shManager.renderer=this;const{canvas:t,pixelRatio:o,clearColor:i}=e;this.canvas=t,this.context=t.getContext("2d"),this.pixelRatio=o,this.clearColor=i?Ni(i):void 0}reset(){this.canvas.width=this.canvas.width;const e=this.context;if(this.clearColor){const[t,o,i,s]=this.clearColor;e.fillStyle="rgba(".concat(t,", ").concat(o,", ").concat(i,", ").concat(s/255,")"),e.fillRect(0,0,this.canvas.width,this.canvas.height)}e.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(e){const t=this.context,{tx:o,ty:i,width:s,height:a,alpha:l,colorTl:c,colorTr:d,colorBr:f,ta:g,tb:w,tc:x,td:y,clippingRect:b}=e;let C=e.texture,v,m;if(C){if(C instanceof wo&&(m=C.props,C=C.parentTexture),v=this.txManager.getCtxTexture(C),C.state==="freed"){v.load();return}if(C.state!=="loaded"||!v.hasImage())return}const p=Br(c),S=g!==1,I=b.width!==0&&b.height!==0,T=c!==d||c!==f,_=e.shader?Ys(e):0;if((S||I||_)&&t.save(),I){const A=new Path2D,{x:E,y:N,width:B,height:F}=b;A.rect(E,N,B,F),t.clip(A)}if(S){const A=this.pixelRatio;t.setTransform(g,x,w,y,o*A,i*A),t.scale(A,A),t.translate(-o,-i)}if(_){const A=new Path2D;A.roundRect(o,i,s,a,_),t.clip(A)}if(v){const A=v.getImage(p);t.globalAlpha=l,m?t.drawImage(A,m.x,m.y,m.width,m.height,o,i,s,a):t.drawImage(A,o,i,s,a),t.globalAlpha=1}else if(T){let A=o,E=i,N;c===d?(A=o,E=i+a,N=Br(f)):(A=o+s,E=i,N=Br(d));const B=t.createLinearGradient(o,i,A,E);B.addColorStop(0,tr(p)),B.addColorStop(1,tr(N)),t.fillStyle=B,t.fillRect(o,i,s,a)}else t.fillStyle=tr(p),t.fillRect(o,i,s,a);(S||I||_)&&t.restore()}createCtxTexture(e){return new Us(this.txMemManager,e)}getShaderManager(){return this.shManager}renderRTTNodes(){}removeRTTNode(e){}renderToTexture(e){}}const Hs=2e6;class Qs extends et{constructor(e){super();u(this,"options");u(this,"animationManager");u(this,"txManager");u(this,"txMemManager");u(this,"fontManager");u(this,"textRenderers");u(this,"shManager");u(this,"renderer");u(this,"root");u(this,"boundsMargin");u(this,"deltaTime",0);u(this,"lastFrameTime",0);u(this,"currentFrameTime",0);u(this,"fpsNumFrames",0);u(this,"fpsElapsedTime",0);u(this,"renderRequested",!1);u(this,"contextSpy",null);this.options=e;const{canvas:t,clearColor:o,rootId:i,debug:s,appWidth:a,appHeight:l,boundsMargin:c,enableContextSpy:d,numImageWorkers:f,txMemByteThreshold:g,renderMode:w}=e;this.txManager=new Ps(f),this.txMemManager=new Os(g),this.shManager=new cs,this.animationManager=new Ms,this.contextSpy=d?new Ds:null;let x=[0,0,0,0];c&&(x=Array.isArray(c)?c:[c,c,c,c]),this.boundsMargin=x,s!=null&&s.monitorTextureCache&&setInterval(()=>{L(this.txManager);const C=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",C.idCacheSize),console.log("Texture Key Cache Size: ",C.keyCacheSize)},1e3);const y={stage:this,canvas:t,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:o!=null?o:4278190080,bufferMemory:Hs,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy};w==="canvas"?this.renderer=new $s(y):this.renderer=new yo(y),Li(w),this.txManager.renderer=this.renderer,this.textRenderers=w==="webgl"?{canvas:new Ln(this),sdf:new Ts(this)}:{canvas:new Ln(this)},this.fontManager=new $o(this.textRenderers);const b=new ln(this,{id:i,x:0,y:0,width:a,height:l,alpha:1,autosize:!1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null,rtt:!1});this.root=b,Ls(this)}updateAnimations(){const{animationManager:e}=this;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=Fs(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,this.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime}),e.update(this.deltaTime))}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){const{renderer:e,renderRequested:t}=this;L(e),this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),e.reset(),e.txMemManager.gcRequested&&e.txMemManager.gc(),e.rttNodes.length>0&&e.renderRTTNodes(),this.addQuads(this.root),e==null||e.render(),this.calculateFps(),t&&(this.renderRequested=!1)}calculateFps(){var t,o,i;const{fpsUpdateInterval:e}=this.options;if(e&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=e)){const s=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",{fps:s,contextSpyData:(o=(t=this.contextSpy)==null?void 0:t.getData())!=null?o:null}),(i=this.contextSpy)==null||i.reset()}}addQuads(e){L(this.renderer&&e.globalTransform),e.isRenderable&&e.renderQuads(this.renderer);for(let t=0;t<e.children.length;t++){const o=e.children[t];o&&(o==null?void 0:o.worldAlpha)!==0&&this.addQuads(o)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,t=null){let o=t,i=!1;if(o){const a=this.textRenderers[o];a?a.canRenderFont(e)||(console.warn("Cannot use override text renderer '".concat(o,"' for font"),e),o=null,i=!0):(console.warn("Text renderer override '".concat(o,"' not found.")),o=null,i=!0)}if(!o){for(const[a,l]of Object.entries(this.textRenderers))if(a!=="canvas"&&l.canRenderFont(e)){o=a;break}o||(o="canvas")}i&&console.warn("Falling back to text renderer ".concat(String(o)));const s=this.textRenderers[o];return L(s,"resolvedTextRenderer undefined"),s}}class Xs extends ln{constructor(e,t){super(e,t);u(this,"textRenderer");u(this,"trState");u(this,"_textRendererOverride",null);u(this,"onTextLoaded",()=>{const{contain:e}=this,t=this.trState.props.width,o=this.trState.props.height,i=this.trState.textW||0,s=this.trState.textH||0;e==="both"?(this.props.width=t,this.props.height=o):e==="width"?(this.props.width=t,this.props.height=s):e==="none"&&(this.props.width=i,this.props.height=s),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});u(this,"onTextFailed",(e,t)=>{this.emit("failed",{type:"text",error:t})});this._textRendererOverride=t.textRendererOverride;const{resolvedTextRenderer:o,textRendererState:i}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:t.width,height:t.height,textAlign:t.textAlign,color:t.color,zIndex:t.zIndex,contain:t.contain,scrollable:t.scrollable,scrollY:t.scrollY,offsetY:t.offsetY,letterSpacing:t.letterSpacing,debug:t.debug,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStretch:t.fontStretch,fontStyle:t.fontStyle,fontWeight:t.fontWeight,text:t.text,lineHeight:t.lineHeight,maxLines:t.maxLines,textBaseline:t.textBaseline,verticalAlign:t.verticalAlign,overflowSuffix:t.overflowSuffix});this.textRenderer=o,this.trState=i}get width(){return this.props.width}set width(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),this.contain==="none"&&this.setUpdateType(k.Local)}get height(){return this.props.height}set height(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),this.contain!=="both"&&this.setUpdateType(k.Local)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e,this.textRenderer.destroyState(this.trState);const{resolvedTextRenderer:t,textRendererState:o}=this.resolveTextRendererAndState(this.trState.props);this.textRenderer=t,this.trState=o}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,t){super.update(e,t),L(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkRenderProps(){return this.trState.props.text!==""?!0:super.checkRenderProps()}onChangeIsRenderable(e){super.onChangeIsRenderable(e),this.textRenderer.setIsRenderable(this.trState,e)}renderQuads(e){var t;L(this.globalTransform),!(this.parentHasRenderTexture&&(!e.renderToTextureActive||this.parentRenderTexture!==e.activeRttNode))&&(this.parentHasRenderTexture&&((t=this.props.parent)!=null&&t.rtt)&&(this.globalTransform=ue.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),L(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions))}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}resolveTextRendererAndState(e){const t=this.stage.resolveTextRenderer(e,this._textRendererOverride),o=t.createState(e);return o.emitter.on("loaded",this.onTextLoaded),o.emitter.on("failed",this.onTextFailed),t.scheduleUpdateState(o),{resolvedTextRenderer:t,textRendererState:o}}}class Ks extends Kr{constructor(r,e,t){super(r,e,t,new Xs(t,{id:cn(),x:r.x,y:r.y,width:r.width,height:r.height,alpha:r.alpha,autosize:r.autosize,clipping:r.clipping,color:r.color,colorTop:r.colorTop,colorBottom:r.colorBottom,colorLeft:r.colorLeft,colorRight:r.colorRight,colorTl:r.colorTl,colorTr:r.colorTr,colorBl:r.colorBl,colorBr:r.colorBr,zIndex:r.zIndex,zIndexLocked:r.zIndexLocked,scaleX:r.scaleX,scaleY:r.scaleY,mountX:r.mountX,mountY:r.mountY,mount:r.mount,pivot:r.pivot,pivotX:r.pivotX,pivotY:r.pivotY,rotation:r.rotation,text:r.text,fontSize:r.fontSize,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fontStretch:r.fontStretch,fontStyle:r.fontStyle,contain:r.contain,scrollable:r.scrollable,letterSpacing:r.letterSpacing,textAlign:r.textAlign,scrollY:r.scrollY,offsetY:r.offsetY,textRendererOverride:r.textRendererOverride,lineHeight:r.lineHeight,maxLines:r.maxLines,textBaseline:r.textBaseline,verticalAlign:r.verticalAlign,overflowSuffix:r.overflowSuffix,debug:r.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null,rtt:!1}))}get text(){return this.coreNode.text}set text(r){this.coreNode.text=r}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(r){this.coreNode.textRendererOverride=r}get fontSize(){return this.coreNode.fontSize}set fontSize(r){this.coreNode.fontSize=r}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(r){this.coreNode.fontFamily=r}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(r){this.coreNode.fontWeight=r}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(r){this.coreNode.fontStretch=r}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(r){this.coreNode.fontStyle=r}get textAlign(){return this.coreNode.textAlign}set textAlign(r){this.coreNode.textAlign=r}get contain(){return this.coreNode.contain}set contain(r){this.coreNode.contain=r}get scrollable(){return this.coreNode.scrollable}set scrollable(r){this.coreNode.scrollable=r}get scrollY(){return this.coreNode.scrollY}set scrollY(r){this.coreNode.scrollY=r}get offsetY(){return this.coreNode.offsetY}set offsetY(r){this.coreNode.offsetY=r}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(r){this.coreNode.letterSpacing=r}get lineHeight(){return this.coreNode.lineHeight}set lineHeight(r){r&&(this.coreNode.lineHeight=r)}get maxLines(){return this.coreNode.maxLines}set maxLines(r){r&&(this.coreNode.maxLines=r)}get textBaseline(){return this.coreNode.textBaseline}set textBaseline(r){r&&(this.coreNode.textBaseline=r)}get verticalAlign(){return this.coreNode.verticalAlign}set verticalAlign(r){r&&(this.coreNode.verticalAlign=r)}get overflowSuffix(){return this.coreNode.overflowSuffix}set overflowSuffix(r){r&&(this.coreNode.overflowSuffix=r)}get debug(){return this.coreNode.debug}set debug(r){this.coreNode.debug=r}}class js{constructor(){u(this,"root",null);u(this,"stage",null);u(this,"rendererMain",null)}async init(r,e,t){this.stage=new Qs({rootId:cn(),appWidth:e.appWidth,appHeight:e.appHeight,txMemByteThreshold:e.txMemByteThreshold,boundsMargin:e.boundsMargin,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio,clearColor:e.clearColor,canvas:t,fpsUpdateInterval:e.fpsUpdateInterval,enableContextSpy:e.enableContextSpy,numImageWorkers:e.numImageWorkers,renderMode:e.renderMode,debug:{monitorTextureCache:!1}}),this.rendererMain=r,L(this.stage.root);const o=new Kr(r.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root);this.root=o,o.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,o)),this.onCreateNode(o),e.coreExtensionModule&&await Rs(e.coreExtensionModule,this.stage),this.stage.on("fpsUpdate",(i,s)=>{this.onFpsUpdate(s)}),this.stage.on("frameTick",(i,s)=>{this.onFrameTick(s)}),this.stage.on("idle",()=>{this.onIdle()})}createNode(r){L(this.rendererMain),L(this.stage);const e=new Kr(r,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}createTextNode(r){L(this.rendererMain),L(this.stage);const e=new Ks(r,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}destroyNode(r){r.destroy()}releaseTexture(r){const{stage:e}=this;L(e),e.txManager.removeTextureIdFromCache(r)}getRootNode(){return L(this.root),this.root}onCreateNode(r){throw new Error("Method not implemented.")}onBeforeDestroyNode(r){throw new Error("Method not implemented.")}onFpsUpdate(r){throw new Error("Method not implemented.")}onFrameTick(r){throw new Error("Method not implemented.")}onIdle(){throw new Error("Method not implemented.")}}let Fe,dn;function Vs(n={},r="app"){const e=new js;return Fe=new Is(n,r,e),dn=Fe.createShader.bind(Fe),Fe}class Gs extends Array{constructor(r){super(),this._parent=r}get selected(){return this[this._parent.selected||0]}get firstChild(){return this[0]}insert(r,e){if(e){const t=this.indexOf(e);this.splice(t,0,r)}else this.push(r);r.parent=this._parent}remove(r){const e=this.indexOf(r);e>=0&&this.splice(e,1)}}function qs(){return!0&&!1}const Zs=qs()||!1,pe={debug:!1,animationsEnabled:!0,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100}};function Mn(n){return Js(n)&&n.debug}function qe(n,r,...e){Zs&&(pe.debug||Mn(r)||Mn(e[0]))&&console.log(n,r,...e)}const Qt=n=>n instanceof Function;function Js(n){return typeof n=="object"}function dr(n){return Array.isArray(n)}function ea(n){return typeof n=="string"}function ta(n){return typeof n=="number"}function ra(n){return Number.isInteger(n)}function na(n,r){for(const e of r)if(e in n)return!0;return!1}function Qo(n,r={}){if(dr(n))n.forEach(e=>{Qo(e,r)});else if(n)for(const e in n)r[e]===void 0&&n[e]&&(r[e]=n[e]);return r}class zn extends Array{constructor(r,e={}){return dr(e)?super(...e):ea(e)?super(e):super(...Object.entries(e).filter(([t,o])=>o).map(([t])=>t)),this.onChange=r,this}has(r){return this.indexOf(r)>=0}is(r){return this.indexOf(r)>=0}add(r){this.push(r),this.onChange()}toggle(r){this.has(r)?this.remove(r):this.add(r)}remove(r){const e=this.indexOf(r);e>=0&&(this.splice(e,1),this.onChange())}}var Ye=(n=>(n[n.Element=0]="Element",n[n.TextNode=1]="TextNode",n[n.Text=2]="Text",n))(Ye||{});function oa(n){const r=[];let e=!1;for(let m=0;m<n.children.length;m++){const p=n.children[m];if(p.type!==Ye.Text&&p.flexItem!==!1){if(p.type===Ye.TextNode&&p.text&&!(p.width||p.height))return!1;p.flexOrder!==void 0&&(e=!0),r.push(p)}}e&&r.sort((m,p)=>(m.flexOrder||0)-(p.flexOrder||0));const t=r.length,i=(n.flexDirection||"row")==="row",s=i?"width":"height",a=i?"height":"width",l=i?"marginLeft":"marginTop",c=i?"marginRight":"marginBottom",d=i?"x":"y",f=i?"y":"x",g=n[s]||0,w=n[a]||0,x=n.gap||0,y=n.justifyContent||"flexStart",b=n.alignItems;let C=0;["center","spaceBetween","spaceEvenly"].includes(y)&&(C=r.reduce((m,p)=>m+(p[s]||0),0));const v=w&&b?m=>{b==="flexStart"?m[f]=0:b==="center"?m[f]=(w-(m[a]||0))/2:b==="flexEnd"&&(m[f]=w-(m[a]||0))}:m=>m;if(y==="flexStart"){let m=0;for(let p=0;p<r.length;p++){const S=r[p];S[d]=m+(S[l]||0),m+=(S[s]||0)+x+(S[l]||0)+(S[c]||0),v(S)}if(n.flexBoundary!=="fixed"){const p=m-x;if(p!==n[s])return n[s]=p,!0}}else if(y==="flexEnd"){let m=g;for(let p=t-1;p>=0;p--){const S=r[p];L(S),S[d]=m-(S[s]||0)-(S[c]||0),m-=(S[s]||0)+x+(S[l]||0)+(S[c]||0),v(S)}}else if(y==="center"){let m=(g-(C+x*(t-1)))/2;for(let p=0;p<r.length;p++){const S=r[p];S[d]=m,m+=(S[s]||0)+x,v(S)}}else if(y==="spaceBetween"){const m=(g-C)/(t-1);let p=0;for(let S=0;S<r.length;S++){const I=r[S];I[d]=p,p+=(I[s]||0)+m,v(I)}}else if(y==="spaceEvenly"){const m=(g-C)/(t+1);let p=m;for(let S=0;S<r.length;S++){const I=r[S];I[d]=p,p+=(I[s]||0)+m,v(I)}}return!1}const{animationSettings:ia}=pe,Xt=new Set;let Er=!0;function Pn(n){const r=[];for(const[e,t]of Object.entries(n))r.push({type:e,props:t});return dn("DynamicShader",{effects:r})}function wt(n=""){return{set(r){ta(r)&&(r={width:r,color:255}),this.effects=this.effects?{...this.effects||{},["border".concat(n)]:r}:{["border".concat(n)]:r}}}}const sa=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],aa=["autosize","clipping","contain","fontFamily","fontStretch","fontStyle","fontWeight","letterSpacing","maxLines","offsetY","overflowSuffix","rtt","scrollable","scrollY","src","text","textAlign","textBaseline","textOverflow","texture","verticalAlign","wordWrap"];class Se extends Object{constructor(r){super(),this._animationQueue=[],this._animationRunning=!1,this.type=r==="text"?Ye.TextNode:Ye.Element,this.rendered=!1,this.lng={},this.children=new Gs(this)}get effects(){return this._effects}set effects(r){this._effects=r,this.rendered&&(this.shader=Pn(r))}get parent(){return this._parent}set parent(r){var e;this._parent=r,this.rendered&&(this.lng.parent=(e=r==null?void 0:r.lng)!=null?e:null)}set shader(r){dr(r)&&(r=dn(...r)),this.lng.shader=r}_sendToLightningAnimatable(r,e){if(this.rendered&&pe.animationsEnabled&&this.transition&&(this.transition===!0||this.transition[r])){const t=this.transition===!0||this.transition[r]===!0?void 0:this.transition[r];return this.animate({[r]:e},t).start()}this.lng[r]=e}animate(r,e){return L(this.rendered,"Node must be rendered before animating"),this.lng.animate(r,e||this.animationSettings)}chain(r,e){return this._animationRunning&&(this._animationQueue=[],this._animationRunning=!1),e?this._animationQueueSettings=e:this._animationQueueSettings||(this._animationQueueSettings=e||this.animationSettings),e=e||this._animationQueueSettings,this._animationQueue.push({props:r,animationSettings:e}),this}async start(){let r=this._animationQueue.shift();for(;r;)this._animationRunning=!0,await this.animate(r.props,r.animationSettings).start().waitUntilStopped(),r=this._animationQueue.shift();this._animationRunning=!1,this._animationQueueSettings=void 0}setFocus(){if(this.rendered){if(this.forwardFocus!==void 0)if(Qt(this.forwardFocus)){if(this.forwardFocus.call(this,this)!==!1)return}else{const r=typeof this.forwardFocus=="number"?this.forwardFocus:null;if(r!==null&&r<this.children.length){const e=this.children[r];e instanceof Se&&e.setFocus();return}}queueMicrotask(()=>Zi(this))}else this.autofocus=!0}isTextNode(){return this.type===Ye.TextNode}_layoutOnLoad(){this.lng.on("loaded",(r,e)=>{const{dimensions:t}=e;this.parent.updateLayout(this,t)})}getText(){let r="";for(let e=0;e<this.children.length;e++)r+=this.children[e].text;return r}destroy(){this._queueDelete&&this.lng.destroy()}set onEvents(r){this._events=r}get onEvents(){return this._events}set style(r){dr(r)?this._style=Qo(r):this._style=r;for(const e in this._style)this[e]===void 0&&(this[e]=this._style[e])}get style(){return this._style}get hasChildren(){return this.children.length>0}getChildById(r){return this.children.find(e=>e.id===r)}searchChildrenById(r){for(let e=0;e<this.children.length;e++){const t=this.children[e];if(t instanceof Se){if(t.id===r)return t;const o=t.searchChildrenById(r);if(o)return o}}}set states(r){this._states=new zn(this._stateChanged.bind(this),r),this.rendered&&this._stateChanged()}get states(){return this._states=this._states||new zn(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||ia}set animationSettings(r){this._animationSettings=r}requiresLayout(){return this.display==="flex"||this.onBeforeLayout}updateLayout(r,e){var t,o;if(this.hasChildren){qe("Layout: ",this);let i=!1;Qt(this.onBeforeLayout)&&(i=this.onBeforeLayout.call(this,this,r,e)||!1),this.display==="flex"?(oa(this)||i)&&((t=this.parent)==null||t.updateLayout()):i&&((o=this.parent)==null||o.updateLayout()),Qt(this.onLayout)&&this.onLayout.call(this,this,r,e)}}_stateChanged(){if(qe("State Changed: ",this,this.states),this.forwardStates){const e=this.states.slice();this.children.forEach(t=>t.states=e)}const r=this.states;if(this._undoStyles||this.style&&na(this.style,r)){this._undoStyles=this._undoStyles||[];const e={};this._undoStyles.forEach(o=>{e[o]=this.style[o]});const t=r.reduce((o,i)=>{const s=this.style[i];return s&&(o={...o,...s}),o},{});this._undoStyles=Object.keys(t),t.transition!==void 0&&(this.transition=t.transition),Object.assign(this,e,t)}}render(){var o;const r=this,e=this.parent;if(!e){console.warn("Parent not set - no node created for: ",this);return}if(!e.rendered){console.warn("Parent not rendered yet: ",this);return}if(this.rendered){console.warn("Node already rendered: ",this);return}e.requiresLayout()&&!Xt.has(e)&&(Xt.add(e),Er&&(Er=!1,queueMicrotask(()=>{Er=!0;const i=[...Xt];Xt.clear();for(let s=i.length-1;s>=0;s--)i[s].updateLayout()}))),this.states.length&&this._stateChanged();const t=r.lng;if(t.x=t.x||0,t.y=t.y||0,e.rendered&&(t.parent=e.lng),r._effects&&(t.shader=Pn(r._effects)),r.isTextNode()){if(pe.fontSettings)for(const i in pe.fontSettings)t[i]===void 0&&(t[i]=pe.fontSettings[i]);t.text=r.getText(),t.textAlign&&!t.contain&&console.warn("Text align requires contain: ",r.getText()),t.contain&&(t.width||(t.width=(e.width||0)-t.x-(t.marginRight||0)),t.contain==="both"&&!t.height&&!t.maxLines?t.height=(e.height||0)-t.y-(t.marginBottom||0):t.maxLines===1&&(t.height=t.height||t.lineHeight||t.fontSize)),qe("Rendering: ",this,t),r.lng=Fe.createTextNode(t),e.requiresLayout()&&(!t.width||!t.height)&&r._layoutOnLoad()}else t.texture||(isNaN(t.width)&&(t.width=(e.width||0)-t.x),isNaN(t.height)&&(t.height=(e.height||0)-t.y),t.rtt&&!t.color&&(t.color=4294967295),!t.color&&!t.src&&(t.color=0)),qe("Rendering: ",this,t),r.lng=Fe.createNode(t);if(r.rendered=!0,r.autosize&&e.requiresLayout()&&r._layoutOnLoad(),r.onFail&&r.lng.on("failed",r.onFail),r.onLoad&&r.lng.on("loaded",r.onLoad),Qt(this.onCreate)&&this.onCreate.call(this,r),r.onEvents&&r.onEvents.forEach(([i,s])=>{r.lng.on(i,(a,l)=>s(r,l))}),(o=r.lng)!=null&&o.div&&(r.lng.div.element=r),r.type===Ye.Element)for(let i=0;i<r.children.length;i++){const s=r.children[i];L(s,"Child is undefined"),"render"in s?s.render():s.text&&console.warn("TextNode outside of <Text>: ",s)}r.autofocus&&r.setFocus()}}for(const n of sa)Object.defineProperty(Se.prototype,n,{get(){return this.lng[n]},set(r){this._sendToLightningAnimatable(n,r)}});for(const n of aa)Object.defineProperty(Se.prototype,n,{get(){return this.lng[n]},set(r){this.lng[n]=r}});Object.defineProperties(Se.prototype,{borderRadius:{set(n){this.effects=this.effects?{...this.effects,radius:{radius:n}}:{radius:{radius:n}}}},border:wt(),borderLeft:wt("Left"),borderRight:wt("Right"),borderTop:wt("Top"),borderBottom:wt("Bottom")});Object.defineProperties(Se.prototype,{linearGradient:{set(n={}){this.effects=this.effects?{...this.effects,linearGradient:n}:{linearGradient:n}}}});const Q=n=>(()=>{var r=br("text");return un(r,n,!1),r})(),W=n=>(()=>{var r=br("node");return un(r,n,!1),r})();function la({createElement:n,createTextNode:r,isTextNode:e,replaceText:t,insertNode:o,removeNode:i,setProperty:s,getParentNode:a,getFirstChild:l,getNextSibling:c}){function d(v,m,p,S){if(p!==void 0&&!S&&(S=[]),typeof m!="function")return f(v,m,S,p);Re(I=>f(v,m(),I,p),S)}function f(v,m,p,S,I){for(;typeof p=="function";)p=p();if(m===p)return p;const T=typeof m,_=S!==void 0;if(T==="string"||T==="number")if(T==="number"&&(m=m.toString()),_){let A=p[0];A&&e(A)?t(A,m):A=r(m),p=x(v,p,S,A)}else p!==""&&typeof p=="string"?t(l(v),p=m):(x(v,p,S,r(m)),p=m);else if(m==null||T==="boolean")p=x(v,p,S);else{if(T==="function")return Re(()=>{let A=m();for(;typeof A=="function";)A=A();p=f(v,A,p,S)}),()=>p;if(Array.isArray(m)){const A=[];if(g(A,m,I))return Re(()=>p=f(v,A,p,S,!0)),()=>p;if(A.length===0){const E=x(v,p,S);if(_)return p=E}else Array.isArray(p)?p.length===0?y(v,A,S):w(v,p,A):p==null||p===""?y(v,A):w(v,_&&p||[l(v)],A);p=A}else{if(Array.isArray(p)){if(_)return p=x(v,p,S,m);x(v,p,null,m)}else p==null||p===""||!l(v)?o(v,m):b(v,m,l(v));p=m}}return p}function g(v,m,p){let S=!1;for(let I=0,T=m.length;I<T;I++){let _=m[I],A;if(!(_==null||_===!0||_===!1))if(Array.isArray(_))S=g(v,_)||S;else if((A=typeof _)=="string"||A==="number")v.push(r(_));else if(A==="function")if(p){for(;typeof _=="function";)_=_();S=g(v,Array.isArray(_)?_:[_])||S}else v.push(_),S=!0;else v.push(_)}return S}function w(v,m,p){let S=p.length,I=m.length,T=S,_=0,A=0,E=c(m[I-1]),N=null;for(;_<I||A<T;){if(m[_]===p[A]){_++,A++;continue}for(;m[I-1]===p[T-1];)I--,T--;if(I===_){const B=T<S?A?c(p[A-1]):p[T-A]:E;for(;A<T;)o(v,p[A++],B)}else if(T===A)for(;_<I;)(!N||!N.has(m[_]))&&i(v,m[_]),_++;else if(m[_]===p[T-1]&&p[A]===m[I-1]){const B=c(m[--I]);o(v,p[A++],c(m[_++])),o(v,p[--T],B),m[I]=p[T]}else{if(!N){N=new Map;let F=A;for(;F<T;)N.set(p[F],F++)}const B=N.get(m[_]);if(B!=null)if(A<B&&B<T){let F=_,z=1,M;for(;++F<I&&F<T&&!((M=N.get(m[F]))==null||M!==B+z);)z++;if(z>B-A){const D=m[_];for(;A<B;)o(v,p[A++],D)}else b(v,p[A++],m[_++])}else _++;else i(v,m[_++])}}}function x(v,m,p,S){if(p===void 0){let T;for(;T=l(v);)i(v,T);return S&&o(v,S),""}const I=S||r("");if(m.length){let T=!1;for(let _=m.length-1;_>=0;_--){const A=m[_];if(I!==A){const E=a(A)===v;!T&&!_?E?b(v,I,A):o(v,I,p):E&&i(v,A)}else T=!0}}else o(v,I,p);return[I]}function y(v,m,p){for(let S=0,I=m.length;S<I;S++)o(v,m[S],p)}function b(v,m,p){o(v,m,p),i(v,p)}function C(v,m,p={},S){return m||(m={}),S||Re(()=>p.children=f(v,m.children,p.children)),Re(()=>m.ref&&m.ref(v)),Re(()=>{for(const I in m){if(I==="children"||I==="ref")continue;const T=m[I];T!==p[I]&&(s(v,I,T,p[I]),p[I]=T)}}),p}return{render(v,m){let p;return He(S=>{p=S,d(m,v())}),p},insert:d,spread(v,m,p){typeof m=="function"?Re(S=>C(v,m(),S,p)):C(v,m,void 0,p)},createElement:n,createTextNode:r,insertNode:o,setProp(v,m,p,S){return s(v,m,p,S),p},mergeProps:on,effect:Re,memo:X,createComponent:Fo,use(v,m,p){return te(()=>v(m,p))}}}function ca(n){const r=la(n);return r.mergeProps=on,r}const Xo={createElement(n){return new Se(n)},createTextNode(n){return{type:Ye.Text,text:n,parent:void 0}},replaceText(n,r){qe("Replace Text: ",n,r),n.text=r;const e=n.parent;L(e),e.text=e.getText()},setProperty(n,r,e=!0){n[r]=e},insertNode(n,r,e){qe("INSERT: ",n,r,e),n.children.insert(r,e),r._queueDelete=!1,r instanceof Se?n.rendered&&r.render():n.isTextNode()&&(n.text=n.getText())},isTextNode(n){return n.isTextNode()},removeNode(n,r){qe("REMOVE: ",n,r),n.children.remove(r),r._queueDelete=!0,r instanceof Se&&queueMicrotask(()=>r.destroy())},getParentNode(n){return n.parent},getFirstChild(n){return n.children[0]},getNextSibling(n){const r=n.parent.children||[],e=r.indexOf(n)+1;if(e<r.length)return r[e]}},Ko=ca(Xo);let hr;async function da(n,r){return hr=Vs(n||pe.rendererOptions,r||"app"),await hr.init()}const ha=async function(n,r){const e=Xo.createElement("App");return await da(void 0,r),e.lng=hr.root,e.rendered=!0,{dispose:Ko.render(n,e),rootNode:e,renderer:hr}},{effect:Bd,memo:hn,createComponent:R,createElement:br,createTextNode:Ed,insertNode:Nd,insert:ua,spread:un,setProp:fa,mergeProps:ge,use:pa}=Ko;function ee(n=""){return ra(n)?n:typeof n=="string"?n.startsWith("#")?+(n.replace("#","0x")+(n.length===7?"ff":"")):n.startsWith("0x")?Number(n):+("0x"+(n.length===6?n+"ff":n)):0}const Dn="_$DX_DELEGATE";function ga(n,r=window.document){const e=r[Dn]||(r[Dn]=new Set);for(let t=0,o=n.length;t<o;t++){const i=n[t];e.has(i)||(e.add(i),r.addEventListener(i,ma))}}function ma(n){const r="$$".concat(n.type);let e=n.composedPath&&n.composedPath()[0]||n.target;for(n.target!==e&&Object.defineProperty(n,"target",{configurable:!0,value:e}),Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return e||document}}),H.registry&&!H.done&&(H.done=_$HY.done=!0);e;){const t=e[r];if(t&&!e.disabled){const o=e["".concat(r,"Data")];if(o!==void 0?t.call(e,o,n):t.call(e,n),n.cancelBubble)return}e=e._$host||e.parentNode||e.host}}const xa=!1;function jo(){let n=new Set;function r(o){return n.add(o),()=>n.delete(o)}let e=!1;function t(o,i){if(e)return!(e=!1);const s={to:o,options:i,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const a of n)a.listener({...s,from:a.location,retry:l=>{l&&(e=!0),a.navigate(o,{...i,resolve:!1})}});return!s.defaultPrevented}return{subscribe:r,confirm:t}}let Vr;function fn(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Vr=window.history.state._depth}fn();function ya(n){return{...n,_depth:window.history.state&&window.history.state._depth}}function va(n,r){let e=!1;return()=>{const t=Vr;fn();const o=t==null?null:Vr-t;if(e){e=!1;return}o&&r(o)?(e=!0,window.history.go(-o)):n()}}const wa=/^(?:[a-z0-9]+:)?\/\//i,ba=/^\/+|(\/)\/+$/g,Vo="http://sr";function It(n,r=!1){const e=n.replace(ba,"$1");return e?r||/^[?#]/.test(e)?e:"/"+e:""}function rr(n,r,e){if(wa.test(r))return;const t=It(n),o=e&&It(e);let i="";return!o||r.startsWith("/")?i=t:o.toLowerCase().indexOf(t.toLowerCase())!==0?i=t+o:i=o,(i||"/")+It(r,!i)}function Sa(n,r){if(n==null)throw new Error(r);return n}function Aa(n,r){return It(n).replace(/\/*(\*.*)?$/g,"")+It(r)}function Go(n){const r={};return n.searchParams.forEach((e,t)=>{r[t]=e}),r}function qo(n,r,e){const[t,o]=n.split("/*",2),i=t.split("/").filter(Boolean),s=i.length;return a=>{const l=a.split("/").filter(Boolean),c=l.length-s;if(c<0||c>0&&o===void 0&&!r)return null;const d={path:s?"":"/",params:{}},f=g=>e===void 0?void 0:e[g];for(let g=0;g<s;g++){const w=i[g],x=l[g],y=w[0]===":",b=y?w.slice(1):w;if(y&&Nr(x,f(b)))d.params[b]=x;else if(y||!Nr(x,w))return null;d.path+="/".concat(x)}if(o){const g=c?l.slice(-c).join("/"):"";if(Nr(g,f(o)))d.params[o]=g;else return null}return d}}function Nr(n,r){const e=t=>t.localeCompare(n,void 0,{sensitivity:"base"})===0;return r===void 0?!0:typeof r=="string"?e(r):typeof r=="function"?r(n):Array.isArray(r)?r.some(e):r instanceof RegExp?r.test(n):!1}function Ca(n){const[r,e]=n.pattern.split("/*",2),t=r.split("/").filter(Boolean);return t.reduce((o,i)=>o+(i.startsWith(":")?2:3),t.length-(e===void 0?0:1))}function Zo(n){const r=new Map,e=mt();return new Proxy({},{get(t,o){return r.has(o)||_o(e,()=>r.set(o,X(()=>n()[o]))),r.get(o)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(n())}})}function pn(n){let r=/(\/?\:[^\/]+)\?/.exec(n);if(!r)return[n];let e=n.slice(0,r.index),t=n.slice(r.index+r[0].length);const o=[e,e+=r[1]];for(;r=/^(\/\:[^\/]+)\?/.exec(t);)o.push(e+=r[1]),t=t.slice(r[0].length);return pn(t).reduce((i,s)=>[...i,...o.map(a=>a+s)],[])}const Ta=100,Jo=Ro(),ei=Ro(),gn=()=>Sa(Io(Jo),"<A> and 'use' router primitives can be only used inside a Route."),mn=()=>gn().navigatorFactory(),ti=()=>gn().location,_a=(n,r)=>{const e=ti(),t=X(()=>pn(n()).map(o=>qo(o,void 0,r)));return X(()=>{for(const o of t()){const i=o(e.pathname);if(i)return i}})},Ra=()=>gn().params;function Ia(n,r=""){const{component:e,load:t,children:o,info:i}=n,s=!o||Array.isArray(o)&&!o.length,a={key:n,component:e,load:t,info:i};return ri(n.path).reduce((l,c)=>{for(const d of pn(c)){const f=Aa(r,d);let g=s?f:f.split("/*",1)[0];g=g.split("/").map(w=>w.startsWith(":")||w.startsWith("*")?w:encodeURIComponent(w)).join("/"),l.push({...a,originalPath:c,pattern:g,matcher:qo(g,!s,n.matchFilters)})}return l},[])}function ka(n,r=0){return{routes:n,score:Ca(n[n.length-1])*1e4-r,matcher(e){const t=[];for(let o=n.length-1;o>=0;o--){const i=n[o],s=i.matcher(e);if(!s)return null;t.unshift({...s,route:i})}return t}}}function ri(n){return Array.isArray(n)?n:[n]}function ni(n,r="",e=[],t=[]){const o=ri(n);for(let i=0,s=o.length;i<s;i++){const a=o[i];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=Ia(a,r);for(const c of l){e.push(c);const d=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!d)ni(a.children,c.pattern,e,t);else{const f=ka([...e],t.length);t.push(f)}e.pop()}}}return e.length?t:t.sort((i,s)=>s.score-i.score)}function On(n,r){for(let e=0,t=n.length;e<t;e++){const o=n[e].matcher(r);if(o)return o}return[]}function Ba(n,r){const e=new URL(Vo),t=X(l=>{const c=n();try{return new URL(c,e)}catch(d){return console.error("Invalid path ".concat(c)),l}},e,{equals:(l,c)=>l.href===c.href}),o=X(()=>t().pathname),i=X(()=>t().search,!0),s=X(()=>t().hash),a=()=>"";return{get pathname(){return o()},get search(){return i()},get hash(){return s()},get state(){return r()},get key(){return a()},query:Zo(gt(i,()=>Go(t())))}}let We;function Ea(n,r,e,t={}){const{signal:[o,i],utils:s={}}=n,a=s.parsePath||(B=>B),l=s.renderPath||(B=>B),c=s.beforeLeave||jo(),d=rr("",t.base||"");if(d===void 0)throw new Error("".concat(d," is not a valid base path"));d&&!o().value&&i({value:d,replace:!0,scroll:!1});const[f,g]=Y(!1),w=async B=>{g(!0);try{await Wi(B)}finally{g(!1)}},[x,y]=Y(o().value),[b,C]=Y(o().state),v=Ba(x,b),m=[],p=Y([]),S=X(()=>On(r(),v.pathname)),I=Zo(()=>{const B=S(),F={};for(let z=0;z<B.length;z++)Object.assign(F,B[z].params);return F}),T={pattern:d,path:()=>d,outlet:()=>null,resolvePath(B){return rr(d,B)}};return Re(()=>{const{value:B,state:F}=o();te(()=>{B!==x()&&w(()=>{We="native",y(B),C(F),p[1]([])}).then(()=>{We=void 0})})}),{base:T,location:v,params:I,isRouting:f,renderPath:l,parsePath:a,navigatorFactory:A,matches:S,beforeLeave:c,preloadRoute:N,singleFlight:t.singleFlight===void 0?!0:t.singleFlight,submissions:p};function _(B,F,z){te(()=>{if(typeof F=="number"){F&&(s.go?s.go(F):console.warn("Router integration does not support relative routing"));return}const{replace:M,resolve:D,scroll:$,state:ie}={replace:!1,resolve:!0,scroll:!0,...z},J=D?B.resolvePath(F):rr("",F);if(J===void 0)throw new Error("Path '".concat(F,"' is not a routable path"));if(m.length>=Ta)throw new Error("Too many redirects");const ce=x();if((J!==ce||ie!==b())&&!xa){if(c.confirm(J,z)){const Ce=m.push({value:ce,replace:M,scroll:$,state:b()});w(()=>{We="navigate",y(J),C(ie),p[1]([])}).then(()=>{m.length===Ce&&(We=void 0,E({value:J,state:ie}))})}}})}function A(B){return B=B||Io(ei)||T,(F,z)=>_(B,F,z)}function E(B){const F=m[0];F&&((B.value!==F.value||B.state!==F.state)&&i({...B,replace:F.replace,scroll:F.scroll}),m.length=0)}function N(B,F){const z=On(r(),B.pathname),M=We;We="preload";for(let D in z){const{route:$,params:ie}=z[D];$.component&&$.component.preload&&$.component.preload();const{load:J}=$;F&&J&&_o(e(),()=>J({params:ie,location:{pathname:B.pathname,search:B.search,hash:B.hash,query:Go(B),state:null,key:""},intent:"preload"}))}We=M}}function Na(n,r,e,t){const{base:o,location:i,params:s}=n,{pattern:a,component:l,load:c}=t().route,d=X(()=>t().path);l&&l.preload&&l.preload();const f=c?c({params:s,location:i,intent:We||"initial"}):void 0;return{parent:r,pattern:a,path:d,outlet:()=>l?Fo(l,{params:s,location:i,data:f,get children(){return e()}}):e(),resolvePath(w){return rr(o.path(),w,d())}}}const La=n=>r=>{const{base:e}=r,t=rn(()=>r.children),o=X(()=>ni(t(),r.base||""));let i;const s=Ea(n,o,()=>i,{base:e,singleFlight:r.singleFlight});return n.create&&n.create(s),R(Jo.Provider,{value:s,get children(){return R(Fa,{routerState:s,get root(){return r.root},get load(){return r.rootLoad},get children(){return[hn(()=>(i=mt())&&null),R(Ma,{routerState:s,get branches(){return o()}})]}})}})};function Fa(n){const r=n.routerState.location,e=n.routerState.params,t=X(()=>n.load&&te(()=>n.load({params:e,location:r,intent:"preload"})));return R(wr,{get when(){return n.root},keyed:!0,get fallback(){return n.children},children:o=>R(o,{params:e,location:r,get data(){return t()},get children(){return n.children}})})}function Ma(n){const r=[];let e;const t=X(gt(n.routerState.matches,(o,i,s)=>{let a=i&&o.length===i.length;const l=[];for(let c=0,d=o.length;c<d;c++){const f=i&&i[c],g=o[c];s&&f&&g.route.key===f.route.key?l[c]=s[c]:(a=!1,r[c]&&r[c](),He(w=>{r[c]=w,l[c]=Na(n.routerState,l[c-1]||n.routerState.base,Wn(()=>t()[c+1]),()=>n.routerState.matches()[c])}))}return r.splice(o.length).forEach(c=>c()),s&&a?s:(e=l[0],l)}));return Wn(()=>t()&&e)()}const Wn=n=>()=>R(wr,{get when(){return n()},keyed:!0,children:r=>R(ei.Provider,{value:r,get children(){return r.outlet()}})}),se=n=>{const r=rn(()=>n.children);return on(n,{get children(){return r()}})};function za([n,r],e,t){return[e?()=>e(n()):n,t?o=>r(t(o)):r]}function Pa(n){if(n==="#")return null;try{return document.querySelector(n)}catch(r){return null}}function Da(n){let r=!1;const e=o=>typeof o=="string"?{value:o}:o,t=za(Y(e(n.get()),{equals:(o,i)=>o.value===i.value}),void 0,o=>(!r&&n.set(o),o));return n.init&&ke(n.init((o=n.get())=>{r=!0,t[1](e(o)),r=!1})),La({signal:t,create:n.create,utils:n.utils})}function Oa(n,r,e){return n.addEventListener(r,e),()=>n.removeEventListener(r,e)}function Wa(n,r){const e=Pa("#".concat(n));e?e.scrollIntoView():r&&window.scrollTo(0,0)}const Ua=new Map;function Ya(n=!0,r=!1,e="/_server"){return t=>{const o=t.base.path(),i=t.navigatorFactory(t.base);let s={};function a(x){return x.namespaceURI==="http://www.w3.org/2000/svg"}function l(x){if(x.defaultPrevented||x.button!==0||x.metaKey||x.altKey||x.ctrlKey||x.shiftKey)return;const y=x.composedPath().find(S=>S instanceof Node&&S.nodeName.toUpperCase()==="A");if(!y||r&&!y.hasAttribute("link"))return;const b=a(y),C=b?y.href.baseVal:y.href;if((b?y.target.baseVal:y.target)||!C&&!y.hasAttribute("state"))return;const m=(y.getAttribute("rel")||"").split(/\s+/);if(y.hasAttribute("download")||m&&m.includes("external"))return;const p=b?new URL(C,document.baseURI):new URL(C);if(!(p.origin!==window.location.origin||o&&p.pathname&&!p.pathname.toLowerCase().startsWith(o.toLowerCase())))return[y,p]}function c(x){const y=l(x);if(!y)return;const[b,C]=y,v=t.parsePath(C.pathname+C.search+C.hash),m=b.getAttribute("state");x.preventDefault(),i(v,{resolve:!1,replace:b.hasAttribute("replace"),scroll:!b.hasAttribute("noscroll"),state:m&&JSON.parse(m)})}function d(x){const y=l(x);if(!y)return;const[b,C]=y;s[C.pathname]||t.preloadRoute(C,b.getAttribute("preload")!=="false")}function f(x){const y=l(x);if(!y)return;const[b,C]=y;s[C.pathname]||(s[C.pathname]=setTimeout(()=>{t.preloadRoute(C,b.getAttribute("preload")!=="false"),delete s[C.pathname]},200))}function g(x){const y=l(x);if(!y)return;const[,b]=y;s[b.pathname]&&(clearTimeout(s[b.pathname]),delete s[b.pathname])}function w(x){if(x.defaultPrevented)return;let y=x.submitter&&x.submitter.hasAttribute("formaction")?x.submitter.getAttribute("formaction"):x.target.getAttribute("action");if(!y)return;if(!y.startsWith("https://action/")){const C=new URL(y,Vo);if(y=t.parsePath(C.pathname+C.search),!y.startsWith(e))return}if(x.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const b=Ua.get(y);if(b){x.preventDefault();const C=new FormData(x.target);x.submitter&&x.submitter.name&&C.append(x.submitter.name,x.submitter.value),b.call({r:t,f:x.target},C)}}ga(["click","submit"]),document.addEventListener("click",c),n&&(document.addEventListener("mouseover",f),document.addEventListener("mouseout",g),document.addEventListener("focusin",d),document.addEventListener("touchstart",d)),document.addEventListener("submit",w),ke(()=>{document.removeEventListener("click",c),n&&(document.removeEventListener("mouseover",f),document.removeEventListener("mouseout",g),document.removeEventListener("focusin",d),document.removeEventListener("touchstart",d)),document.removeEventListener("submit",w)})}}function $a(n){const r=n.replace(/^.*?#/,"");if(!r.startsWith("/")){const[,e="/"]=window.location.hash.split("#",2);return"".concat(e,"#").concat(r)}return r}function Ha(n){const r=()=>window.location.hash.slice(1),e=jo();return Da({get:r,set({value:t,replace:o,scroll:i,state:s}){o?window.history.replaceState(ya(s),"","#"+t):window.location.hash=t;const a=t.indexOf("#"),l=a>=0?t.slice(a+1):"";Wa(l,i),fn()},init:t=>Oa(window,"hashchange",va(t,o=>!e.confirm(o&&o<0?o:r()))),create:Ya(n.preload,n.explicitLinks,n.actionBase),utils:{go:t=>window.history.go(t),renderPath:t=>"#".concat(t),parsePath:$a,beforeLeave:e}})(n)}var Qa=!!qi,Xa=Qa?n=>mt()?ke(n):n:ke;function Ka(n,r,e,t){return n.addEventListener(r,e,t),Xa(n.removeEventListener.bind(n,r,e,t))}function ja(n,r=mt()){let e=0,t,o;return()=>(e++,ke(()=>{e--,queueMicrotask(()=>{!e&&o&&(o(),o=t=void 0)})}),o||He(i=>t=n(o=i),r),t)}var Va=ja(()=>{const[n,r]=Y(null);return Ka(window,"keydown",e=>{r(e),setTimeout(()=>r(null))}),n});function Kt(n){return typeof n=="function"}function Ga(n){return Array.isArray(n)}const jt={ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Enter",l:"Last"," ":"Space",Backspace:"Back",Escape:"Escape"},[ur,qa]=Y([]),Za=n=>{const r=Va();if(n)for(const[e,t]of Object.entries(n))Ga(t)?t.forEach(o=>{jt[o]=e}):jt[t]=e;return Je(gt(an,(e,t,o=[])=>{let i=e;const s=[];for(;i;)i.states.has("focus")||(i.states.add("focus"),Kt(i.onFocus)&&i.onFocus.call(i,e,t)),s.push(i),i=i.parent;return o.forEach(a=>{s.includes(a)||(a.states.remove("focus"),Kt(a.onBlur)&&a.onBlur.call(a,e,t))}),qa(s),s},{defer:!0})),Je(()=>{const e=r();if(e){const t=jt[e.key]||jt[e.keyCode];te(()=>{const o=ur();let i;for(const s of o){if(i=i||s,t){const a=s["on".concat(t)];if(Kt(a)&&a.call(s,e,s,i)===!0)break}else console.log("Unhandled key event: ".concat(e.key||e.keyCode));if(Kt(s.onKeyPress)&&s.onKeyPress.call(s,e,t,s,i)===!0)break}return!1})}}),ur};function Ja(n,r){const e=r();let t,o,i,s;Array.isArray(e)?e.length===2?(t=s=e[0],o=i=e[1]):e.length===3?(t=e[0],o=i=e[1],s=e[2]):[t,i,s,o]=e:t=i=s=o=e,n.onBeforeLayout=(a,l)=>{if(l){n.width=n.children.reduce((f,g)=>f+(g.width||0),0)+o+i;const c=n.children[0];c&&(c.x=o,c.marginLeft=o);let d=0;return n.children.forEach(f=>{f.y=t,f.marginTop=t,d=Math.max(d,f.height||0)}),n.height=d+t+s,!0}}}function el(n=[]){const r=[];let e;for(e=0;e<n.length;e++){const t=n[e];if(typeof t=="string"&&!t.includes("PAUSE-"))r.push(n[e]);else break}return[r.join(",\b ")].concat(n.slice(e))}function Un(n){return new Promise(r=>{setTimeout(r,n)})}function tl(n,r,e="en-US"){const t=window.speechSynthesis;return new Promise((o,i)=>{const s=new SpeechSynthesisUtterance(n);s.lang=e,s.onend=()=>{o()},s.onerror=a=>{i(a)},r.push(s),t.speak(s)})}function Gr(n,r,e=!0){const t=window.speechSynthesis,o=el(Array.isArray(n)?n:[n]),i=[],s=[];let a=!0;return{series:(async()=>{try{for(;a&&o.length;){const c=await Promise.resolve(o.shift());if(a){if(typeof c=="string"&&c.includes("PAUSE-")){let d=Number(c.split("PAUSE-")[1])*1e3;isNaN(d)&&(d=0),await Un(d)}else if(typeof c=="string"&&c.length){let f=3;for(;a&&f>0;)try{await tl(c,s,r),f=0}catch(g){if(g instanceof SpeechSynthesisErrorEvent)if(g.error==="network")f--,console.warn("Speech synthesis network error. Retries left: ".concat(f)),await Un(500*(3-f));else if(g.error==="canceled"||g.error==="interrupted")f=0;else throw new Error("SpeechSynthesisErrorEvent: ".concat(g.error));else throw g}}else if(typeof c=="function"){const d=Gr(c(),r,!1);i.push(d),await d.series}else if(Array.isArray(c)){const d=Gr(c,r,!1);i.push(d),await d.series}}else break}}finally{a=!1}})(),get active(){return a},append:c=>{o.push(c)},cancel:()=>{a&&(e&&t.cancel(),i.forEach(c=>{c.cancel()}),a=!1)}}}let Vt;function rl(n,r="en-US"){return Vt&&Vt.cancel(),Vt=Gr(n,r),Vt}var nl=(n,r)=>{let e;const t=()=>clearTimeout(e);return mt()&&ke(t),Object.assign((...i)=>{e!==void 0&&t(),e=setTimeout(()=>n(...i),r)},{clear:t})};let qr,kt=[],_e,Zr=!1;const ol=3e5;function Yn(n,r){const e=nl(n,r);let t;const o=i=>{t=i,e(i)};return o.flush=()=>{e.clear(),n(t)},o.clear=e.clear,o}function bt(n){return n.id||n.name}function il(n=[]){if(!ne.onFocusChange||!ne.enabled)return;const r=n.every(i=>!i.loading),e=n.filter(i=>!kt.includes(i));if(qr(),!r&&ne.onFocusChange){ne.onFocusChange([]);return}kt=n.slice(0);const t=[],o=e.reduce((i,s)=>(s.announce?(i.push([bt(s),"Announce",s.announce]),t.push(s.announce)):s.title?(i.push([bt(s),"Title",s.title]),t.push(s.title)):i.push([bt(s),"No Announce",""]),i),[]);if(e.reverse().reduce((i,s)=>(s.announceContext?(i.push([bt(s),"Context",s.announceContext]),t.push(s.announceContext)):i.push([bt(s),"No Context",""]),i),o),ne.debug&&console.table(o),t.length)return ne.speak(t.reduce((i,s)=>i.concat(s),[]))}function sl(n){if(!Zr)return _e=rl(n)}const ne={debug:!1,enabled:!0,cancel:function(){_e&&_e.cancel()},clearPrevFocus:function(n=0){kt=kt.slice(0,n),qr()},speak:function(n,{append:r=!1,notification:e=!1}={}){return ne.onFocusChange&&ne.enabled&&(ne.onFocusChange.flush(),r&&_e&&_e.active?_e.append(n):(ne.cancel(),sl(n)),e&&(Zr=!0,_e==null||_e.series.finally(()=>{Zr=!1,ne.refresh()}).catch(console.error))),_e},refresh:function(n=0){ne.clearPrevFocus(n),ne.onFocusChange&&ne.onFocusChange(te(()=>ur()))},setupTimers:function({focusDebounce:n=400,focusChangeTimeout:r=ol}={}){ne.onFocusChange=Yn(il,n),qr=Yn(()=>{kt=[]},r)}},al=()=>(ne.setupTimers(),Je(gt(ur,ne.onFocusChange,{defer:!0})),ne);function ll(n,r){const e=Fe.createTexture("ImageTexture",{src:n});return r.reduce((t,o)=>{const{x:i,y:s,width:a,height:l}=o;return t[o.name]=Fe.createTexture("SubTexture",{texture:e,x:i,y:s,width:a,height:l}),t},{})}const[cl,dl]=Y(""),h={name:"Base Lightning TV",alpha:{primary:1,secondary:.7,tertiary:.1,inactive:.5,full:1,none:0,alpha1:.1,alpha2:.3,alpha3:.5,alpha4:.7,alpha5:.9,alpha6:.95},animation:{duration:{none:0,xfast:100,fast:250,normal:500,slow:750,xslow:900},delay:{none:0,xfast:10,fast:25,normal:50,slow:75,xslow:90},expressive:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standard:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utility:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25}},asset:{arrowLeft:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAi0lEQVRIDWNgGAWjIfD//38JID5Fk5AAGqwKxPeA+D/VLQCaaQLEr0CGgwBVLQCa5wbEn0EGwwDVLAAaGA3Ev2AGw2iqWAA0rBiI/8EMRaYptgBoWDeygehsci1gIlcjWfqArqZdEMFcBLSEdpGMZAntkimSJbTLaEiW0K6oQLKEdoUdzJJRemiHAAD4n+yzPWCs7QAAAABJRU5ErkJggg==",arrowRight:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAg0lEQVRIDWNgGAWjIYArBP7//38KiCVwyVMsDjQcBO4BsSrFhmEzAGw8hHgFpEywqaFIDMkCEPMzELtRZCC6ZjQLQNxfQByNro5sPhYLQEL/gLiYbEORNeKwACbcDVPLBGMMOhrmVDSapkFE00imaTKlaUajaVFB28Ju0CXrUQfhDAEAEgHss6NhpLQAAAAASUVORK5CYII=",backspaceOutline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC",check:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACtSURBVHgBvdPdDcIgEAfwoy8Nb45QN3AGF2s36Ahu4gpuIDoBfSgfpdoTlCbEWEMh6T8hFzjyg5AAkBHOcQe5UWqspRx435sDpMYj6IYQwwVSEiJ2MKVUBWuzLSLl2HL+uxmNCGFO8yaL7RHxve6qRZoAuS4hxac8735elWVx7jrtMKL1o0Gcat9jhExHSukN/kUIFZ7MpDRtzE1isDRkAUtDvrA8ZI597FUf8gWH9P0b4gko9wAAAABJRU5ErkJggg=="},color:{palette:{},white:"0xffffffff",black:"0x000000ff",grey:"0x929096ff",red:"0xe74c3cff",orange:"0xdc7633ff",yellow:"0xf7dc6fff",green:"0x2ecc71ff",blue:"0x93a9fdff",purple:"0x663399ff",overlay:"0x181819b3",material:"0x181819ff",materialNeutral:"0x181819ff",materialNeutralElevated:"0x373639ff",materialInverse:"0xf8f7faff",materialInverseElevated:"0xffffffff",materialBrand:"0x000033ff",materialBrandElevated:"0x242a65ff",textNeutral:"0xf8f7faff",textNeutralSecondary:"0xf8f7fab3",textNeutralTertiary:"0xf8f7fa1a",textNeutralDisabled:"0xf8f7fa80",textInverse:"0x181819ff",textInverseSecondary:"0x181819b3",textInverseTertiary:"0x1818191a",textInverseDisabled:"0x18181980",textBrand:"0x93a9fdff",textBrandSecondary:"0x93a9fdb3",textBrandTertiary:"0x93a9fd1a",textBrandDisabled:"0x93a9fd80",textPositive:"0x2ecc71ff",textNegative:"0xe74c3cff",textInfo:"0x93a9fdff",textCaution:"0xdc7633ff",fillTransparent:"0xffffff0",fillNeutral:"0xf8f7faff",fillNeutralSecondary:"0xf8f7fab3",fillNeutralTertiary:"0xf8f7fa1a",fillNeutralDisabled:"0xf8f7fa80",fillInverse:"0x181819ff",fillInverseSecondary:"0x181819b3",fillInverseTertiary:"0x1818191a",fillInverseDisabled:"0x18181980",fillBrand:"0x93a9fdff",fillBrandSecondary:"0x93a9fdb3",fillBrandTertiary:"0x93a9fd1a",fillBrandDisabled:"0x93a9fd80",fillPositive:"0x2ecc71ff",fillNegative:"0xe74c3cff",fillInfo:"0x93a9fdff",fillCaution:"0xdc7633ff",strokeNeutral:"0xf8f7faff",strokeNeutralSecondary:"0xf8f7fab3",strokeNeutralTertiary:"0xf8f7fa1a",strokeNeutralDisabled:"0xf8f7fa80",strokeInverse:"0x181819ff",strokeInverseSecondary:"0x181819b3",strokeInverseTertiary:"0x1818191a",strokeInverseDisabled:"0x18181980",strokeBrand:"0x93a9fdff",strokeBrandSecondary:"0x93a9fdb3",strokeBrandTertiary:"0x93a9fd1a",strokeBrandDisabled:"0x93a9fd80",strokePositive:"0x2ecc71ff",strokeNegative:"0xe74c3cff",strokeInfo:"0x93a9fdff",strokeCaution:"0xdc7633ff",interactiveNeutral:"0xffffff1a",interactiveNeutralFocus:"0xffffffff",interactiveNeutralFocusSoft:"0xffffff1a",interactiveInverse:"0x48474b1a",interactiveInverseFocus:"0x48474bff",interactiveInverseFocusSoft:"0x48474b1a",interactiveBrand:"0xbecffe1a",interactiveBrandFocus:"0xbecffeff",interactiveBrandFocusSoft:"0xbecffe1a",shadowNeutral:"0x000000b3",shadowNeutralFocus:"0x000000b3",shadowNeutralFocusSoft:"0x000000b3",shadowNeutralText:"0x000000ff",shadowInverse:"0x000000b3",shadowInverseFocus:"0x000000b3",shadowInverseFocusSoft:"0x000000b3",shadowInverseText:"0x000000ff",shadowBrand:"0x000000b3",shadowBrandFocus:"0x000000b3",shadowBrandFocusSoft:"0x000000b3",shadowBrandText:"0x000000ff"},font:[],layout:{columnCount:10,focusScale:1.2,gutterX:20,gutterY:20,marginX:150,marginY:150,safe:50,screenW:1920,screenH:1080},radius:{none:0,xs:2,sm:4,md:8,lg:16,xl:24},spacer:{none:0,xxs:2,xs:4,sm:8,md:10,lg:20,xl:30,xxl:40,xxxl:50},stroke:{none:0,sm:2,md:4,lg:6,xl:8},typography:{display1:{fontFamily:"Arial",fontSize:75,lineHeight:85,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},display2:{fontFamily:"Arial",fontSize:50,lineHeight:60,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},display3:{fontFamily:"Arial",fontSize:56,fontWeight:400,lineHeight:68,verticalAlign:"middle",textBaseline:"bottom"},display4:{fontFamily:"Arial",fontSize:48,fontWeight:400,lineHeight:64,verticalAlign:"middle",textBaseline:"bottom"},headline1:{fontFamily:"Arial",fontSize:35,fontWeight:500,lineHeight:48,verticalAlign:"middle",textBaseline:"bottom"},headline2:{fontFamily:"Arial",fontSize:30,fontWeight:500,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},headline3:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:36,verticalAlign:"middle",textBaseline:"bottom"},body1:{fontFamily:"Arial",fontSize:25,fontWeight:300,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},body2:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},body3:{fontFamily:"Arial",fontSize:20,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button1:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button2:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},callout1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},caption1:{fontFamily:"Arial",fontSize:15,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},tag1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},footnote1:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:30,verticalAlign:"middle",textBaseline:"bottom"},subtitle1:{fontFamily:"Arial",fontSize:32,fontWeight:400,lineHeight:36,verticalAlign:"middle",textBaseline:"bottom"},subtitle2:{fontFamily:"Arial",fontSize:28,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},navigation:{fontFamily:"Arial",fontSize:28,fontWeight:400,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"}},componentConfig:{Keyboard:{base:{keyProps:{delete:{title:null,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC"}}}}}};function hl(){let n,r,e,t=0;const o=1,i={duration:750,easing:"ease-in-out"},s={alpha:o,color:4294967295};function a(l){if(l.startsWith("#")){n.color=ee(l),n.src="",n.alpha=1,t=1,r.alpha=0,e.alpha=0;return}else n.color=4294967295,e.alpha=1;if(t===0){n.src=l,t=1;return}if(t===1){r.src=l,t=2,r.alpha=0,r.animate({alpha:o},i).start(),n.animate({alpha:0},i).start();return}t===2&&(n.src=l,t=1,n.alpha=0,n.animate({alpha:o},i).start(),r.animate({alpha:0},i).start())}return Je(gt(cl,l=>{a(l)},{defer:!0})),R(W,{width:1920,height:1080,zIndex:-5,get children(){return[R(W,{ref(l){var c=n;typeof c=="function"?c(l):n=l},style:s}),R(W,{ref(l){var c=r;typeof c=="function"?c(l):r=l},style:s,alpha:0}),R(W,{ref(l){var c=e;typeof c=="function"?c(l):e=l},src:"./assets/hero-mask-inverted.png",get color(){return ee(h.color.materialBrand)},width:1920,height:1080})]}})}var $n,Hn,Qn,Xn,Kn,jn,Vn,Gn,qn,Zn,Jn,eo,to,ro,no,oo,io,so,ao;function Gt(n){if(!n||!n[Symbol.iterator])throw new Error("objectFromEntries requires a single iterable argument");const r={};for(const[e,t]of n)r[e]=t;return r}const ul=["focus","disabled"],fl=["brand","inverse","neutral"];function P({themeKeys:n,base:r,modes:e,tones:t,themeStyles:o,modeKeys:i=ul,toneKeys:s=fl},a=!1){const l=(x,y,b)=>{const C=s.map(v=>{var S,I;const m={};return new Set([].concat.apply([],[(S=x==null?void 0:x[v])!=null?S:{},(I=y==null?void 0:y[v])!=null?I:{}].map(Object.keys))).forEach(T=>{var E;var _,A;i.includes(T)||(m[T]=(E=(_=y==null?void 0:y[v])==null?void 0:_[T])!=null?E:(A=x==null?void 0:x[v])==null?void 0:A[T])}),i.forEach(T=>{var _,A;m[T]={...b[T],...(_=x==null?void 0:x[v])==null?void 0:_[T],...(A=y==null?void 0:y[v])==null?void 0:A[T]}}),[v,m]});return Gt(C)},c=(x,y)=>{const b=i.map(v=>[v,{...x==null?void 0:x[v],...y==null?void 0:y[v]}]);return Gt(b)},d=(x,y)=>({...x,...y.base}),f=x=>Gt(Object.entries(n).filter(([y,b])=>x[b]).map(([y,b])=>[y,x[b]])),g=x=>Gt(Object.entries(x).map(([b,C])=>{const v=f(C);return Object.entries(C).filter(([m,p])=>i.includes(m)).forEach(([m,p])=>{v[m]=f(p)}),[b,v]}));return((x,y,b)=>{const C=g(o);a&&console.log(C);const v=d(x,C);a&&console.log(v);const m=c(y,C);a&&console.log(m);const p=l(b,C,m);return a&&console.log(p),{base:{...v,...m},tones:p}})(r,e,t)}function fr(n=0){return(r,e,t=0,o)=>{var b,C,v,m;if(r.children.length===0)return;const i=r.flexDirection==="row"?"width":"height",s=r.flexDirection==="row"?"x":"y",a=r.gap||0,l=r.scroll||"auto",[c,d]=pl(r);let f=(b=r[s])!=null?b:0;const g=(C=e==null?void 0:e[s])!=null?C:0,w=(v=e==null?void 0:e[i])!=null?v:0,x=o===void 0?"none":t>o?"positive":"negative";let y=f;if(l==="auto")r.scrollIndex!=null&&r.scrollIndex>=0?r.selected>=r.scrollIndex&&(x==="positive"?y=f-w-a:y=f+w+a):(Math.abs(f)+d<c.position+c.size||g<Math.abs(f))&&(y=-g+n);else if(l==="always"||l==="edge"&&x==="negative"&&Math.abs(f)>g)y=-g+n;else if(l==="edge"&&x==="positive"&&Math.abs(f)+d<g+w)y=f-w-a;else if(l==="edge"&&x==="none"){let p=0,S,I;for(;p<r.children.length&&Math.abs(f)+d<g+w;)S=r.children[p++],I=(m=S[i])!=null?m:0,f-=I+a;y=f}s==="x"&&r.x!==y?r.x=y:s==="y"&&r.y!==y&&(r.y=y)}}function pl(n){var t,o,i,s,a,l;let r,e;return n.flexDirection==="row"?(r={position:(t=n.children[n.children.length-1].x)!=null?t:0,size:(o=n.children[n.children.length-1].width)!=null?o:0},e=(i=n.width)!=null?i:0):(r={position:(s=n.children[n.children.length-1].y)!=null?s:0,size:(a=n.children[n.children.length-1].height)!=null?a:0},e=(l=n.height)!=null?l:0),[r,e]}function $e(...n){const r=n.filter(e=>typeof e=="function");if(r.length!==0)return r.length===1?r[0]:function(...e){let t;for(const o of r)if(t=o.apply(this,e),t===!0)return t;return t}}function oi(){if(!this||this.selected===void 0||this.children.length===0)return!1;let n=this.children[this.selected];for(;n!=null&&n.skipFocus;)this.selected++,n=this.children[this.selected];return n instanceof Se?(n.setFocus(),!0):!1}function pr(n){return function(){var r,e,t;const o=this.children.length,i=this.wrap,s=this.selected||0;if(o===0)return!1;if(n==="right"||n==="down")do if(this.selected=(this.selected||0)%o+1,this.selected>=o){if(!i){this.selected=void 0;break}this.selected=0}while((r=this.children[this.selected])!=null&&r.skipFocus);else if(n==="left"||n==="up")do if(this.selected=(this.selected||0)%o-1,this.selected<0){if(!i){this.selected=void 0;break}this.selected=o-1}while((e=this.children[this.selected])!=null&&e.skipFocus);if(this.selected===void 0&&(this.selected=s,(t=this.children[this.selected])!=null&&t.states.has("focus")))return!1;const a=this.children[this.selected];if(this.onSelectedChanged&&this.onSelectedChanged.call(this,this,a,this.selected,s),this.plinko&&s!==void 0){const c=this.children[s].selected||0;a.selected=c<a.children.length?c:a.children.length-1}return a.setFocus(),!0}}function gl(n=1){const r=h.layout.screenW,e=h.layout.columnCount,t=h.layout.marginX,o=h.layout.gutterX;if(n<1||n>e){console.error("Column expects a number between 1 & ".concat(e,". Received ").concat(n));return}const i=r-t*2,s=(n-1)*o;return(i-s)/n}const{Artwork:{defaultTone:Ld,...ml}={styles:{}}}=($n=h)==null?void 0:$n.componentConfig,xl={themeKeys:{fillColor:"fillColor",scale:"imageScale",pivotX:"imageScalePivotX",pivotY:"imageScalePivotY"},base:{fallbackSrc:void 0,fillColor:h.color.overlay,gradientColor:h.color.material,pivotX:.5,pivotY:.5,scale:void 0,borderRadius:h.radius.md},themeStyles:ml};P(xl);const{Badge:{defaultTone:Fd,...xn}={styles:{}}}=(Hn=h)==null?void 0:Hn.componentConfig,yl={themeKeys:{color:"backgroundColor"},base:{color:h.color.fillInverseSecondary,borderRadius:h.radius.sm,border:{color:h.color.strokeInverse,width:h.stroke.sm},display:"flex",justifyContent:"spaceEvenly",padding:[h.spacer.md-h.stroke.sm,h.spacer.xs+h.stroke.sm,h.spacer.md+h.stroke.sm,h.spacer.md+h.stroke.sm]},tones:{inverse:{color:h.color.fillNeutralSecondary,borderRadius:h.radius.sm,border:{color:h.color.strokeInverseSecondary,width:h.stroke.sm}},brand:{color:h.color.fillBrand,borderRadius:h.radius.sm,border:{color:h.color.strokeInverseSecondary,width:h.stroke.sm}}},themeStyles:xn},vl={themeKeys:{color:"textColor"},base:{...h.typography.tag1,color:h.color.textNeutral},tones:{inverse:{color:h.color.textInverse},brand:{color:h.color.textNeutral}},themeStyles:xn},wl={themeKeys:{color:"iconColor"},base:{color:h.color.textNeutral},tones:{inverse:{color:h.color.textInverse},brand:{color:h.color.textNeutral}},themeStyles:xn};P(yl);P(wl);P(vl);const{Button:{defaultTone:bl,...yn}={styles:{}}}=(Qn=h)==null?void 0:Qn.componentConfig,{Surface:{surfaceDefaultTone:Sl,...vn}={styles:{}}}=(Xn=h)==null?void 0:Xn.componentConfig,Al={themeKeys:{textAlign:"textAlign",borderRadius:"radius",color:"backgroundColor",justifyContent:"justifyContent"},base:{height:h.typography.button1.lineHeight+h.spacer.xl*2,display:"flex",padding:[h.spacer.xxxl,h.spacer.xl],color:h.color.interactiveNeutral,justifyContent:"center",alignItems:"center",borderRadius:h.radius.sm,contentColor:h.color.fillNeutral},modes:{focus:{color:h.color.interactiveNeutralFocus,contentColor:h.color.fillInverse},disabled:{color:h.color.fillNeutralDisabled}},tones:{inverse:{color:h.color.interactiveInverse},brand:{color:h.color.interactiveBrand,focus:{color:h.color.fillNeutral}}},themeStyles:{...vn,...yn}},Cl={themeKeys:{color:"contentColor"},base:{color:h.color.textNeutral},modes:{focus:{color:h.color.textInverse},disabled:{color:h.color.textNeutralDisabled}},tones:{inverse:{color:h.color.fillNeutral},brand:{color:h.color.fillBrand,focus:{color:h.color.fillBrand}}},themeStyles:{...vn,...yn}},Tl={themeKeys:{color:"textColor"},base:{textAlign:"left",color:h.color.textNeutral,...h.typography.button1},modes:{focus:{color:h.color.textInverse},disabled:{color:h.color.textNeutralDisabled}},tones:{inverse:{color:h.color.fillNeutral},brand:{color:h.color.fillBrand,focus:{color:h.color.fillBrand}}},themeStyles:{...vn,...yn}},_l=P(Al),Rl=P(Cl),Il=P(Tl),rt={tone:bl||Sl||"neutral",Container:_l,Content:Rl,Text:Il},Md=n=>R(W,ge(n,{get style(){var e;var r;return[n.style,(r=rt.Container.tones)==null?void 0:r[(e=n.tone)!=null?e:rt.tone],rt.Container.base]},forwardStates:!0,get children(){return R(Q,{get style(){var r;return[rt.Text.tones[(r=n.tone)!=null?r:rt.tone],rt.Text.base]},get children(){return n.children}})}})),{Checkbox:{defaultTone:zd,...ii}={styles:{}}}=(Kn=h)==null?void 0:Kn.componentConfig,Ve=h.stroke.sm,Ne=h.spacer.xxl,kl={themeKeys:{color:"color",borderRadius:"borderRadius",border:"border",justifyContent:"justifyContent"},base:{width:Ne,height:Ne,display:"flex",justifyContent:"center",color:h.color.fillNeutral,alignItems:"center",borderRadius:Ne/4,border:{color:h.color.strokeInverse,width:Ve}},modes:{disabled:{alpha:h.alpha.inactive}},tones:{brand:{borderRadius:Ne/4,border:{color:h.color.strokeNeutralSecondary,width:Ve},color:h.color.fillNeutralSecondary,checked:{borderRadius:Ne/4,border:{color:h.color.strokeNeutralSecondary,width:Ve},color:h.color.fillBrand}},neutral:{borderRadius:Ne/4,border:{color:h.color.strokeNeutralSecondary,width:Ve},color:h.color.fillInverseSecondary,checked:{borderRadius:Ne/4,border:{color:h.color.strokeNeutralSecondary,width:Ve},color:h.color.fillNeutral}},inverse:{borderRadius:Ne/4,border:{color:h.color.strokeInverseSecondary,width:Ve},color:h.color.fillNeutralSecondary,checked:{borderRadius:Ne/4,border:{color:h.color.strokeInverseSecondary,width:Ve},color:h.color.fillInverse}}},modeKeys:["focus","disabled","checked"],themeStyles:ii},Bl={themeKeys:{color:"color"},base:{width:h.spacer.lg,height:h.spacer.lg,src:h.asset.check},tones:{neutral:{color:h.color.fillInverse},inverse:{color:h.color.fillNeutral},brand:{color:h.color.fillInverse}},themeStyles:ii};P(kl);P(Bl);const{Icon:{defaultTone:Pd,...El}={styles:{}}}=(jn=h)==null?void 0:jn.componentConfig,Nl={themeKeys:{color:"color"},base:{width:100,height:100,color:h.color.fillInverse},tones:{inverse:{color:h.color.fillInverse},brand:{color:h.color.fillBrand}},themeStyles:El};P(Nl);const{Column:{defaultTone:Ll,...Fl}={styles:{}}}=(Vn=h)==null?void 0:Vn.componentConfig,Ml={themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",itemTransition:"itemTransition"},base:{display:"flex",flexBoundary:"fixed",flexDirection:"column",gap:h.layout.gutterY,itemTransition:{...h.animation.standardEntrance,duration:h.animation.duration.fast}},themeStyles:Fl},zl=P(Ml),Lr={tone:Ll||"neutral",Container:zl},si=n=>{const r=pr("up"),e=pr("down");return R(W,ge(n,{get onUp(){return $e(n.onUp,r)},get onDown(){return $e(n.onDown,e)},get selected(){return n.selected||0},forwardFocus:oi,get onLayout(){return $e(t=>{var o,i;return fr(n.y).call(t,t,t.children[(o=n.selected)!=null?o:0],(i=n.selected)!=null?i:0,void 0)},n.onLayout)},get onSelectedChanged(){return $e(n.onSelectedChanged,n.scroll!=="none"?fr(n.y):void 0)},get style(){var t;return[n.style,Lr.Container.tones[(t=n.tone)!=null?t:Lr.tone],Lr.Container.base]}}))},{Label:{defaultTone:Dd,...ai}={styles:{}}}=(Gn=h)==null?void 0:Gn.componentConfig,Pl={themeKeys:{color:"backgroundColor",borderRadius:"radius"},base:{display:"flex",justifyContent:"center",color:h.color.textNeutral,padding:[h.spacer.md,h.spacer.lg],borderRadius:[h.radius.md,h.radius.md,h.radius.md,h.radius.none],height:h.typography.caption1.lineHeight+h.spacer.md,neutral:{backgroundColor:h.color.fillNeutral}},tones:{inverse:{color:h.color.fillInverse},brand:{color:h.color.fillBrand,focus:{color:h.color.orange}}},themeStyles:ai},Dl={themeKeys:{color:"textColor"},base:{...h.typography.caption1,color:h.color.textInverse},tones:{inverse:{color:h.color.textNeutral},brand:{color:h.color.textNeutral}},themeStyles:ai};P(Pl);P(Dl);const{Details:{defaultTone:Od,...li}={styles:{}}}=(qn=h)==null?void 0:qn.componentConfig,Ol={themeKeys:{alignItems:"alignItems",contentSpacing:"contentSpacing",badgeContentSpacing:"badgeContentSpacing",ratingContentSpacing:"ratingContentSpacing"},base:{display:"flex",flexDirection:"row",alignItems:"center",contentSpacing:h.spacer.lg,badgeContentSpacing:h.spacer.sm,ratingContentSpacing:h.spacer.lg},themeStyles:li},Wl={themeKeys:{color:"textColor"},base:{...h.typography.body2,marginRight:h.spacer.lg,color:h.color.textNeutral},tones:{neutral:{disabled:{color:h.color.textNeutralDisabled}},inverse:{color:h.color.textInverse,disabled:{color:h.color.textNeutralDisabled}},brand:{color:h.color.textNeutral,disabled:{color:h.color.textNeutralDisabled}}},themeStyles:li};P(Ol);P(Wl);const{Rating:{styles:wn,defaultTone:Wd}={styles:{},defaultTone:"neutral"}}=(Zn=h)==null?void 0:Zn.componentConfig,Ul={themeKeys:{justifyContent:"justifyContent",itemSpacing:"itemSpacing"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",itemSpacing:h.spacer.sm},toneModes:{},themeStyles:wn},Yl={themeKeys:{color:"textColor"},base:{color:h.color.textNeutral,...h.typography.body2},toneModes:{},themeStyles:wn},$l={themeKeys:{color:"color"},base:{height:h.typography.body2.lineHeight,width:h.typography.body2.lineHeight,color:h.color.fillNeutral,marginRight:h.spacer.sm},toneModes:{},themeStyles:wn};P(Ul);P($l);P(Yl);const{Metadata:{defaultTone:Ud,...bn}={styles:{}}}=(Jn=h)==null?void 0:Jn.componentConfig,Hl={themeKeys:{justifyContent:"justifyContent",alpha:"alpha"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",flexBoundary:"contain",alpha:h.alpha.primary},modes:{disabled:{alpha:h.alpha.inactive}},themeStyles:bn},Ql={themeKeys:{color:"textColor"},base:{maxLines:1,contain:"width",...h.typography.headline3,color:h.color.textNeutral},tones:{neutral:{disabled:{color:h.color.textNeutralDisabled}},inverse:{color:h.color.textInverse,disabled:{color:h.color.textNeutralDisabled}},brand:{color:h.color.textNeutral,disabled:{color:h.color.textNeutralDisabled}}},themeStyles:bn},Xl={themeKeys:{color:"textColor"},base:{contain:"width",maxLines:2,...h.typography.body2,color:h.color.textNeutralSecondary},tones:{neutral:{disabled:{color:h.color.textNeutralDisabled}},inverse:{color:h.color.textInverseSecondary,disabled:{color:h.color.textNeutralDisabled}},brand:{color:h.color.textNeutralSecondary,disabled:{color:h.color.textNeutralDisabled}}},themeStyles:bn};P(Hl);P(Xl);P(Ql);const{ProgressBar:{defaultTone:Yd,...ci}={styles:{}}}=(eo=h)==null?void 0:eo.componentConfig,Kl={themeKeys:{color:"barColor",borderRadius:"borderRadius"},base:{height:h.spacer.md,color:h.color.fillNeutralTertiary,borderRadius:h.radius.xs},tones:{inverse:{color:h.color.fillInverseTertiary}},themeStyles:ci},jl={themeKeys:{color:"progressColor",borderRadius:"borderRadius"},base:{borderRadius:h.radius.xs,color:h.color.fillNeutral},tones:{inverse:{color:h.color.fillInverse},brand:{color:h.color.fillBrand}},themeStyles:ci};P(Kl);P(jl);const{Radio:{defaultTone:$d,...di}={themeStyles:{}}}=(to=h)==null?void 0:to.componentConfig,ft=h.spacer.xxl,nt=h.stroke.sm,Vl={themeKeys:{borderRadius:"strokeRadius",color:"backgroundColor",colorChecked:"backgroundColorChecked"},base:{color:h.color.fillNeutralSecondary,colorChecked:h.color.fillInverse,height:ft+nt*2,width:ft+nt*2,borderRadius:ft/2+nt,border:{color:h.color.strokeNeutralSecondary,width:nt}},tones:{inverse:{border:{color:h.color.strokeInverseSecondary,width:nt}},brand:{border:{color:h.color.fillBrand,width:nt}}},themeStyles:di},Gl={themeKeys:{width:"knobWidth",height:"knobHeight",borderRadius:"knobRadius",color:"knobColor"},base:{color:h.color.fillInverse,width:ft,height:ft,borderRadius:ft/2},tones:{inverse:{color:h.color.fillNeutral}},themeStyles:di};P(Vl);P(Gl);const{Row:{defaultTone:ql,...Zl}={styles:{}}}=(ro=h)==null?void 0:ro.componentConfig,Jl={themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",itemTransition:"itemTransition"},base:{display:"flex",flexBoundary:"fixed",flexDirection:"row",gap:h.layout.gutterX,itemTransition:{...h.animation.standardEntrance,duration:h.animation.duration.fast}},themeStyles:Zl},ec=P(Jl),Fr={tone:ql,Container:ec},tc=n=>{const r=pr("left"),e=pr("right");return R(W,ge(n,{get selected(){return n.selected||0},get onLeft(){return $e(n.onLeft,r)},get onRight(){return $e(n.onRight,e)},forwardFocus:oi,get onLayout(){return $e(t=>fr(n.x).call(t,t,t.children[t.selected],t.selected,void 0),n.onLayout)},get onSelectedChanged(){return $e(n.onSelectedChanged,n.scroll!=="none"?fr(n.x):void 0)},get style(){return[n.style,Fr.Container.tones[n.tone||Fr.tone],Fr.Container.base]}}))},{Keyboard:{defaultTone:Hd,...Sn}={styles:{}}}=(no=h)==null?void 0:no.componentConfig,rc={themeKeys:{keySpacing:"keySpacing",screenW:"screenW",marginX:"marginX"},base:{keySpacing:h.spacer.md,screenW:h.layout.screenW,marginX:h.layout.marginX,height:100},themeStyles:Sn},nc={themeKeys:{keySpacing:"keySpacing",textAlign:"textAlign",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justifyContent",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:h.spacer.md,height:h.spacer.md*9,paddingX:h.spacer.md,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},contentColor:h.color.fillNeutral,padding:[h.spacer.xxxl,h.spacer.xl],baseWidth:h.spacer.md*7,color:h.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:h.radius.sm},modes:{focus:{color:h.color.interactiveNeutralFocus,contentColor:h.color.fillInverse},disabled:{color:h.color.fillNeutralDisabled,contentColor:h.color.fillNeutralDisabled}},tones:{inverse:{color:h.color.interactiveInverse,focus:{color:h.color.interactiveInverseFocus,contentColor:h.color.fillNeutral}},brand:{focus:{contentColor:h.color.fillNeutral}}},themeStyles:Sn},oc={themeKeys:{color:"textColor"},base:{textAlign:"left",color:h.color.textNeutral,...h.typography.headline2},modes:{focus:{color:h.color.textInverse},disabled:{color:h.color.textNeutralDisabled}},tones:{inverse:{focus:{color:h.color.textNeutral}}},themeStyles:Sn};P(rc);P(nc);P(oc);const{Key:{defaultTone:Qd,...hi}={styles:{}}}=(oo=h)==null?void 0:oo.componentConfig,ic={themeKeys:{keySpacing:"keySpacing",textAlign:"textAlign",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justifyContent",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:h.spacer.md,height:h.spacer.md*9,paddingX:h.spacer.md,contentColor:h.color.fillNeutral,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},padding:[h.spacer.md],baseWidth:h.spacer.md*7,color:h.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:h.radius.sm},modes:{focus:{color:h.color.interactiveNeutralFocus,contentColor:h.color.fillInverse},disabled:{color:h.color.fillNeutralDisabled,contentColor:h.color.fillNeutralDisabled}},tones:{inverse:{color:h.color.interactiveInverse,focus:{color:h.color.interactiveInverseFocus,contentColor:h.color.fillNeutral}},brand:{focus:{contentColor:h.color.fillNeutral}}},themeStyles:hi},sc={themeKeys:{color:"textColor"},base:{textAlign:"left",color:h.color.textNeutral,...h.typography.headline2},modes:{focus:{color:h.color.textInverse},disabled:{color:h.color.textNeutralDisabled}},tones:{inverse:{focus:{color:h.color.textNeutral}}},themeStyles:hi};P(ic);P(sc);const{Input:{defaultTone:Xd,...An}={styles:{}}}=(io=h)==null?void 0:io.componentConfig,ac={themeKeys:{justifyContent:"justifyContent"},base:{display:"flex",justifyContent:"flexStart",flexDirection:"column",width:100,height:100,actualTitle:""},themeStyles:An},lc={themeKeys:{borderRadius:"borderRadius",color:"backgroundColor"},base:{width:gl(4),height:100,display:"flex",flexDirection:"column",padding:[h.spacer.xxxl,h.spacer.xl],color:h.color.interactiveNeutral,contentColor:h.color.fillInverse,borderRadius:h.radius.sm,marginX:h.spacer.xxxl},modes:{focus:{color:h.color.interactiveNeutralFocus},disabled:{color:h.color.fillNeutralDisabled}},tones:{inverse:{color:h.color.interactiveInverse},brand:{color:h.color.interactiveBrand,focus:{color:h.color.fillNeutral}}},themeStyles:An},cc={themeKeys:{color:"textColor"},base:{textAlign:"left",color:h.color.textNeutral,...h.typography.button1},themeStyles:An};P(ac);P(lc);P(cc);const{Tile:{defaultTone:Kd,...Sr}={styles:{}}}=(so=h)==null?void 0:so.componentConfig,{Surface:{defaultSurfaceTone:jd,...dc}={styles:{}}}=(ao=h)==null?void 0:ao.componentConfig,hc={themeKeys:{alpha:"alpha",paddingYProgress:"paddingYProgress",borderRadius:"radius"},base:{width:400,height:240,padding:[40,10],paddingYProgress:h.spacer.xl,paddingYBetweenContent:h.spacer.md,borderRadius:h.radius.md,alpha:h.alpha.primary},modes:{disabled:{alpha:h.alpha.inactive}},themeStyles:{...dc,...Sr}},uc={themeKeys:{},base:{display:"flex",flexDirection:"column",flexBoundary:"contain",mountY:1},themeStyles:Sr},fc={themeKeys:{},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart"},themeStyles:Sr},pc={themeKeys:{},base:{width:h.spacer.lg*5,height:h.spacer.xxl+h.spacer.md},themeStyles:Sr};P(hc);P(uc);P(fc);P(pc);const gc={color:255,height:150,width:330,x:1910,y:10,mountX:1,alpha:.8,zIndex:100},Te={x:10,fontSize:22,textColor:ee("#f6f6f6")},qt={fontSize:22,textColor:ee("#f6f6f6")},[mc,xc]=Y(0),[yc,vc]=Y(0),[wc,bc]=Y(99),[Sc,Ac]=Y(0),[Cc,Tc]=Y(0),[_c,Rc]=Y(0),[Ic,kc]=Y(0);let lo=0,co=0;const Bc=n=>{n&&(xc(n),bc(r=>Math.min(n,r)),Ac(r=>Math.max(n,r)),co+=n,lo++,vc(Math.round(co/lo)))},Ec=n=>{let r=0,e=0,t=0;n.txManager.textureIdCache.forEach((o,i,s)=>{o.state==="loaded"&&r++,o.state==="loading"&&e++,o.state==="failed"&&t++}),Tc(r),Rc(e),kc(t)};function Nc(n){n.renderer.on("fpsUpdate",(r,e)=>{const t=typeof e=="number"?e:e.fps;t>5&&(Bc(t),Ec(r.root.stage))})}const Lc=n=>R(W,ge(n,{style:gc,get children(){return[R(W,{get children(){return[R(Q,{style:Te,children:"FPS:"}),R(Q,{style:qt,x:90,get children(){return mc()}})]}}),R(W,{x:160,get children(){return[R(Q,{style:Te,children:"AVG:"}),R(Q,{style:qt,x:100,get children(){return yc()}})]}}),R(W,{x:0,y:20,get children(){return[R(Q,{style:Te,children:"MIN:"}),R(Q,{style:qt,x:90,get children(){return wc()}})]}}),R(W,{x:160,y:20,get children(){return[R(Q,{style:Te,children:"MAX:"}),R(Q,{style:qt,x:100,get children(){return Sc()}})]}}),R(W,{x:0,y:50,get children(){return[R(Q,{style:Te,children:"Loaded Textures Cnt:"}),R(Q,{style:Te,x:270,get children(){return Cc()}})]}}),R(W,{x:0,y:80,get children(){return[R(Q,{style:Te,children:"Loading Textures Cnt:"}),R(Q,{style:Te,x:270,get children(){return _c()}})]}}),R(W,{x:0,y:110,get children(){return[R(Q,{style:Te,children:"Failed Textures Cnt:"}),R(Q,{style:Te,x:270,get children(){return Ic()}})]}})]}})),Jr={Column:{flexDirection:"column",display:"flex",width:140,height:600,y:360,gap:20,zIndex:101,transition:{x:{duration:250,easing:"ease-in-out"}},x:8,focus:{width:500,x:h.layout.marginX}},Gradient:{zIndex:99,color:ee("#000000"),src:"./assets/sidenav.png",alpha:0,width:1200,height:1080,focus:{alpha:1},transition:{alpha:!0}},NavButton:{zIndex:102,height:70,width:100,borderRadius:8,focus:{color:ee("#424242")},active:{width:328,height:70}}},Fc="/solid-demo-app",Mc=[{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:282,y:0}];function zc(n){const r=ll(Fc+"assets/icons_white.png",Mc);return R(W,ge(n,{get texture(){return r[n.name]},get width(){return r[n.name].props.width},get height(){return r[n.name].props.height},get x(){return(100-(r[n.name].props.width||0))/2},get y(){return(100-(r[n.name].props.height||0))/2}}))}function Zt(n){return R(W,ge(n,{forwardStates:!0,get style(){return Jr.NavButton},get children(){return[R(W,{y:-16,get children(){return R(zc,{scale:.5,get name(){return n.icon}})}}),R(Q,{style:{fontSize:38,x:116,y:18,height:50,alpha:0,active:{alpha:1}},get children(){return n.children}})]}}))}function Pc(n){let r;const e=mn();function t(){r.states.add("focus"),this.children.forEach(s=>s.states.add("active")),this.children.selected.setFocus()}function o(){r.states.remove("focus"),this.selected=0,this.children.forEach(s=>s.states.remove("active"))}function i(s){if(_a(()=>s)())return n.focusPage();e(s)}return[R(W,{flexItem:!1,width:300,height:150,x:30,y:15,zIndex:105,get alpha(){return n.showWidgets?1:0},get children(){return[R(Q,{x:80,fontSize:28,color:4143380036,children:"Built With:"}),R(W,{y:22,src:"./assets/solidWord.png",width:280,height:52}),R(W,{x:0,y:110,src:"./assets/tmdb.png",width:80,height:41}),R(Q,{x:90,y:110,contain:"width",width:160,fontSize:12,color:4143380036,children:"This product uses the TMDB API but is not endorsed or certified by TMDB."})]}}),R(si,ge(n,{onFocus:t,onBlur:o,get style(){return Jr.Column},scroll:"none",get children(){return[R(Zt,{onEnter:()=>i("/browse/all"),icon:"trending",children:"Trending"}),R(Zt,{icon:"movie",onEnter:()=>i("/browse/movie"),children:"Movies"}),R(Zt,{icon:"tv",onEnter:()=>i("/browse/tv"),children:"TV"}),R(Zt,{icon:"experiment",onEnter:()=>i("/examples"),children:"Examples"})]}})),R(W,{skipFocus:!0,ref(s){var a=r;typeof a=="function"?a(s):r=s},get style(){return Jr.Gradient}})]}const Dc=n=>{Za({Announcer:["a"],Menu:["m"],Escape:["Escape",27],Backspace:["Backspace",8],Left:["ArrowLeft",37],Right:["ArrowRight",39],Up:["ArrowUp",38],Down:["ArrowDown",40],Enter:["Enter",13]});const r=al();r.enabled=!1;const e=mn();let t,o;Nc({renderer:Fe});function i(){return t.states.has("focus")?!1:(o=an(),t.setFocus())}const[s,a]=Y(!0),l=ti(),c=["/browse","/entity"];return Je(()=>{const d=l.pathname;let f=c.some(g=>d.startsWith(g));d==="/"&&(f=!0),a(f)}),R(W,{ref(d){var f=window.APP;typeof f=="function"?f(d):window.APP=d},onAnnouncer:()=>r.enabled=!r.enabled,onLast:()=>history.back(),onMenu:()=>e("/"),style:{width:1920,height:1080},onBackspace:i,onLeft:i,onRight:()=>t.states.has("focus")&&o.setFocus(),get children(){return[R(hl,{}),R(Lc,{mountX:1,x:1910,y:10,get alpha(){return s()?1:0}}),hn(()=>n.children),R(Pc,{ref(d){var f=t;typeof f=="function"?f(d):t=d},focusPage:()=>o.setFocus(),get showWidgets(){return s()}})]}})},gr={Page:{width:1920,height:1080},headlineText:{width:1200,height:240,x:360,y:455,contain:"both",fontSize:66,textAlign:"center"},headlineSubText:{width:960,height:170,x:530,y:655,contain:"both",fontSize:48,textAlign:"center"},itemsContainer:{width:h.layout.screenW,height:800,y:560,x:0,zIndex:2},Thumbnail:{borderRadius:16,width:185,height:278,scale:1,zIndex:2,transition:{scale:{duration:250,easing:"ease-in-out"}},border:{width:0,color:0},focus:{scale:1.1,border:{color:4294967142,width:8}}},FocusRing:{borderRadius:16,width:194,height:286,y:-5,x:-5,zIndex:-1},FPS:{color:255,height:42,width:140,x:20,y:20,zIndex:100},FPSLabel:{x:10,y:0,fontSize:36,textColor:ee("#ffffff")},FPSValue:{x:90,y:0,fontSize:36,textColor:ee("#ffffff")},showHeadline:{x:70,y:20},headlineBlur:{width:1920,height:150,x:0,y:0,zIndex:14,alpha:.9,color:ee("#000000")},RowTitle:{height:60,width:300,marginBottom:-40,fontSize:36,color:ee("#f0f0f0"),zIndex:2},Row:{display:"flex",justifyContent:"spaceBetween",height:300},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",flexBoundary:"contain",gap:64,width:h.layout.screenW-2*h.layout.marginX,x:h.layout.marginX+h.layout.gutterX,y:48,transition:{y:{duration:250,easing:"ease-in-out"}},zIndex:2},Rect:{width:250,height:100,y:10,x:300,color:ee("#0000ff")},peopleBio:{...h.typography.body1,fontFamily:"Ubuntu",fontWeight:"normal",contain:"both",width:780,height:340}},mr={width:120,height:40,mount:.5,color:179,borderRadius:8,borderBottom:{width:2,color:4278254335},border:{width:2,color:4210752051},focus:{color:4210752255,borderRadius:20,borderBottom:{width:0,color:0}}},Oc={color:ee("#00A699"),height:8,y:2,x:-4,width:mr.width+8},Wc={fontSize:12,y:12,contain:"width",textAlign:"center",color:ee("#F6F6F9"),height:mr.height,width:mr.width},Vd={container:mr,topBar:Oc,text:Wc},ho={width:386,height:136,color:ee("#715cab"),focus:{color:ee("#5a39a2")},disabled:{color:ee("#291d43")}},Gd={fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:ee("#FFFFFF"),height:ho.height,width:ho.width,focus:{fontSize:40},disabled:{color:ee("#909090")}};function Uc(n){return R(W,ge(n,{get style(){return gr.Thumbnail}}))}function Yc(n){const[r,e]=Vi(n,["items"]);return R(tc,ge(e,{get style(){return gr.Row},get children(){return R(sn,{get each(){return r.items},children:t=>R(Uc,t)})}}))}const $c="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjMmZiMDhiODgwZjc2MzEzMmIyMjExYWNjYjQ5MzZiZSIsIm5iZiI6MTcyNDA1NjEwMC4yMzQ4MzgsInN1YiI6IjY2YzMwMTg1Y2NlNzA0ZWJlYWQzNWY5ZiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.dedjZUuwhiOFTlvO6FohvFkC-cEmS9QEw97du52t3bk",Hc="https://api.themoviedb.org/3";let ui,fi;const Qc="w185",Xc={headers:{"Content-Type":"application/json",Authorization:"Bearer "+$c}};function Mr(n,r=Qc){return fi+r+n}function Kc(n,r={}){return ui?en(n,r):pi().then(()=>en(n,r))}function en(n,r={}){return fetch(Hc+n,{...Xc,...r}).then(e=>e.json())}function pi(){return en("/configuration").then(n=>{var r;return ui=n,fi=(r=n.images)==null?void 0:r.secure_base_url,n})}const jc={get:Kc,loadConfig:pi};function Vc(n,r){return n.length>r?n.substring(0,r-3)+"...":n}function Gc(n,r=7){let e=[];for(let t=0,o=n.length;t<o;t+=r)e.push(n.slice(t,t+r));return e}function qc(n=[]){return n.map(r=>({src:Mr(r.poster_path||r.profile_path),tileSrc:Mr(r.backdrop_path||r.profile_path,"w300"),backdrop:Mr(r.backdrop_path,"w1280"),href:"/entity/".concat(r.media_type||"people","/").concat(r.id),shortTitle:Vc(r.title||r.name,30),title:r.title||r.name,data:r,entityInfo:{type:r.media_type||"people",id:r.id},heroContent:{title:r.title||r.name,description:r.overview}}))}let zr=new Map;const Jt=new Map;function Zc(n){return r=>{const e="/trending/".concat(n,"/week?page=").concat(r);if(zr.has(e))return zr.get(e);let t=jc.get(e).then(o=>{let i=o.results.filter(l=>!l.adult),s=(Jt.has(n)?Jt.get(n):[]).concat(qc(i)),a=Gc(s);return a[a.length-1].length<7?Jt.set(n,a.pop()):Jt.delete(n),a});return zr.set(e,t),t}}function Jc(n){const[r,e]=Y([]),[t,o]=Y(1),[i,s]=Y(!1),[a]=To(t,n);return Pr(()=>{const l=a();l&&Oi(()=>{l.length===0&&s(!0),e(c=>[...c,...l])})}),{pages:r,page:t,setPage:o,setPages:e,end:i,setEnd:s}}const Ar=900,ed={display:"flex",flexDirection:"column",flexBoundary:"fixed",width:Ar,height:220,gap:16},td={...h.typography.display2,fontFamily:"Ubuntu",fontWeight:700,maxLines:1,width:Ar,contain:"width"},rd=n=>R(Q,ge(n,{style:td})),nd={...h.typography.body1,fontFamily:"Ubuntu",fontWeight:400,lineHeight:32,width:Ar,maxLines:3,contain:"width"},od={fontSize:16,lineHeight:20},id=n=>R(Q,ge(n,{style:nd,get children(){return n.children}})),sd=n=>(()=>{var r=br("node");return pa(Ja,r,()=>[8,13,11,13]),un(r,ge(n,{style:{color:"0x00000099",borderRadius:8,border:{width:2,color:"0xffffffff"}}}),!0),ua(r,R(Q,{style:od,get children(){return n.children}})),r})(),uo={...h.typography.body2,fontFamily:"Ubuntu",fontWeight:400},ad=n=>R(W,{style:{display:"flex",flexDirection:"row",gap:18,width:Ar,height:48},get children(){return[R(W,{y:-4,src:"./assets/stars.png",width:188,height:31}),R(W,{y:-4,flexItem:!1,clipping:!0,get width(){return 188*n.voteAverage/10},height:31,get children(){return R(W,{src:"./assets/stars-full.png",width:188,height:31})}}),R(Q,{style:uo,get children(){return[hn(()=>n.voteCount)," reviews"]}}),R(Q,{style:uo,get children(){return n.metaText}}),R(sn,{get each(){return n.badges},children:r=>R(sd,{y:-5,children:r})})]}}),ld=n=>R(W,ge({id:"contentBlock",style:ed},n,{get children(){return[R(rd,{get children(){return n.content.title}}),R(id,{get children(){return n.content.description}}),R(wr,{get when(){return n.content.voteCount},get children(){return R(ad,{get metaText(){return n.content.metaText},get badges(){return n.content.badges},get voteCount(){return n.content.voteCount},get voteAverage(){return n.content.voteAverage}})}})]}}));var fo=(n,r)=>{let e;const t=()=>clearTimeout(e);return mt()&&ke(t),Object.assign((...i)=>{e!==void 0&&t(),e=setTimeout(()=>n(...i),r)},{clear:t})};const po=()=>{const n=Ra(),[r,e]=Y(0),[t,o]=Y({}),i=mn(),s=Di(()=>0),a=X(()=>Jc(Zc(n.filter||"all"))),l=fo(g=>dl(g),400),c=fo(g=>o(g||{}),200);Je(gt(an,g=>{g.backdrop&&l(g.backdrop),g.heroContent&&c(g.heroContent)},{defer:!0}));function d(){var w;(w=this.children.selected)==null||w.setFocus(),e((this.y||0)*-1+24);let g=a().pages().length;this.parent.selected=this.parent.children.indexOf(this),(g===0||this.parent.selected&&this.parent.selected>=g-2)&&a().setPage(x=>x+1)}function f(){let g=this.children.find(w=>w.states.has("focus"));return L(g&&g.href),i(g.href),!0}return R(wr,{get when(){return a().pages().length},get children(){return[R(ld,{y:360,x:162,get content(){return t()}}),R(W,{clipping:!0,get style(){return gr.itemsContainer},get children(){return R(si,{id:"BrowseColumn",plinko:!0,announce:"All Trending - Week",get y(){return r()},scroll:"none",get style(){return gr.Column},get children(){return R(sn,{get each(){return a().pages()},children:(g,w)=>R(Yc,{get autofocus(){return s(w())},items:g,width:1620,onFocus:d,onEnter:f})})}})}})]}})},cd=()=>(()=>{var n=br("node");return fa(n,"style",{width:1920,height:1080,color:868483072}),n})(),dd=new URL("AppCoreExtensions-5ihjTbF1.js",import.meta.url).href,hd=fe(()=>he(()=>import("./Grid-B-0pkRyz.js"),__vite__mapDeps([0,1]))),ud=fe(()=>he(()=>import("./Portal-DpG-4L6s.js"),__vite__mapDeps([2,1]))),fd=fe(()=>he(()=>import("./Text-DIHR_K5w.js"),__vite__mapDeps([3,1]))),pd=fe(()=>he(()=>import("./Create-CYW12dLz.js"),__vite__mapDeps([4,1]))),gd=fe(()=>he(()=>import("./Viewport-CHOT06ak.js"),__vite__mapDeps([5,1]))),md=fe(()=>he(()=>import("./Buttons-CyDLRxnD.js"),__vite__mapDeps([6,1]))),xd=fe(()=>he(()=>import("./Flex-ByrbJAqP.js"),__vite__mapDeps([7,1]))),yd=fe(()=>he(()=>import("./FlexSize-DS4oagJk.js"),__vite__mapDeps([8,1]))),vd=fe(()=>he(()=>import("./FlexColumnSize-y5-aYERq.js"),__vite__mapDeps([9,1]))),wd=fe(()=>he(()=>import("./FlexColumn-D7NrfqJ3.js"),__vite__mapDeps([10,1]))),bd=fe(()=>he(()=>import("./ButtonsMaterial-Cicfh8Y2.js"),__vite__mapDeps([11,1]))),Sd=fe(()=>he(()=>import("./SuperFlex-B3Og-6Qy.js"),__vite__mapDeps([12,1]))),Ad=fe(()=>he(()=>import("./Entity-BTQ-e4Rl.js"),__vite__mapDeps([13,1]))),Cd=fe(()=>he(()=>import("./People-6UqSXpsu.js"),__vite__mapDeps([14,1])));pe.debug=!1;pe.animationsEnabled=!0;pe.fontSettings.fontFamily="Ubuntu";pe.fontSettings.color=ee("#f6f6f6");pe.fontSettings.fontSize=32;pe.rendererOptions={coreExtensionModule:dd,fpsUpdateInterval:200,enableInspector:!0,deviceLogicalPixelRatio:window.innerHeight/1080};ha(()=>R(Ha,{root:n=>R(Dc,n),get children(){return[R(se,{path:"",component:po}),R(se,{path:"examples",component:ud}),R(se,{path:"browse/:filter",component:po}),R(se,{path:"grid",component:hd}),R(se,{path:"text",component:fd}),R(se,{path:"buttons",component:md}),R(se,{path:"flex",component:xd}),R(se,{path:"create",component:pd}),R(se,{path:"viewport",component:gd}),R(se,{path:"flexsize",component:yd}),R(se,{path:"flexcolumnsize",component:vd}),R(se,{path:"flexcolumn",component:wd}),R(se,{path:"superflex",component:Sd}),R(se,{path:"buttonsmaterial",component:bd}),R(se,{path:"entity/people/:id",component:Cd}),R(se,{path:"entity/:type/:id",component:Ad}),R(se,{path:"*all",component:cd})]}}));function qd(){const n=document.getElementById("video");return n.hidden=!1,setTimeout(()=>n.play(),50),n.focus(),n}function Zd(){const n=document.getElementById("video");return n.hidden=!0,n.pause(),n}export{Mr as A,Ra as B,si as C,ld as D,Md as E,sn as F,Yc as G,Zd as H,kd as I,qd as J,Zi as K,Gd as M,tc as R,wr as S,Q as T,W as V,_d as __vite_legacy_guard,To as a,Pr as b,Y as c,Oi as d,Di as e,Je as f,Id as g,ee as h,R as i,gr as j,hn as k,rn as l,ge as m,ke as n,gt as o,Vd as p,br as q,pa as r,dl as s,h as t,mn as u,un as v,Ja as w,ua as x,jc as y,qc as z};
//# sourceMappingURL=index-RGtvAVXq.js.map
